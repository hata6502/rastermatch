var Q0=Object.create;var Ld=Object.defineProperty;var $0=Object.getOwnPropertyDescriptor;var W0=Object.getOwnPropertyNames;var Z0=Object.getPrototypeOf,J0=Object.prototype.hasOwnProperty;var Ne=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports);var tv=(i,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of W0(t))!J0.call(i,s)&&s!==e&&Ld(i,s,{get:()=>t[s],enumerable:!(n=$0(t,s))||n.enumerable});return i};var bs=(i,t,e)=>(e=i!=null?Q0(Z0(i)):{},tv(t||!i||!i.__esModule?Ld(e,"default",{value:i,enumerable:!0}):e,i));var qd=Ne(H=>{"use strict";var vo=Symbol.for("react.transitional.element"),ev=Symbol.for("react.portal"),iv=Symbol.for("react.fragment"),nv=Symbol.for("react.strict_mode"),sv=Symbol.for("react.profiler"),av=Symbol.for("react.consumer"),rv=Symbol.for("react.context"),lv=Symbol.for("react.forward_ref"),ov=Symbol.for("react.suspense"),cv=Symbol.for("react.memo"),zd=Symbol.for("react.lazy"),Od=Symbol.iterator;function uv(i){return i===null||typeof i!="object"?null:(i=Od&&i[Od]||i["@@iterator"],typeof i=="function"?i:null)}var Bd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ud=Object.assign,Fd={};function xn(i,t,e){this.props=i,this.context=t,this.refs=Fd,this.updater=e||Bd}xn.prototype.isReactComponent={};xn.prototype.setState=function(i,t){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,t,"setState")};xn.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function Pd(){}Pd.prototype=xn.prototype;function bo(i,t,e){this.props=i,this.context=t,this.refs=Fd,this.updater=e||Bd}var yo=bo.prototype=new Pd;yo.constructor=bo;Ud(yo,xn.prototype);yo.isPureReactComponent=!0;var Nd=Array.isArray,lt={H:null,A:null,T:null,S:null},Gd=Object.prototype.hasOwnProperty;function Ao(i,t,e,n,s,a){return e=a.ref,{$$typeof:vo,type:i,key:t,ref:e!==void 0?e:null,props:a}}function hv(i,t){return Ao(i.type,t,void 0,void 0,void 0,i.props)}function _o(i){return typeof i=="object"&&i!==null&&i.$$typeof===vo}function dv(i){var t={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(e){return t[e]})}var kd=/\/+/g;function mo(i,t){return typeof i=="object"&&i!==null&&i.key!=null?dv(""+i.key):t.toString(36)}function Id(){}function fv(i){switch(i.status){case"fulfilled":return i.value;case"rejected":throw i.reason;default:switch(typeof i.status=="string"?i.then(Id,Id):(i.status="pending",i.then(function(t){i.status==="pending"&&(i.status="fulfilled",i.value=t)},function(t){i.status==="pending"&&(i.status="rejected",i.reason=t)})),i.status){case"fulfilled":return i.value;case"rejected":throw i.reason}}throw i}function En(i,t,e,n,s){var a=typeof i;(a==="undefined"||a==="boolean")&&(i=null);var r=!1;if(i===null)r=!0;else switch(a){case"bigint":case"string":case"number":r=!0;break;case"object":switch(i.$$typeof){case vo:case ev:r=!0;break;case zd:return r=i._init,En(r(i._payload),t,e,n,s)}}if(r)return s=s(i),r=n===""?"."+mo(i,0):n,Nd(s)?(e="",r!=null&&(e=r.replace(kd,"$&/")+"/"),En(s,t,e,"",function(c){return c})):s!=null&&(_o(s)&&(s=hv(s,e+(s.key==null||i&&i.key===s.key?"":(""+s.key).replace(kd,"$&/")+"/")+r)),t.push(s)),1;r=0;var l=n===""?".":n+":";if(Nd(i))for(var o=0;o<i.length;o++)n=i[o],a=l+mo(n,o),r+=En(n,t,e,a,s);else if(o=uv(i),typeof o=="function")for(i=o.call(i),o=0;!(n=i.next()).done;)n=n.value,a=l+mo(n,o++),r+=En(n,t,e,a,s);else if(a==="object"){if(typeof i.then=="function")return En(fv(i),t,e,n,s);throw t=String(i),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return r}function Ya(i,t,e){if(i==null)return i;var n=[],s=0;return En(i,n,"","",function(a){return t.call(e,a,s++)}),n}function pv(i){if(i._status===-1){var t=i._result;t=t(),t.then(function(e){(i._status===0||i._status===-1)&&(i._status=1,i._result=e)},function(e){(i._status===0||i._status===-1)&&(i._status=2,i._result=e)}),i._status===-1&&(i._status=0,i._result=t)}if(i._status===1)return i._result.default;throw i._result}var Hd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function gv(){}H.Children={map:Ya,forEach:function(i,t,e){Ya(i,function(){t.apply(this,arguments)},e)},count:function(i){var t=0;return Ya(i,function(){t++}),t},toArray:function(i){return Ya(i,function(t){return t})||[]},only:function(i){if(!_o(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};H.Component=xn;H.Fragment=iv;H.Profiler=sv;H.PureComponent=bo;H.StrictMode=nv;H.Suspense=ov;H.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=lt;H.act=function(){throw Error("act(...) is not supported in production builds of React.")};H.cache=function(i){return function(){return i.apply(null,arguments)}};H.cloneElement=function(i,t,e){if(i==null)throw Error("The argument must be a React element, but you passed "+i+".");var n=Ud({},i.props),s=i.key,a=void 0;if(t!=null)for(r in t.ref!==void 0&&(a=void 0),t.key!==void 0&&(s=""+t.key),t)!Gd.call(t,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&t.ref===void 0||(n[r]=t[r]);var r=arguments.length-2;if(r===1)n.children=e;else if(1<r){for(var l=Array(r),o=0;o<r;o++)l[o]=arguments[o+2];n.children=l}return Ao(i.type,s,void 0,void 0,a,n)};H.createContext=function(i){return i={$$typeof:rv,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null},i.Provider=i,i.Consumer={$$typeof:av,_context:i},i};H.createElement=function(i,t,e){var n,s={},a=null;if(t!=null)for(n in t.key!==void 0&&(a=""+t.key),t)Gd.call(t,n)&&n!=="key"&&n!=="__self"&&n!=="__source"&&(s[n]=t[n]);var r=arguments.length-2;if(r===1)s.children=e;else if(1<r){for(var l=Array(r),o=0;o<r;o++)l[o]=arguments[o+2];s.children=l}if(i&&i.defaultProps)for(n in r=i.defaultProps,r)s[n]===void 0&&(s[n]=r[n]);return Ao(i,a,void 0,void 0,null,s)};H.createRef=function(){return{current:null}};H.forwardRef=function(i){return{$$typeof:lv,render:i}};H.isValidElement=_o;H.lazy=function(i){return{$$typeof:zd,_payload:{_status:-1,_result:i},_init:pv}};H.memo=function(i,t){return{$$typeof:cv,type:i,compare:t===void 0?null:t}};H.startTransition=function(i){var t=lt.T,e={};lt.T=e;try{var n=i(),s=lt.S;s!==null&&s(e,n),typeof n=="object"&&n!==null&&typeof n.then=="function"&&n.then(gv,Hd)}catch(a){Hd(a)}finally{lt.T=t}};H.unstable_useCacheRefresh=function(){return lt.H.useCacheRefresh()};H.use=function(i){return lt.H.use(i)};H.useActionState=function(i,t,e){return lt.H.useActionState(i,t,e)};H.useCallback=function(i,t){return lt.H.useCallback(i,t)};H.useContext=function(i){return lt.H.useContext(i)};H.useDebugValue=function(){};H.useDeferredValue=function(i,t){return lt.H.useDeferredValue(i,t)};H.useEffect=function(i,t){return lt.H.useEffect(i,t)};H.useId=function(){return lt.H.useId()};H.useImperativeHandle=function(i,t,e){return lt.H.useImperativeHandle(i,t,e)};H.useInsertionEffect=function(i,t){return lt.H.useInsertionEffect(i,t)};H.useLayoutEffect=function(i,t){return lt.H.useLayoutEffect(i,t)};H.useMemo=function(i,t){return lt.H.useMemo(i,t)};H.useOptimistic=function(i,t){return lt.H.useOptimistic(i,t)};H.useReducer=function(i,t,e){return lt.H.useReducer(i,t,e)};H.useRef=function(i){return lt.H.useRef(i)};H.useState=function(i){return lt.H.useState(i)};H.useSyncExternalStore=function(i,t,e){return lt.H.useSyncExternalStore(i,t,e)};H.useTransition=function(){return lt.H.useTransition()};H.version="19.0.0"});var ys=Ne((e1,jd)=>{"use strict";jd.exports=qd()});var Cf=Ne(W=>{"use strict";function nu(i,t){var e=i.length;i.push(t);t:for(;0<e;){var n=e-1>>>1,s=i[n];if(0<Ur(s,t))i[n]=t,i[e]=s,e=n;else break t}}function Te(i){return i.length===0?null:i[0]}function Pr(i){if(i.length===0)return null;var t=i[0],e=i.pop();if(e!==t){i[0]=e;t:for(var n=0,s=i.length,a=s>>>1;n<a;){var r=2*(n+1)-1,l=i[r],o=r+1,c=i[o];if(0>Ur(l,e))o<s&&0>Ur(c,l)?(i[n]=c,i[o]=e,n=o):(i[n]=l,i[r]=e,n=r);else if(o<s&&0>Ur(c,e))i[n]=c,i[o]=e,n=o;else break t}}return t}function Ur(i,t){var e=i.sortIndex-t.sortIndex;return e!==0?e:i.id-t.id}W.unstable_now=void 0;typeof performance=="object"&&typeof performance.now=="function"?(bf=performance,W.unstable_now=function(){return bf.now()}):(tu=Date,yf=tu.now(),W.unstable_now=function(){return tu.now()-yf});var bf,tu,yf,He=[],bi=[],fb=1,ce=null,zt=3,Gr=!1,Wi=!1,Ps=!1,Sf=typeof setTimeout=="function"?setTimeout:null,wf=typeof clearTimeout=="function"?clearTimeout:null,Af=typeof setImmediate<"u"?setImmediate:null;function Fr(i){for(var t=Te(bi);t!==null;){if(t.callback===null)Pr(bi);else if(t.startTime<=i)Pr(bi),t.sortIndex=t.expirationTime,nu(He,t);else break;t=Te(bi)}}function su(i){if(Ps=!1,Fr(i),!Wi)if(Te(He)!==null)Wi=!0,au();else{var t=Te(bi);t!==null&&ru(su,t.startTime-i)}}var qr=!1,Gs=-1,Ef=5,xf=-1;function Tf(){return!(W.unstable_now()-xf<Ef)}function eu(){if(qr){var i=W.unstable_now();xf=i;var t=!0;try{t:{Wi=!1,Ps&&(Ps=!1,wf(Gs),Gs=-1),Gr=!0;var e=zt;try{e:{for(Fr(i),ce=Te(He);ce!==null&&!(ce.expirationTime>i&&Tf());){var n=ce.callback;if(typeof n=="function"){ce.callback=null,zt=ce.priorityLevel;var s=n(ce.expirationTime<=i);if(i=W.unstable_now(),typeof s=="function"){ce.callback=s,Fr(i),t=!0;break e}ce===Te(He)&&Pr(He),Fr(i)}else Pr(He);ce=Te(He)}if(ce!==null)t=!0;else{var a=Te(bi);a!==null&&ru(su,a.startTime-i),t=!1}}break t}finally{ce=null,zt=e,Gr=!1}t=void 0}}finally{t?Fs():qr=!1}}}var Fs;typeof Af=="function"?Fs=function(){Af(eu)}:typeof MessageChannel<"u"?(iu=new MessageChannel,_f=iu.port2,iu.port1.onmessage=eu,Fs=function(){_f.postMessage(null)}):Fs=function(){Sf(eu,0)};var iu,_f;function au(){qr||(qr=!0,Fs())}function ru(i,t){Gs=Sf(function(){i(W.unstable_now())},t)}W.unstable_IdlePriority=5;W.unstable_ImmediatePriority=1;W.unstable_LowPriority=4;W.unstable_NormalPriority=3;W.unstable_Profiling=null;W.unstable_UserBlockingPriority=2;W.unstable_cancelCallback=function(i){i.callback=null};W.unstable_continueExecution=function(){Wi||Gr||(Wi=!0,au())};W.unstable_forceFrameRate=function(i){0>i||125<i?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ef=0<i?Math.floor(1e3/i):5};W.unstable_getCurrentPriorityLevel=function(){return zt};W.unstable_getFirstCallbackNode=function(){return Te(He)};W.unstable_next=function(i){switch(zt){case 1:case 2:case 3:var t=3;break;default:t=zt}var e=zt;zt=t;try{return i()}finally{zt=e}};W.unstable_pauseExecution=function(){};W.unstable_requestPaint=function(){};W.unstable_runWithPriority=function(i,t){switch(i){case 1:case 2:case 3:case 4:case 5:break;default:i=3}var e=zt;zt=i;try{return t()}finally{zt=e}};W.unstable_scheduleCallback=function(i,t,e){var n=W.unstable_now();switch(typeof e=="object"&&e!==null?(e=e.delay,e=typeof e=="number"&&0<e?n+e:n):e=n,i){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=e+s,i={id:fb++,callback:t,priorityLevel:i,startTime:e,expirationTime:s,sortIndex:-1},e>n?(i.sortIndex=e,nu(bi,i),Te(He)===null&&i===Te(bi)&&(Ps?(wf(Gs),Gs=-1):Ps=!0,ru(su,e-n))):(i.sortIndex=s,nu(He,i),Wi||Gr||(Wi=!0,au())),i};W.unstable_shouldYield=Tf;W.unstable_wrapCallback=function(i){var t=zt;return function(){var e=zt;zt=t;try{return i.apply(this,arguments)}finally{zt=e}}}});var Mf=Ne((Q1,Rf)=>{"use strict";Rf.exports=Cf()});var Lf=Ne(qt=>{"use strict";var pb=ys();function Df(i){var t="https://react.dev/errors/"+i;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var e=2;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e])}return"Minified React error #"+i+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function yi(){}var Gt={d:{f:yi,r:function(){throw Error(Df(522))},D:yi,C:yi,L:yi,m:yi,X:yi,S:yi,M:yi},p:0,findDOMNode:null},gb=Symbol.for("react.portal");function mb(i,t,e){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gb,key:n==null?null:""+n,children:i,containerInfo:t,implementation:e}}var qs=pb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function jr(i,t){if(i==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Gt;qt.createPortal=function(i,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Df(299));return mb(i,t,null,e)};qt.flushSync=function(i){var t=qs.T,e=Gt.p;try{if(qs.T=null,Gt.p=2,i)return i()}finally{qs.T=t,Gt.p=e,Gt.d.f()}};qt.preconnect=function(i,t){typeof i=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Gt.d.C(i,t))};qt.prefetchDNS=function(i){typeof i=="string"&&Gt.d.D(i)};qt.preinit=function(i,t){if(typeof i=="string"&&t&&typeof t.as=="string"){var e=t.as,n=jr(e,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,a=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;e==="style"?Gt.d.S(i,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:n,integrity:s,fetchPriority:a}):e==="script"&&Gt.d.X(i,{crossOrigin:n,integrity:s,fetchPriority:a,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};qt.preinitModule=function(i,t){if(typeof i=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var e=jr(t.as,t.crossOrigin);Gt.d.M(i,{crossOrigin:e,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Gt.d.M(i)};qt.preload=function(i,t){if(typeof i=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var e=t.as,n=jr(e,t.crossOrigin);Gt.d.L(i,e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};qt.preloadModule=function(i,t){if(typeof i=="string")if(t){var e=jr(t.as,t.crossOrigin);Gt.d.m(i,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:e,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Gt.d.m(i)};qt.requestFormReset=function(i){Gt.d.r(i)};qt.unstable_batchedUpdates=function(i,t){return i(t)};qt.useFormState=function(i,t,e){return qs.H.useFormState(i,t,e)};qt.useFormStatus=function(){return qs.H.useHostTransitionStatus()};qt.version="19.0.0"});var kf=Ne((W1,Nf)=>{"use strict";function Of(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Of)}catch(i){console.error(i)}}Of(),Nf.exports=Lf()});var M0=Ne(co=>{"use strict";var xt=Mf(),Jp=ys(),vb=kf();function E(i){var t="https://react.dev/errors/"+i;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var e=2;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e])}return"Minified React error #"+i+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function tg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var bb=Symbol.for("react.element"),Vr=Symbol.for("react.transitional.element"),Zs=Symbol.for("react.portal"),zn=Symbol.for("react.fragment"),eg=Symbol.for("react.strict_mode"),Bu=Symbol.for("react.profiler"),yb=Symbol.for("react.provider"),ig=Symbol.for("react.consumer"),ii=Symbol.for("react.context"),Lh=Symbol.for("react.forward_ref"),Uu=Symbol.for("react.suspense"),Fu=Symbol.for("react.suspense_list"),Oh=Symbol.for("react.memo"),Si=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var ng=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.tracing_marker");var Ab=Symbol.for("react.memo_cache_sentinel"),If=Symbol.iterator;function js(i){return i===null||typeof i!="object"?null:(i=If&&i[If]||i["@@iterator"],typeof i=="function"?i:null)}var _b=Symbol.for("react.client.reference");function Pu(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===_b?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case zn:return"Fragment";case Zs:return"Portal";case Bu:return"Profiler";case eg:return"StrictMode";case Uu:return"Suspense";case Fu:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case ii:return(i.displayName||"Context")+".Provider";case ig:return(i._context.displayName||"Context")+".Consumer";case Lh:var t=i.render;return i=i.displayName,i||(i=t.displayName||t.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Oh:return t=i.displayName||null,t!==null?t:Pu(i.type)||"Memo";case Si:t=i._payload,i=i._init;try{return Pu(i(t))}catch{}}return null}var k=Jp.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=Object.assign,lu,Hf;function Js(i){if(lu===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);lu=t&&t[1]||"",Hf=-1<e.stack.indexOf(`
    at`)?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lu+i+Hf}var ou=!1;function cu(i,t){if(!i||ou)return"";ou=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(f){var d=f}Reflect.construct(i,[],h)}else{try{h.call()}catch(f){d=f}i.call(h.prototype)}}else{try{throw Error()}catch(f){d=f}(h=i())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(f){if(f&&d&&typeof f.stack=="string")return[f.stack,d.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=n.DetermineComponentFrameRoot(),r=a[0],l=a[1];if(r&&l){var o=r.split(`
`),c=l.split(`
`);for(s=n=0;n<o.length&&!o[n].includes("DetermineComponentFrameRoot");)n++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(n===o.length||s===c.length)for(n=o.length-1,s=c.length-1;1<=n&&0<=s&&o[n]!==c[s];)s--;for(;1<=n&&0<=s;n--,s--)if(o[n]!==c[s]){if(n!==1||s!==1)do if(n--,s--,0>s||o[n]!==c[s]){var u=`
`+o[n].replace(" at new "," at ");return i.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",i.displayName)),u}while(1<=n&&0<=s);break}}}finally{ou=!1,Error.prepareStackTrace=e}return(e=i?i.displayName||i.name:"")?Js(e):""}function Sb(i){switch(i.tag){case 26:case 27:case 5:return Js(i.type);case 16:return Js("Lazy");case 13:return Js("Suspense");case 19:return Js("SuspenseList");case 0:case 15:return i=cu(i.type,!1),i;case 11:return i=cu(i.type.render,!1),i;case 1:return i=cu(i.type,!0),i;default:return""}}function zf(i){try{var t="";do t+=Sb(i),i=i.return;while(i);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}function hs(i){var t=i,e=i;if(i.alternate)for(;t.return;)t=t.return;else{i=t;do t=i,t.flags&4098&&(e=t.return),i=t.return;while(i)}return t.tag===3?e:null}function sg(i){if(i.tag===13){var t=i.memoizedState;if(t===null&&(i=i.alternate,i!==null&&(t=i.memoizedState)),t!==null)return t.dehydrated}return null}function Bf(i){if(hs(i)!==i)throw Error(E(188))}function wb(i){var t=i.alternate;if(!t){if(t=hs(i),t===null)throw Error(E(188));return t!==i?null:i}for(var e=i,n=t;;){var s=e.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){e=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===e)return Bf(s),i;if(a===n)return Bf(s),t;a=a.sibling}throw Error(E(188))}if(e.return!==n.return)e=s,n=a;else{for(var r=!1,l=s.child;l;){if(l===e){r=!0,e=s,n=a;break}if(l===n){r=!0,n=s,e=a;break}l=l.sibling}if(!r){for(l=a.child;l;){if(l===e){r=!0,e=a,n=s;break}if(l===n){r=!0,n=a,e=s;break}l=l.sibling}if(!r)throw Error(E(189))}}if(e.alternate!==n)throw Error(E(190))}if(e.tag!==3)throw Error(E(188));return e.stateNode.current===e?i:t}function ag(i){var t=i.tag;if(t===5||t===26||t===27||t===6)return i;for(i=i.child;i!==null;){if(t=ag(i),t!==null)return t;i=i.sibling}return null}var ta=Array.isArray,it=vb.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,an={pending:!1,data:null,method:null,action:null},Gu=[],Bn=-1;function qe(i){return{current:i}}function Mt(i){0>Bn||(i.current=Gu[Bn],Gu[Bn]=null,Bn--)}function rt(i,t){Bn++,Gu[Bn]=i.current,i.current=t}var Ue=qe(null),ba=qe(null),Di=qe(null),_l=qe(null);function Sl(i,t){switch(rt(Di,t),rt(ba,i),rt(Ue,null),i=t.nodeType,i){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?Fp(t):0;break;default:if(i=i===8?t.parentNode:t,t=i.tagName,i=i.namespaceURI)i=Fp(i),t=v0(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Mt(Ue),rt(Ue,t)}function is(){Mt(Ue),Mt(ba),Mt(Di)}function qu(i){i.memoizedState!==null&&rt(_l,i);var t=Ue.current,e=v0(t,i.type);t!==e&&(rt(ba,i),rt(Ue,e))}function wl(i){ba.current===i&&(Mt(Ue),Mt(ba)),_l.current===i&&(Mt(_l),Ma._currentValue=an)}var ju=Object.prototype.hasOwnProperty,Nh=xt.unstable_scheduleCallback,uu=xt.unstable_cancelCallback,Eb=xt.unstable_shouldYield,xb=xt.unstable_requestPaint,Fe=xt.unstable_now,Tb=xt.unstable_getCurrentPriorityLevel,rg=xt.unstable_ImmediatePriority,lg=xt.unstable_UserBlockingPriority,El=xt.unstable_NormalPriority,Cb=xt.unstable_LowPriority,og=xt.unstable_IdlePriority,Rb=xt.log,Mb=xt.unstable_setDisableYieldValue,Na=null,ie=null;function Db(i){if(ie&&typeof ie.onCommitFiberRoot=="function")try{ie.onCommitFiberRoot(Na,i,void 0,(i.current.flags&128)===128)}catch{}}function Ri(i){if(typeof Rb=="function"&&Mb(i),ie&&typeof ie.setStrictMode=="function")try{ie.setStrictMode(Na,i)}catch{}}var ne=Math.clz32?Math.clz32:Nb,Lb=Math.log,Ob=Math.LN2;function Nb(i){return i>>>=0,i===0?32:31-(Lb(i)/Ob|0)|0}var Xr=128,Yr=4194304;function Ji(i){var t=i&42;if(t!==0)return t;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ql(i,t){var e=i.pendingLanes;if(e===0)return 0;var n=0,s=i.suspendedLanes,a=i.pingedLanes,r=i.warmLanes;i=i.finishedLanes!==0;var l=e&134217727;return l!==0?(e=l&~s,e!==0?n=Ji(e):(a&=l,a!==0?n=Ji(a):i||(r=l&~r,r!==0&&(n=Ji(r))))):(l=e&~s,l!==0?n=Ji(l):a!==0?n=Ji(a):i||(r=e&~r,r!==0&&(n=Ji(r)))),n===0?0:t!==0&&t!==n&&!(t&s)&&(s=n&-n,r=t&-t,s>=r||s===32&&(r&4194176)!==0)?t:n}function ka(i,t){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&t)===0}function kb(i,t){switch(i){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cg(){var i=Xr;return Xr<<=1,!(Xr&4194176)&&(Xr=128),i}function ug(){var i=Yr;return Yr<<=1,!(Yr&62914560)&&(Yr=4194304),i}function hu(i){for(var t=[],e=0;31>e;e++)t.push(i);return t}function Ia(i,t){i.pendingLanes|=t,t!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ib(i,t,e,n,s,a){var r=i.pendingLanes;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=e,i.entangledLanes&=e,i.errorRecoveryDisabledLanes&=e,i.shellSuspendCounter=0;var l=i.entanglements,o=i.expirationTimes,c=i.hiddenUpdates;for(e=r&~e;0<e;){var u=31-ne(e),h=1<<u;l[u]=0,o[u]=-1;var d=c[u];if(d!==null)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];f!==null&&(f.lane&=-536870913)}e&=~h}n!==0&&hg(i,n,0),a!==0&&s===0&&i.tag!==0&&(i.suspendedLanes|=a&~(r&~t))}function hg(i,t,e){i.pendingLanes|=t,i.suspendedLanes&=~t;var n=31-ne(t);i.entangledLanes|=t,i.entanglements[n]=i.entanglements[n]|1073741824|e&4194218}function dg(i,t){var e=i.entangledLanes|=t;for(i=i.entanglements;e;){var n=31-ne(e),s=1<<n;s&t|i[n]&t&&(i[n]|=t),e&=~s}}function fg(i){return i&=-i,2<i?8<i?i&134217727?32:268435456:8:2}function pg(){var i=it.p;return i!==0?i:(i=window.event,i===void 0?32:C0(i.type))}function Hb(i,t){var e=it.p;try{return it.p=i,t()}finally{it.p=e}}var Gi=Math.random().toString(36).slice(2),Bt="__reactFiber$"+Gi,$t="__reactProps$"+Gi,ds="__reactContainer$"+Gi,Vu="__reactEvents$"+Gi,zb="__reactListeners$"+Gi,Bb="__reactHandles$"+Gi,Uf="__reactResources$"+Gi,ya="__reactMarker$"+Gi;function kh(i){delete i[Bt],delete i[$t],delete i[Vu],delete i[zb],delete i[Bb]}function nn(i){var t=i[Bt];if(t)return t;for(var e=i.parentNode;e;){if(t=e[ds]||e[Bt]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(i=Gp(i);i!==null;){if(e=i[Bt])return e;i=Gp(i)}return t}i=e,e=i.parentNode}return null}function fs(i){if(i=i[Bt]||i[ds]){var t=i.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return i}return null}function ea(i){var t=i.tag;if(t===5||t===26||t===27||t===6)return i.stateNode;throw Error(E(33))}function Kn(i){var t=i[Uf];return t||(t=i[Uf]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ct(i){i[ya]=!0}var gg=new Set,mg={};function mn(i,t){ns(i,t),ns(i+"Capture",t)}function ns(i,t){for(mg[i]=t,i=0;i<t.length;i++)gg.add(t[i])}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ub=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ff={},Pf={};function Fb(i){return ju.call(Pf,i)?!0:ju.call(Ff,i)?!1:Ub.test(i)?Pf[i]=!0:(Ff[i]=!0,!1)}function cl(i,t,e){if(Fb(t))if(e===null)i.removeAttribute(t);else{switch(typeof e){case"undefined":case"function":case"symbol":i.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){i.removeAttribute(t);return}}i.setAttribute(t,""+e)}}function Kr(i,t,e){if(e===null)i.removeAttribute(t);else{switch(typeof e){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(t);return}i.setAttribute(t,""+e)}}function Qe(i,t,e,n){if(n===null)i.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(e);return}i.setAttributeNS(t,e,""+n)}}function fe(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function vg(i){var t=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Pb(i){var t=vg(i)?"checked":"value",e=Object.getOwnPropertyDescriptor(i.constructor.prototype,t),n=""+i[t];if(!i.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var s=e.get,a=e.set;return Object.defineProperty(i,t,{configurable:!0,get:function(){return s.call(this)},set:function(r){n=""+r,a.call(this,r)}}),Object.defineProperty(i,t,{enumerable:e.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){i._valueTracker=null,delete i[t]}}}}function xl(i){i._valueTracker||(i._valueTracker=Pb(i))}function bg(i){if(!i)return!1;var t=i._valueTracker;if(!t)return!0;var e=t.getValue(),n="";return i&&(n=vg(i)?i.checked?"true":"false":i.value),i=n,i!==e?(t.setValue(i),!0):!1}function Tl(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Gb=/[\n"\\]/g;function me(i){return i.replace(Gb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Xu(i,t,e,n,s,a,r,l){i.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?i.type=r:i.removeAttribute("type"),t!=null?r==="number"?(t===0&&i.value===""||i.value!=t)&&(i.value=""+fe(t)):i.value!==""+fe(t)&&(i.value=""+fe(t)):r!=="submit"&&r!=="reset"||i.removeAttribute("value"),t!=null?Yu(i,r,fe(t)):e!=null?Yu(i,r,fe(e)):n!=null&&i.removeAttribute("value"),s==null&&a!=null&&(i.defaultChecked=!!a),s!=null&&(i.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?i.name=""+fe(l):i.removeAttribute("name")}function yg(i,t,e,n,s,a,r,l){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(i.type=a),t!=null||e!=null){if(!(a!=="submit"&&a!=="reset"||t!=null))return;e=e!=null?""+fe(e):"",t=t!=null?""+fe(t):e,l||t===i.value||(i.value=t),i.defaultValue=t}n=n??s,n=typeof n!="function"&&typeof n!="symbol"&&!!n,i.checked=l?i.checked:!!n,i.defaultChecked=!!n,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(i.name=r)}function Yu(i,t,e){t==="number"&&Tl(i.ownerDocument)===i||i.defaultValue===""+e||(i.defaultValue=""+e)}function Qn(i,t,e,n){if(i=i.options,t){t={};for(var s=0;s<e.length;s++)t["$"+e[s]]=!0;for(e=0;e<i.length;e++)s=t.hasOwnProperty("$"+i[e].value),i[e].selected!==s&&(i[e].selected=s),s&&n&&(i[e].defaultSelected=!0)}else{for(e=""+fe(e),t=null,s=0;s<i.length;s++){if(i[s].value===e){i[s].selected=!0,n&&(i[s].defaultSelected=!0);return}t!==null||i[s].disabled||(t=i[s])}t!==null&&(t.selected=!0)}}function Ag(i,t,e){if(t!=null&&(t=""+fe(t),t!==i.value&&(i.value=t),e==null)){i.defaultValue!==t&&(i.defaultValue=t);return}i.defaultValue=e!=null?""+fe(e):""}function _g(i,t,e,n){if(t==null){if(n!=null){if(e!=null)throw Error(E(92));if(ta(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),t=e}e=fe(t),i.defaultValue=e,n=i.textContent,n===e&&n!==""&&n!==null&&(i.value=n)}function ss(i,t){if(t){var e=i.firstChild;if(e&&e===i.lastChild&&e.nodeType===3){e.nodeValue=t;return}}i.textContent=t}var qb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gf(i,t,e){var n=t.indexOf("--")===0;e==null||typeof e=="boolean"||e===""?n?i.setProperty(t,""):t==="float"?i.cssFloat="":i[t]="":n?i.setProperty(t,e):typeof e!="number"||e===0||qb.has(t)?t==="float"?i.cssFloat=e:i[t]=(""+e).trim():i[t]=e+"px"}function Sg(i,t,e){if(t!=null&&typeof t!="object")throw Error(E(62));if(i=i.style,e!=null){for(var n in e)!e.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?i.setProperty(n,""):n==="float"?i.cssFloat="":i[n]="");for(var s in t)n=t[s],t.hasOwnProperty(s)&&e[s]!==n&&Gf(i,s,n)}else for(var a in t)t.hasOwnProperty(a)&&Gf(i,a,t[a])}function Ih(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ul(i){return Vb.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Ku=null;function Hh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Un=null,$n=null;function qf(i){var t=fs(i);if(t&&(i=t.stateNode)){var e=i[$t]||null;t:switch(i=t.stateNode,t.type){case"input":if(Xu(i,e.value,e.defaultValue,e.defaultValue,e.checked,e.defaultChecked,e.type,e.name),t=e.name,e.type==="radio"&&t!=null){for(e=i;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll('input[name="'+me(""+t)+'"][type="radio"]'),t=0;t<e.length;t++){var n=e[t];if(n!==i&&n.form===i.form){var s=n[$t]||null;if(!s)throw Error(E(90));Xu(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<e.length;t++)n=e[t],n.form===i.form&&bg(n)}break t;case"textarea":Ag(i,e.value,e.defaultValue);break t;case"select":t=e.value,t!=null&&Qn(i,!!e.multiple,t,!1)}}}var du=!1;function wg(i,t,e){if(du)return i(t,e);du=!0;try{var n=i(t);return n}finally{if(du=!1,(Un!==null||$n!==null)&&(ao(),Un&&(t=Un,i=$n,$n=Un=null,qf(t),i)))for(t=0;t<i.length;t++)qf(i[t])}}function Aa(i,t){var e=i.stateNode;if(e===null)return null;var n=e[$t]||null;if(n===null)return null;e=n[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(i=i.type,n=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!n;break t;default:i=!1}if(i)return null;if(e&&typeof e!="function")throw Error(E(231,t,typeof e));return e}var Qu=!1;if(oi)try{Ln={},Object.defineProperty(Ln,"passive",{get:function(){Qu=!0}}),window.addEventListener("test",Ln,Ln),window.removeEventListener("test",Ln,Ln)}catch{Qu=!1}var Ln,Mi=null,zh=null,hl=null;function Eg(){if(hl)return hl;var i,t=zh,e=t.length,n,s="value"in Mi?Mi.value:Mi.textContent,a=s.length;for(i=0;i<e&&t[i]===s[i];i++);var r=e-i;for(n=1;n<=r&&t[e-n]===s[a-n];n++);return hl=s.slice(i,1<n?1-n:void 0)}function dl(i){var t=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&t===13&&(i=13)):i=t,i===10&&(i=13),32<=i||i===13?i:0}function Qr(){return!0}function jf(){return!1}function Wt(i){function t(e,n,s,a,r){this._reactName=e,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=r,this.currentTarget=null;for(var l in i)i.hasOwnProperty(l)&&(e=i[l],this[l]=e?e(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Qr:jf,this.isPropagationStopped=jf,this}return nt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=Qr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=Qr)},persist:function(){},isPersistent:Qr}),t}var vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$l=Wt(vn),Ha=nt({},vn,{view:0,detail:0}),Xb=Wt(Ha),fu,pu,Vs,Wl=nt({},Ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Vs&&(Vs&&i.type==="mousemove"?(fu=i.screenX-Vs.screenX,pu=i.screenY-Vs.screenY):pu=fu=0,Vs=i),fu)},movementY:function(i){return"movementY"in i?i.movementY:pu}}),Vf=Wt(Wl),Yb=nt({},Wl,{dataTransfer:0}),Kb=Wt(Yb),Qb=nt({},Ha,{relatedTarget:0}),gu=Wt(Qb),$b=nt({},vn,{animationName:0,elapsedTime:0,pseudoElement:0}),Wb=Wt($b),Zb=nt({},vn,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Jb=Wt(Zb),ty=nt({},vn,{data:0}),Xf=Wt(ty),ey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ny={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sy(i){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(i):(i=ny[i])?!!t[i]:!1}function Bh(){return sy}var ay=nt({},Ha,{key:function(i){if(i.key){var t=ey[i.key]||i.key;if(t!=="Unidentified")return t}return i.type==="keypress"?(i=dl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?iy[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bh,charCode:function(i){return i.type==="keypress"?dl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?dl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ry=Wt(ay),ly=nt({},Wl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yf=Wt(ly),oy=nt({},Ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bh}),cy=Wt(oy),uy=nt({},vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),hy=Wt(uy),dy=nt({},Wl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),fy=Wt(dy),py=nt({},vn,{newState:0,oldState:0}),gy=Wt(py),my=[9,13,27,32],Uh=oi&&"CompositionEvent"in window,na=null;oi&&"documentMode"in document&&(na=document.documentMode);var vy=oi&&"TextEvent"in window&&!na,xg=oi&&(!Uh||na&&8<na&&11>=na),Kf=" ",Qf=!1;function Tg(i,t){switch(i){case"keyup":return my.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Fn=!1;function by(i,t){switch(i){case"compositionend":return Cg(t);case"keypress":return t.which!==32?null:(Qf=!0,Kf);case"textInput":return i=t.data,i===Kf&&Qf?null:i;default:return null}}function yy(i,t){if(Fn)return i==="compositionend"||!Uh&&Tg(i,t)?(i=Eg(),hl=zh=Mi=null,Fn=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xg&&t.locale!=="ko"?null:t.data;default:return null}}var Ay={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $f(i){var t=i&&i.nodeName&&i.nodeName.toLowerCase();return t==="input"?!!Ay[i.type]:t==="textarea"}function Rg(i,t,e,n){Un?$n?$n.push(n):$n=[n]:Un=n,t=Gl(t,"onChange"),0<t.length&&(e=new $l("onChange","change",null,e,n),i.push({event:e,listeners:t}))}var sa=null,_a=null;function _y(i){p0(i,0)}function Zl(i){var t=ea(i);if(bg(t))return i}function Wf(i,t){if(i==="change")return t}var Mg=!1;oi&&(oi?(Wr="oninput"in document,Wr||(mu=document.createElement("div"),mu.setAttribute("oninput","return;"),Wr=typeof mu.oninput=="function"),$r=Wr):$r=!1,Mg=$r&&(!document.documentMode||9<document.documentMode));var $r,Wr,mu;function Zf(){sa&&(sa.detachEvent("onpropertychange",Dg),_a=sa=null)}function Dg(i){if(i.propertyName==="value"&&Zl(_a)){var t=[];Rg(t,_a,i,Hh(i)),wg(_y,t)}}function Sy(i,t,e){i==="focusin"?(Zf(),sa=t,_a=e,sa.attachEvent("onpropertychange",Dg)):i==="focusout"&&Zf()}function wy(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Zl(_a)}function Ey(i,t){if(i==="click")return Zl(t)}function xy(i,t){if(i==="input"||i==="change")return Zl(t)}function Ty(i,t){return i===t&&(i!==0||1/i===1/t)||i!==i&&t!==t}var ae=typeof Object.is=="function"?Object.is:Ty;function Sa(i,t){if(ae(i,t))return!0;if(typeof i!="object"||i===null||typeof t!="object"||t===null)return!1;var e=Object.keys(i),n=Object.keys(t);if(e.length!==n.length)return!1;for(n=0;n<e.length;n++){var s=e[n];if(!ju.call(t,s)||!ae(i[s],t[s]))return!1}return!0}function Jf(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function tp(i,t){var e=Jf(i);i=0;for(var n;e;){if(e.nodeType===3){if(n=i+e.textContent.length,i<=t&&n>=t)return{node:e,offset:t-i};i=n}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=Jf(e)}}function Lg(i,t){return i&&t?i===t?!0:i&&i.nodeType===3?!1:t&&t.nodeType===3?Lg(i,t.parentNode):"contains"in i?i.contains(t):i.compareDocumentPosition?!!(i.compareDocumentPosition(t)&16):!1:!1}function Og(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var t=Tl(i.document);t instanceof i.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)i=t.contentWindow;else break;t=Tl(i.document)}return t}function Fh(i){var t=i&&i.nodeName&&i.nodeName.toLowerCase();return t&&(t==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||t==="textarea"||i.contentEditable==="true")}function Cy(i,t){var e=Og(t);t=i.focusedElem;var n=i.selectionRange;if(e!==t&&t&&t.ownerDocument&&Lg(t.ownerDocument.documentElement,t)){if(n!==null&&Fh(t)){if(i=n.start,e=n.end,e===void 0&&(e=i),"selectionStart"in t)t.selectionStart=i,t.selectionEnd=Math.min(e,t.value.length);else if(e=(i=t.ownerDocument||document)&&i.defaultView||window,e.getSelection){e=e.getSelection();var s=t.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=tp(t,a);var r=tp(t,n);s&&r&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==r.node||e.focusOffset!==r.offset)&&(i=i.createRange(),i.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(i),e.extend(r.node,r.offset)):(i.setEnd(r.node,r.offset),e.addRange(i)))}}for(i=[],e=t;e=e.parentNode;)e.nodeType===1&&i.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<i.length;t++)e=i[t],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ry=oi&&"documentMode"in document&&11>=document.documentMode,Pn=null,$u=null,aa=null,Wu=!1;function ep(i,t,e){var n=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Wu||Pn==null||Pn!==Tl(n)||(n=Pn,"selectionStart"in n&&Fh(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),aa&&Sa(aa,n)||(aa=n,n=Gl($u,"onSelect"),0<n.length&&(t=new $l("onSelect","select",null,t,e),i.push({event:t,listeners:n}),t.target=Pn)))}function Zi(i,t){var e={};return e[i.toLowerCase()]=t.toLowerCase(),e["Webkit"+i]="webkit"+t,e["Moz"+i]="moz"+t,e}var Gn={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},vu={},Ng={};oi&&(Ng=document.createElement("div").style,"AnimationEvent"in window||(delete Gn.animationend.animation,delete Gn.animationiteration.animation,delete Gn.animationstart.animation),"TransitionEvent"in window||delete Gn.transitionend.transition);function bn(i){if(vu[i])return vu[i];if(!Gn[i])return i;var t=Gn[i],e;for(e in t)if(t.hasOwnProperty(e)&&e in Ng)return vu[i]=t[e];return i}var kg=bn("animationend"),Ig=bn("animationiteration"),Hg=bn("animationstart"),My=bn("transitionrun"),Dy=bn("transitionstart"),Ly=bn("transitioncancel"),zg=bn("transitionend"),Bg=new Map,ip="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function De(i,t){Bg.set(i,t),mn(t,[i])}var de=[],qn=0,Ph=0;function Jl(){for(var i=qn,t=Ph=qn=0;t<i;){var e=de[t];de[t++]=null;var n=de[t];de[t++]=null;var s=de[t];de[t++]=null;var a=de[t];if(de[t++]=null,n!==null&&s!==null){var r=n.pending;r===null?s.next=s:(s.next=r.next,r.next=s),n.pending=s}a!==0&&Ug(e,s,a)}}function to(i,t,e,n){de[qn++]=i,de[qn++]=t,de[qn++]=e,de[qn++]=n,Ph|=n,i.lanes|=n,i=i.alternate,i!==null&&(i.lanes|=n)}function Gh(i,t,e,n){return to(i,t,e,n),Cl(i)}function Bi(i,t){return to(i,null,null,t),Cl(i)}function Ug(i,t,e){i.lanes|=e;var n=i.alternate;n!==null&&(n.lanes|=e);for(var s=!1,a=i.return;a!==null;)a.childLanes|=e,n=a.alternate,n!==null&&(n.childLanes|=e),a.tag===22&&(i=a.stateNode,i===null||i._visibility&1||(s=!0)),i=a,a=a.return;s&&t!==null&&i.tag===3&&(a=i.stateNode,s=31-ne(e),a=a.hiddenUpdates,i=a[s],i===null?a[s]=[t]:i.push(t),t.lane=e|536870912)}function Cl(i){if(50<va)throw va=0,yh=null,Error(E(185));for(var t=i.return;t!==null;)i=t,t=i.return;return i.tag===3?i.stateNode:null}var jn={},np=new WeakMap;function ve(i,t){if(typeof i=="object"&&i!==null){var e=np.get(i);return e!==void 0?e:(t={value:i,source:t,stack:zf(t)},np.set(i,t),t)}return{value:i,source:t,stack:zf(t)}}var Vn=[],Xn=0,Rl=null,Ml=0,pe=[],ge=0,rn=null,ni=1,si="";function tn(i,t){Vn[Xn++]=Ml,Vn[Xn++]=Rl,Rl=i,Ml=t}function Fg(i,t,e){pe[ge++]=ni,pe[ge++]=si,pe[ge++]=rn,rn=i;var n=ni;i=si;var s=32-ne(n)-1;n&=~(1<<s),e+=1;var a=32-ne(t)+s;if(30<a){var r=s-s%5;a=(n&(1<<r)-1).toString(32),n>>=r,s-=r,ni=1<<32-ne(t)+s|e<<s|n,si=a+i}else ni=1<<a|e<<s|n,si=i}function qh(i){i.return!==null&&(tn(i,1),Fg(i,1,0))}function jh(i){for(;i===Rl;)Rl=Vn[--Xn],Vn[Xn]=null,Ml=Vn[--Xn],Vn[Xn]=null;for(;i===rn;)rn=pe[--ge],pe[ge]=null,si=pe[--ge],pe[ge]=null,ni=pe[--ge],pe[ge]=null}var jt=null,Ot=null,j=!1,Re=null,ze=!1,Zu=Error(E(519));function hn(i){var t=Error(E(418,""));throw wa(ve(t,i)),Zu}function sp(i){var t=i.stateNode,e=i.type,n=i.memoizedProps;switch(t[Bt]=i,t[$t]=n,e){case"dialog":G("cancel",t),G("close",t);break;case"iframe":case"object":case"embed":G("load",t);break;case"video":case"audio":for(e=0;e<Ta.length;e++)G(Ta[e],t);break;case"source":G("error",t);break;case"img":case"image":case"link":G("error",t),G("load",t);break;case"details":G("toggle",t);break;case"input":G("invalid",t),yg(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),xl(t);break;case"select":G("invalid",t);break;case"textarea":G("invalid",t),_g(t,n.value,n.defaultValue,n.children),xl(t)}e=n.children,typeof e!="string"&&typeof e!="number"&&typeof e!="bigint"||t.textContent===""+e||n.suppressHydrationWarning===!0||m0(t.textContent,e)?(n.popover!=null&&(G("beforetoggle",t),G("toggle",t)),n.onScroll!=null&&G("scroll",t),n.onScrollEnd!=null&&G("scrollend",t),n.onClick!=null&&(t.onclick=lo),t=!0):t=!1,t||hn(i)}function ap(i){for(jt=i.return;jt;)switch(jt.tag){case 3:case 27:ze=!0;return;case 5:case 13:ze=!1;return;default:jt=jt.return}}function Xs(i){if(i!==jt)return!1;if(!j)return ap(i),j=!0,!1;var t=!1,e;if((e=i.tag!==3&&i.tag!==27)&&((e=i.tag===5)&&(e=i.type,e=!(e!=="form"&&e!=="button")||Th(i.type,i.memoizedProps)),e=!e),e&&(t=!0),t&&Ot&&hn(i),ap(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(E(317));t:{for(i=i.nextSibling,t=0;i;){if(i.nodeType===8)if(e=i.data,e==="/$"){if(t===0){Ot=Me(i.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++;i=i.nextSibling}Ot=null}}else Ot=jt?Me(i.stateNode.nextSibling):null;return!0}function za(){Ot=jt=null,j=!1}function wa(i){Re===null?Re=[i]:Re.push(i)}var ra=Error(E(460)),Pg=Error(E(474)),Ju={then:function(){}};function rp(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Zr(){}function Gg(i,t,e){switch(e=i[e],e===void 0?i.push(t):e!==t&&(t.then(Zr,Zr),t=e),t.status){case"fulfilled":return t.value;case"rejected":throw i=t.reason,i===ra?Error(E(483)):i;default:if(typeof t.status=="string")t.then(Zr,Zr);else{if(i=et,i!==null&&100<i.shellSuspendCounter)throw Error(E(482));i=t,i.status="pending",i.then(function(n){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=n}},function(n){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw i=t.reason,i===ra?Error(E(483)):i}throw la=t,ra}}var la=null;function lp(){if(la===null)throw Error(E(459));var i=la;return la=null,i}var Wn=null,Ea=0;function Jr(i){var t=Ea;return Ea+=1,Wn===null&&(Wn=[]),Gg(Wn,i,t)}function Ys(i,t){t=t.props.ref,i.ref=t!==void 0?t:null}function tl(i,t){throw t.$$typeof===bb?Error(E(525)):(i=Object.prototype.toString.call(t),Error(E(31,i==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":i)))}function op(i){var t=i._init;return t(i._payload)}function qg(i){function t(p,m){if(i){var b=p.deletions;b===null?(p.deletions=[m],p.flags|=16):b.push(m)}}function e(p,m){if(!i)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function n(p){for(var m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(p,m){return p=Ni(p,m),p.index=0,p.sibling=null,p}function a(p,m,b){return p.index=b,i?(b=p.alternate,b!==null?(b=b.index,b<m?(p.flags|=33554434,m):b):(p.flags|=33554434,m)):(p.flags|=1048576,m)}function r(p){return i&&p.alternate===null&&(p.flags|=33554434),p}function l(p,m,b,y){return m===null||m.tag!==6?(m=Mu(b,p.mode,y),m.return=p,m):(m=s(m,b),m.return=p,m)}function o(p,m,b,y){var _=b.type;return _===zn?u(p,m,b.props.children,y,b.key):m!==null&&(m.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Si&&op(_)===m.type)?(m=s(m,b.props),Ys(m,b),m.return=p,m):(m=vl(b.type,b.key,b.props,null,p.mode,y),Ys(m,b),m.return=p,m)}function c(p,m,b,y){return m===null||m.tag!==4||m.stateNode.containerInfo!==b.containerInfo||m.stateNode.implementation!==b.implementation?(m=Du(b,p.mode,y),m.return=p,m):(m=s(m,b.children||[]),m.return=p,m)}function u(p,m,b,y,_){return m===null||m.tag!==7?(m=on(b,p.mode,y,_),m.return=p,m):(m=s(m,b),m.return=p,m)}function h(p,m,b){if(typeof m=="string"&&m!==""||typeof m=="number"||typeof m=="bigint")return m=Mu(""+m,p.mode,b),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Vr:return b=vl(m.type,m.key,m.props,null,p.mode,b),Ys(b,m),b.return=p,b;case Zs:return m=Du(m,p.mode,b),m.return=p,m;case Si:var y=m._init;return m=y(m._payload),h(p,m,b)}if(ta(m)||js(m))return m=on(m,p.mode,b,null),m.return=p,m;if(typeof m.then=="function")return h(p,Jr(m),b);if(m.$$typeof===ii)return h(p,el(p,m),b);tl(p,m)}return null}function d(p,m,b,y){var _=m!==null?m.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return _!==null?null:l(p,m,""+b,y);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Vr:return b.key===_?o(p,m,b,y):null;case Zs:return b.key===_?c(p,m,b,y):null;case Si:return _=b._init,b=_(b._payload),d(p,m,b,y)}if(ta(b)||js(b))return _!==null?null:u(p,m,b,y,null);if(typeof b.then=="function")return d(p,m,Jr(b),y);if(b.$$typeof===ii)return d(p,m,el(p,b),y);tl(p,b)}return null}function f(p,m,b,y,_){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return p=p.get(b)||null,l(m,p,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Vr:return p=p.get(y.key===null?b:y.key)||null,o(m,p,y,_);case Zs:return p=p.get(y.key===null?b:y.key)||null,c(m,p,y,_);case Si:var w=y._init;return y=w(y._payload),f(p,m,b,y,_)}if(ta(y)||js(y))return p=p.get(b)||null,u(m,p,y,_,null);if(typeof y.then=="function")return f(p,m,b,Jr(y),_);if(y.$$typeof===ii)return f(p,m,b,el(m,y),_);tl(m,y)}return null}function g(p,m,b,y){for(var _=null,w=null,S=m,x=m=0,T=null;S!==null&&x<b.length;x++){S.index>x?(T=S,S=null):T=S.sibling;var R=d(p,S,b[x],y);if(R===null){S===null&&(S=T);break}i&&S&&R.alternate===null&&t(p,S),m=a(R,m,x),w===null?_=R:w.sibling=R,w=R,S=T}if(x===b.length)return e(p,S),j&&tn(p,x),_;if(S===null){for(;x<b.length;x++)S=h(p,b[x],y),S!==null&&(m=a(S,m,x),w===null?_=S:w.sibling=S,w=S);return j&&tn(p,x),_}for(S=n(S);x<b.length;x++)T=f(S,p,x,b[x],y),T!==null&&(i&&T.alternate!==null&&S.delete(T.key===null?x:T.key),m=a(T,m,x),w===null?_=T:w.sibling=T,w=T);return i&&S.forEach(function(L){return t(p,L)}),j&&tn(p,x),_}function v(p,m,b,y){if(b==null)throw Error(E(151));for(var _=null,w=null,S=m,x=m=0,T=null,R=b.next();S!==null&&!R.done;x++,R=b.next()){S.index>x?(T=S,S=null):T=S.sibling;var L=d(p,S,R.value,y);if(L===null){S===null&&(S=T);break}i&&S&&L.alternate===null&&t(p,S),m=a(L,m,x),w===null?_=L:w.sibling=L,w=L,S=T}if(R.done)return e(p,S),j&&tn(p,x),_;if(S===null){for(;!R.done;x++,R=b.next())R=h(p,R.value,y),R!==null&&(m=a(R,m,x),w===null?_=R:w.sibling=R,w=R);return j&&tn(p,x),_}for(S=n(S);!R.done;x++,R=b.next())R=f(S,p,x,R.value,y),R!==null&&(i&&R.alternate!==null&&S.delete(R.key===null?x:R.key),m=a(R,m,x),w===null?_=R:w.sibling=R,w=R);return i&&S.forEach(function(V){return t(p,V)}),j&&tn(p,x),_}function A(p,m,b,y){if(typeof b=="object"&&b!==null&&b.type===zn&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Vr:t:{for(var _=b.key;m!==null;){if(m.key===_){if(_=b.type,_===zn){if(m.tag===7){e(p,m.sibling),y=s(m,b.props.children),y.return=p,p=y;break t}}else if(m.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Si&&op(_)===m.type){e(p,m.sibling),y=s(m,b.props),Ys(y,b),y.return=p,p=y;break t}e(p,m);break}else t(p,m);m=m.sibling}b.type===zn?(y=on(b.props.children,p.mode,y,b.key),y.return=p,p=y):(y=vl(b.type,b.key,b.props,null,p.mode,y),Ys(y,b),y.return=p,p=y)}return r(p);case Zs:t:{for(_=b.key;m!==null;){if(m.key===_)if(m.tag===4&&m.stateNode.containerInfo===b.containerInfo&&m.stateNode.implementation===b.implementation){e(p,m.sibling),y=s(m,b.children||[]),y.return=p,p=y;break t}else{e(p,m);break}else t(p,m);m=m.sibling}y=Du(b,p.mode,y),y.return=p,p=y}return r(p);case Si:return _=b._init,b=_(b._payload),A(p,m,b,y)}if(ta(b))return g(p,m,b,y);if(js(b)){if(_=js(b),typeof _!="function")throw Error(E(150));return b=_.call(b),v(p,m,b,y)}if(typeof b.then=="function")return A(p,m,Jr(b),y);if(b.$$typeof===ii)return A(p,m,el(p,b),y);tl(p,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,m!==null&&m.tag===6?(e(p,m.sibling),y=s(m,b),y.return=p,p=y):(e(p,m),y=Mu(b,p.mode,y),y.return=p,p=y),r(p)):e(p,m)}return function(p,m,b,y){try{Ea=0;var _=A(p,m,b,y);return Wn=null,_}catch(S){if(S===ra)throw S;var w=be(29,S,null,p.mode);return w.lanes=y,w.return=p,w}finally{}}}var dn=qg(!0),jg=qg(!1),as=qe(null),Dl=qe(0);function cp(i,t){i=hi,rt(Dl,i),rt(as,t),hi=i|t.baseLanes}function th(){rt(Dl,hi),rt(as,as.current)}function Vh(){hi=Dl.current,Mt(as),Mt(Dl)}var Ae=qe(null),Pe=null;function Ei(i){var t=i.alternate;rt(Et,Et.current&1),rt(Ae,i),Pe===null&&(t===null||as.current!==null||t.memoizedState!==null)&&(Pe=i)}function Vg(i){if(i.tag===22){if(rt(Et,Et.current),rt(Ae,i),Pe===null){var t=i.alternate;t!==null&&t.memoizedState!==null&&(Pe=i)}}else xi(i)}function xi(){rt(Et,Et.current),rt(Ae,Ae.current)}function ai(i){Mt(Ae),Pe===i&&(Pe=null),Mt(Et)}var Et=qe(0);function Ll(i){for(var t=i;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break;for(;t.sibling===null;){if(t.return===null||t.return===i)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Oy=typeof AbortController<"u"?AbortController:function(){var i=[],t=this.signal={aborted:!1,addEventListener:function(e,n){i.push(n)}};this.abort=function(){t.aborted=!0,i.forEach(function(e){return e()})}},Ny=xt.unstable_scheduleCallback,ky=xt.unstable_NormalPriority,wt={$$typeof:ii,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xh(){return{controller:new Oy,data:new Map,refCount:0}}function Ba(i){i.refCount--,i.refCount===0&&Ny(ky,function(){i.controller.abort()})}var oa=null,eh=0,rs=0,Zn=null;function Iy(i,t){if(oa===null){var e=oa=[];eh=0,rs=gd(),Zn={status:"pending",value:void 0,then:function(n){e.push(n)}}}return eh++,t.then(up,up),t}function up(){if(--eh===0&&oa!==null){Zn!==null&&(Zn.status="fulfilled");var i=oa;oa=null,rs=0,Zn=null;for(var t=0;t<i.length;t++)(0,i[t])()}}function Hy(i,t){var e=[],n={status:"pending",value:null,reason:null,then:function(s){e.push(s)}};return i.then(function(){n.status="fulfilled",n.value=t;for(var s=0;s<e.length;s++)(0,e[s])(t)},function(s){for(n.status="rejected",n.reason=s,s=0;s<e.length;s++)(0,e[s])(void 0)}),n}var hp=k.S;k.S=function(i,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Iy(i,t),hp!==null&&hp(i,t)};var ln=qe(null);function Yh(){var i=ln.current;return i!==null?i:et.pooledCache}function fl(i,t){t===null?rt(ln,ln.current):rt(ln,t.pool)}function Xg(){var i=Yh();return i===null?null:{parent:wt._currentValue,pool:i}}var Ui=0,B=null,$=null,bt=null,Ol=!1,Jn=!1,fn=!1,Nl=0,xa=0,ts=null,zy=0;function pt(){throw Error(E(321))}function Kh(i,t){if(t===null)return!1;for(var e=0;e<t.length&&e<i.length;e++)if(!ae(i[e],t[e]))return!1;return!0}function Qh(i,t,e,n,s,a){return Ui=a,B=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,k.H=i===null||i.memoizedState===null?yn:qi,fn=!1,a=e(n,s),fn=!1,Jn&&(a=Kg(t,e,n,s)),Yg(i),a}function Yg(i){k.H=Ge;var t=$!==null&&$.next!==null;if(Ui=0,bt=$=B=null,Ol=!1,xa=0,ts=null,t)throw Error(E(300));i===null||Rt||(i=i.dependencies,i!==null&&Hl(i)&&(Rt=!0))}function Kg(i,t,e,n){B=i;var s=0;do{if(Jn&&(ts=null),xa=0,Jn=!1,25<=s)throw Error(E(301));if(s+=1,bt=$=null,i.updateQueue!=null){var a=i.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}k.H=An,a=t(e,n)}while(Jn);return a}function By(){var i=k.H,t=i.useState()[0];return t=typeof t.then=="function"?Ua(t):t,i=i.useState()[0],($!==null?$.memoizedState:null)!==i&&(B.flags|=1024),t}function $h(){var i=Nl!==0;return Nl=0,i}function Wh(i,t,e){t.updateQueue=i.updateQueue,t.flags&=-2053,i.lanes&=~e}function Zh(i){if(Ol){for(i=i.memoizedState;i!==null;){var t=i.queue;t!==null&&(t.pending=null),i=i.next}Ol=!1}Ui=0,bt=$=B=null,Jn=!1,xa=Nl=0,ts=null}function Qt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?B.memoizedState=bt=i:bt=bt.next=i,bt}function yt(){if($===null){var i=B.alternate;i=i!==null?i.memoizedState:null}else i=$.next;var t=bt===null?B.memoizedState:bt.next;if(t!==null)bt=t,$=i;else{if(i===null)throw B.alternate===null?Error(E(467)):Error(E(310));$=i,i={memoizedState:$.memoizedState,baseState:$.baseState,baseQueue:$.baseQueue,queue:$.queue,next:null},bt===null?B.memoizedState=bt=i:bt=bt.next=i}return bt}var eo;eo=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Ua(i){var t=xa;return xa+=1,ts===null&&(ts=[]),i=Gg(ts,i,t),t=B,(bt===null?t.memoizedState:bt.next)===null&&(t=t.alternate,k.H=t===null||t.memoizedState===null?yn:qi),i}function io(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ua(i);if(i.$$typeof===ii)return Ut(i)}throw Error(E(438,String(i)))}function Jh(i){var t=null,e=B.updateQueue;if(e!==null&&(t=e.memoCache),t==null){var n=B.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),e===null&&(e=eo(),B.updateQueue=e),e.memoCache=t,e=t.data[t.index],e===void 0)for(e=t.data[t.index]=Array(i),n=0;n<i;n++)e[n]=Ab;return t.index++,e}function ci(i,t){return typeof t=="function"?t(i):t}function pl(i){var t=yt();return td(t,$,i)}function td(i,t,e){var n=i.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=e;var s=i.baseQueue,a=n.pending;if(a!==null){if(s!==null){var r=s.next;s.next=a.next,a.next=r}t.baseQueue=s=a,n.pending=null}if(a=i.baseState,s===null)i.memoizedState=a;else{t=s.next;var l=r=null,o=null,c=t,u=!1;do{var h=c.lane&-536870913;if(h!==c.lane?(q&h)===h:(Ui&h)===h){var d=c.revertLane;if(d===0)o!==null&&(o=o.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===rs&&(u=!0);else if((Ui&d)===d){c=c.next,d===rs&&(u=!0);continue}else h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},o===null?(l=o=h,r=a):o=o.next=h,B.lanes|=d,Pi|=d;h=c.action,fn&&e(a,h),a=c.hasEagerState?c.eagerState:e(a,h)}else d={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},o===null?(l=o=d,r=a):o=o.next=d,B.lanes|=h,Pi|=h;c=c.next}while(c!==null&&c!==t);if(o===null?r=a:o.next=l,!ae(a,i.memoizedState)&&(Rt=!0,u&&(e=Zn,e!==null)))throw e;i.memoizedState=a,i.baseState=r,i.baseQueue=o,n.lastRenderedState=a}return s===null&&(n.lanes=0),[i.memoizedState,n.dispatch]}function bu(i){var t=yt(),e=t.queue;if(e===null)throw Error(E(311));e.lastRenderedReducer=i;var n=e.dispatch,s=e.pending,a=t.memoizedState;if(s!==null){e.pending=null;var r=s=s.next;do a=i(a,r.action),r=r.next;while(r!==s);ae(a,t.memoizedState)||(Rt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),e.lastRenderedState=a}return[a,n]}function Qg(i,t,e){var n=B,s=yt(),a=j;if(a){if(e===void 0)throw Error(E(407));e=e()}else e=t();var r=!ae(($||s).memoizedState,e);if(r&&(s.memoizedState=e,Rt=!0),s=s.queue,ed(Zg.bind(null,n,s,i),[i]),s.getSnapshot!==t||r||bt!==null&&bt.memoizedState.tag&1){if(n.flags|=2048,ls(9,Wg.bind(null,n,s,e,t),{destroy:void 0},null),et===null)throw Error(E(349));a||Ui&60||$g(n,t,e)}return e}function $g(i,t,e){i.flags|=16384,i={getSnapshot:t,value:e},t=B.updateQueue,t===null?(t=eo(),B.updateQueue=t,t.stores=[i]):(e=t.stores,e===null?t.stores=[i]:e.push(i))}function Wg(i,t,e,n){t.value=e,t.getSnapshot=n,Jg(t)&&tm(i)}function Zg(i,t,e){return e(function(){Jg(t)&&tm(i)})}function Jg(i){var t=i.getSnapshot;i=i.value;try{var e=t();return!ae(i,e)}catch{return!0}}function tm(i){var t=Bi(i,2);t!==null&&Vt(t,i,2)}function ih(i){var t=Qt();if(typeof i=="function"){var e=i;if(i=e(),fn){Ri(!0);try{e()}finally{Ri(!1)}}}return t.memoizedState=t.baseState=i,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:i},t}function em(i,t,e,n){return i.baseState=e,td(i,$,typeof n=="function"?n:ci)}function Uy(i,t,e,n,s){if(so(i))throw Error(E(485));if(i=t.action,i!==null){var a={payload:s,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){a.listeners.push(r)}};k.T!==null?e(!0):a.isTransition=!1,n(a),e=t.pending,e===null?(a.next=t.pending=a,im(t,a)):(a.next=e.next,t.pending=e.next=a)}}function im(i,t){var e=t.action,n=t.payload,s=i.state;if(t.isTransition){var a=k.T,r={};k.T=r;try{var l=e(s,n),o=k.S;o!==null&&o(r,l),dp(i,t,l)}catch(c){nh(i,t,c)}finally{k.T=a}}else try{a=e(s,n),dp(i,t,a)}catch(c){nh(i,t,c)}}function dp(i,t,e){e!==null&&typeof e=="object"&&typeof e.then=="function"?e.then(function(n){fp(i,t,n)},function(n){return nh(i,t,n)}):fp(i,t,e)}function fp(i,t,e){t.status="fulfilled",t.value=e,nm(t),i.state=e,t=i.pending,t!==null&&(e=t.next,e===t?i.pending=null:(e=e.next,t.next=e,im(i,e)))}function nh(i,t,e){var n=i.pending;if(i.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=e,nm(t),t=t.next;while(t!==n)}i.action=null}function nm(i){i=i.listeners;for(var t=0;t<i.length;t++)(0,i[t])()}function sm(i,t){return t}function am(i,t){if(j){var e=et.formState;if(e!==null){t:{var n=B;if(j){if(Ot){e:{for(var s=Ot,a=ze;s.nodeType!==8;){if(!a){s=null;break e}if(s=Me(s.nextSibling),s===null){s=null;break e}}a=s.data,s=a==="F!"||a==="F"?s:null}if(s){Ot=Me(s.nextSibling),n=s.data==="F!";break t}}hn(n)}n=!1}n&&(t=e[0])}}return e=Qt(),e.memoizedState=e.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sm,lastRenderedState:t},e.queue=n,e=Sm.bind(null,B,n),n.dispatch=e,n=ih(!1),a=ad.bind(null,B,!1,n.queue),n=Qt(),s={state:t,dispatch:null,action:i,pending:null},n.queue=s,e=Uy.bind(null,B,s,a,e),s.dispatch=e,n.memoizedState=i,[t,e,!1]}function rm(i){var t=yt();return lm(t,$,i)}function lm(i,t,e){t=td(i,t,sm)[0],i=pl(ci)[0],t=typeof t=="object"&&t!==null&&typeof t.then=="function"?Ua(t):t;var n=yt(),s=n.queue,a=s.dispatch;return e!==n.memoizedState&&(B.flags|=2048,ls(9,Fy.bind(null,s,e),{destroy:void 0},null)),[t,a,i]}function Fy(i,t){i.action=t}function om(i){var t=yt(),e=$;if(e!==null)return lm(t,e,i);yt(),t=t.memoizedState,e=yt();var n=e.queue.dispatch;return e.memoizedState=i,[t,n,!1]}function ls(i,t,e,n){return i={tag:i,create:t,inst:e,deps:n,next:null},t=B.updateQueue,t===null&&(t=eo(),B.updateQueue=t),e=t.lastEffect,e===null?t.lastEffect=i.next=i:(n=e.next,e.next=i,i.next=n,t.lastEffect=i),i}function cm(){return yt().memoizedState}function gl(i,t,e,n){var s=Qt();B.flags|=i,s.memoizedState=ls(1|t,e,{destroy:void 0},n===void 0?null:n)}function no(i,t,e,n){var s=yt();n=n===void 0?null:n;var a=s.memoizedState.inst;$!==null&&n!==null&&Kh(n,$.memoizedState.deps)?s.memoizedState=ls(t,e,a,n):(B.flags|=i,s.memoizedState=ls(1|t,e,a,n))}function pp(i,t){gl(8390656,8,i,t)}function ed(i,t){no(2048,8,i,t)}function um(i,t){return no(4,2,i,t)}function hm(i,t){return no(4,4,i,t)}function dm(i,t){if(typeof t=="function"){i=i();var e=t(i);return function(){typeof e=="function"?e():t(null)}}if(t!=null)return i=i(),t.current=i,function(){t.current=null}}function fm(i,t,e){e=e!=null?e.concat([i]):null,no(4,4,dm.bind(null,t,i),e)}function id(){}function pm(i,t){var e=yt();t=t===void 0?null:t;var n=e.memoizedState;return t!==null&&Kh(t,n[1])?n[0]:(e.memoizedState=[i,t],i)}function gm(i,t){var e=yt();t=t===void 0?null:t;var n=e.memoizedState;if(t!==null&&Kh(t,n[1]))return n[0];if(n=i(),fn){Ri(!0);try{i()}finally{Ri(!1)}}return e.memoizedState=[n,t],n}function nd(i,t,e){return e===void 0||Ui&1073741824?i.memoizedState=t:(i.memoizedState=e,i=n0(),B.lanes|=i,Pi|=i,e)}function mm(i,t,e,n){return ae(e,t)?e:as.current!==null?(i=nd(i,e,n),ae(i,t)||(Rt=!0),i):Ui&42?(i=n0(),B.lanes|=i,Pi|=i,t):(Rt=!0,i.memoizedState=e)}function vm(i,t,e,n,s){var a=it.p;it.p=a!==0&&8>a?a:8;var r=k.T,l={};k.T=l,ad(i,!1,t,e);try{var o=s(),c=k.S;if(c!==null&&c(l,o),o!==null&&typeof o=="object"&&typeof o.then=="function"){var u=Hy(o,n);ca(i,t,u,se(i))}else ca(i,t,n,se(i))}catch(h){ca(i,t,{then:function(){},status:"rejected",reason:h},se())}finally{it.p=a,k.T=r}}function Py(){}function sh(i,t,e,n){if(i.tag!==5)throw Error(E(476));var s=bm(i).queue;vm(i,s,t,an,e===null?Py:function(){return ym(i),e(n)})}function bm(i){var t=i.memoizedState;if(t!==null)return t;t={memoizedState:an,baseState:an,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:an},next:null};var e={};return t.next={memoizedState:e,baseState:e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:e},next:null},i.memoizedState=t,i=i.alternate,i!==null&&(i.memoizedState=t),t}function ym(i){var t=bm(i).next.queue;ca(i,t,{},se())}function sd(){return Ut(Ma)}function Am(){return yt().memoizedState}function _m(){return yt().memoizedState}function Gy(i){for(var t=i.return;t!==null;){switch(t.tag){case 24:case 3:var e=se();i=Li(e);var n=Oi(t,i,e);n!==null&&(Vt(n,t,e),ha(n,t,e)),t={cache:Xh()},i.payload=t;return}t=t.return}}function qy(i,t,e){var n=se();e={lane:n,revertLane:0,action:e,hasEagerState:!1,eagerState:null,next:null},so(i)?wm(t,e):(e=Gh(i,t,e,n),e!==null&&(Vt(e,i,n),Em(e,t,n)))}function Sm(i,t,e){var n=se();ca(i,t,e,n)}function ca(i,t,e,n){var s={lane:n,revertLane:0,action:e,hasEagerState:!1,eagerState:null,next:null};if(so(i))wm(t,s);else{var a=i.alternate;if(i.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var r=t.lastRenderedState,l=a(r,e);if(s.hasEagerState=!0,s.eagerState=l,ae(l,r))return to(i,t,s,0),et===null&&Jl(),!1}catch{}finally{}if(e=Gh(i,t,s,n),e!==null)return Vt(e,i,n),Em(e,t,n),!0}return!1}function ad(i,t,e,n){if(n={lane:2,revertLane:gd(),action:n,hasEagerState:!1,eagerState:null,next:null},so(i)){if(t)throw Error(E(479))}else t=Gh(i,e,n,2),t!==null&&Vt(t,i,2)}function so(i){var t=i.alternate;return i===B||t!==null&&t===B}function wm(i,t){Jn=Ol=!0;var e=i.pending;e===null?t.next=t:(t.next=e.next,e.next=t),i.pending=t}function Em(i,t,e){if(e&4194176){var n=t.lanes;n&=i.pendingLanes,e|=n,t.lanes=e,dg(i,e)}}var Ge={readContext:Ut,use:io,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt};Ge.useCacheRefresh=pt;Ge.useMemoCache=pt;Ge.useHostTransitionStatus=pt;Ge.useFormState=pt;Ge.useActionState=pt;Ge.useOptimistic=pt;var yn={readContext:Ut,use:io,useCallback:function(i,t){return Qt().memoizedState=[i,t===void 0?null:t],i},useContext:Ut,useEffect:pp,useImperativeHandle:function(i,t,e){e=e!=null?e.concat([i]):null,gl(4194308,4,dm.bind(null,t,i),e)},useLayoutEffect:function(i,t){return gl(4194308,4,i,t)},useInsertionEffect:function(i,t){gl(4,2,i,t)},useMemo:function(i,t){var e=Qt();t=t===void 0?null:t;var n=i();if(fn){Ri(!0);try{i()}finally{Ri(!1)}}return e.memoizedState=[n,t],n},useReducer:function(i,t,e){var n=Qt();if(e!==void 0){var s=e(t);if(fn){Ri(!0);try{e(t)}finally{Ri(!1)}}}else s=t;return n.memoizedState=n.baseState=s,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},n.queue=i,i=i.dispatch=qy.bind(null,B,i),[n.memoizedState,i]},useRef:function(i){var t=Qt();return i={current:i},t.memoizedState=i},useState:function(i){i=ih(i);var t=i.queue,e=Sm.bind(null,B,t);return t.dispatch=e,[i.memoizedState,e]},useDebugValue:id,useDeferredValue:function(i,t){var e=Qt();return nd(e,i,t)},useTransition:function(){var i=ih(!1);return i=vm.bind(null,B,i.queue,!0,!1),Qt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,t,e){var n=B,s=Qt();if(j){if(e===void 0)throw Error(E(407));e=e()}else{if(e=t(),et===null)throw Error(E(349));q&60||$g(n,t,e)}s.memoizedState=e;var a={value:e,getSnapshot:t};return s.queue=a,pp(Zg.bind(null,n,a,i),[i]),n.flags|=2048,ls(9,Wg.bind(null,n,a,e,t),{destroy:void 0},null),e},useId:function(){var i=Qt(),t=et.identifierPrefix;if(j){var e=si,n=ni;e=(n&~(1<<32-ne(n)-1)).toString(32)+e,t=":"+t+"R"+e,e=Nl++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=zy++,t=":"+t+"r"+e.toString(32)+":";return i.memoizedState=t},useCacheRefresh:function(){return Qt().memoizedState=Gy.bind(null,B)}};yn.useMemoCache=Jh;yn.useHostTransitionStatus=sd;yn.useFormState=am;yn.useActionState=am;yn.useOptimistic=function(i){var t=Qt();t.memoizedState=t.baseState=i;var e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=e,t=ad.bind(null,B,!0,e),e.dispatch=t,[i,t]};var qi={readContext:Ut,use:io,useCallback:pm,useContext:Ut,useEffect:ed,useImperativeHandle:fm,useInsertionEffect:um,useLayoutEffect:hm,useMemo:gm,useReducer:pl,useRef:cm,useState:function(){return pl(ci)},useDebugValue:id,useDeferredValue:function(i,t){var e=yt();return mm(e,$.memoizedState,i,t)},useTransition:function(){var i=pl(ci)[0],t=yt().memoizedState;return[typeof i=="boolean"?i:Ua(i),t]},useSyncExternalStore:Qg,useId:Am};qi.useCacheRefresh=_m;qi.useMemoCache=Jh;qi.useHostTransitionStatus=sd;qi.useFormState=rm;qi.useActionState=rm;qi.useOptimistic=function(i,t){var e=yt();return em(e,$,i,t)};var An={readContext:Ut,use:io,useCallback:pm,useContext:Ut,useEffect:ed,useImperativeHandle:fm,useInsertionEffect:um,useLayoutEffect:hm,useMemo:gm,useReducer:bu,useRef:cm,useState:function(){return bu(ci)},useDebugValue:id,useDeferredValue:function(i,t){var e=yt();return $===null?nd(e,i,t):mm(e,$.memoizedState,i,t)},useTransition:function(){var i=bu(ci)[0],t=yt().memoizedState;return[typeof i=="boolean"?i:Ua(i),t]},useSyncExternalStore:Qg,useId:Am};An.useCacheRefresh=_m;An.useMemoCache=Jh;An.useHostTransitionStatus=sd;An.useFormState=om;An.useActionState=om;An.useOptimistic=function(i,t){var e=yt();return $!==null?em(e,$,i,t):(e.baseState=i,[i,e.queue.dispatch])};function yu(i,t,e,n){t=i.memoizedState,e=e(n,t),e=e==null?t:nt({},t,e),i.memoizedState=e,i.lanes===0&&(i.updateQueue.baseState=e)}var ah={isMounted:function(i){return(i=i._reactInternals)?hs(i)===i:!1},enqueueSetState:function(i,t,e){i=i._reactInternals;var n=se(),s=Li(n);s.payload=t,e!=null&&(s.callback=e),t=Oi(i,s,n),t!==null&&(Vt(t,i,n),ha(t,i,n))},enqueueReplaceState:function(i,t,e){i=i._reactInternals;var n=se(),s=Li(n);s.tag=1,s.payload=t,e!=null&&(s.callback=e),t=Oi(i,s,n),t!==null&&(Vt(t,i,n),ha(t,i,n))},enqueueForceUpdate:function(i,t){i=i._reactInternals;var e=se(),n=Li(e);n.tag=2,t!=null&&(n.callback=t),t=Oi(i,n,e),t!==null&&(Vt(t,i,e),ha(t,i,e))}};function gp(i,t,e,n,s,a,r){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(n,a,r):t.prototype&&t.prototype.isPureReactComponent?!Sa(e,n)||!Sa(s,a):!0}function mp(i,t,e,n){i=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,n),t.state!==i&&ah.enqueueReplaceState(t,t.state,null)}function pn(i,t){var e=t;if("ref"in t){e={};for(var n in t)n!=="ref"&&(e[n]=t[n])}if(i=i.defaultProps){e===t&&(e=nt({},e));for(var s in i)e[s]===void 0&&(e[s]=i[s])}return e}var kl=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function xm(i){kl(i)}function Tm(i){console.error(i)}function Cm(i){kl(i)}function Il(i,t){try{var e=i.onUncaughtError;e(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function vp(i,t,e){try{var n=i.onCaughtError;n(e.value,{componentStack:e.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function rh(i,t,e){return e=Li(e),e.tag=3,e.payload={element:null},e.callback=function(){Il(i,t)},e}function Rm(i){return i=Li(i),i.tag=3,i}function Mm(i,t,e,n){var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=n.value;i.payload=function(){return s(a)},i.callback=function(){vp(t,e,n)}}var r=e.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(i.callback=function(){vp(t,e,n),typeof s!="function"&&(ki===null?ki=new Set([this]):ki.add(this));var l=n.stack;this.componentDidCatch(n.value,{componentStack:l!==null?l:""})})}function jy(i,t,e,n,s){if(e.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=e.alternate,t!==null&&Fa(t,e,s,!0),e=Ae.current,e!==null){switch(e.tag){case 13:return Pe===null?_h():e.alternate===null&&dt===0&&(dt=3),e.flags&=-257,e.flags|=65536,e.lanes=s,n===Ju?e.flags|=16384:(t=e.updateQueue,t===null?e.updateQueue=new Set([n]):t.add(n),Ou(i,n,s)),!1;case 22:return e.flags|=65536,n===Ju?e.flags|=16384:(t=e.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},e.updateQueue=t):(e=t.retryQueue,e===null?t.retryQueue=new Set([n]):e.add(n)),Ou(i,n,s)),!1}throw Error(E(435,e.tag))}return Ou(i,n,s),_h(),!1}if(j)return t=Ae.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,n!==Zu&&(i=Error(E(422),{cause:n}),wa(ve(i,e)))):(n!==Zu&&(t=Error(E(423),{cause:n}),wa(ve(t,e))),i=i.current.alternate,i.flags|=65536,s&=-s,i.lanes|=s,n=ve(n,e),s=rh(i.stateNode,n,s),xu(i,s),dt!==4&&(dt=2)),!1;var a=Error(E(520),{cause:n});if(a=ve(a,e),ga===null?ga=[a]:ga.push(a),dt!==4&&(dt=2),t===null)return!0;n=ve(n,e),e=t;do{switch(e.tag){case 3:return e.flags|=65536,i=s&-s,e.lanes|=i,i=rh(e.stateNode,n,i),xu(e,i),!1;case 1:if(t=e.type,a=e.stateNode,(e.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(ki===null||!ki.has(a))))return e.flags|=65536,s&=-s,e.lanes|=s,s=Rm(s),Mm(s,i,e,n),xu(e,s),!1}e=e.return}while(e!==null);return!1}var Dm=Error(E(461)),Rt=!1;function Lt(i,t,e,n){t.child=i===null?jg(t,null,e,n):dn(t,i.child,e,n)}function bp(i,t,e,n,s){e=e.render;var a=t.ref;if("ref"in n){var r={};for(var l in n)l!=="ref"&&(r[l]=n[l])}else r=n;return gn(t),n=Qh(i,t,e,r,a,s),l=$h(),i!==null&&!Rt?(Wh(i,t,s),ui(i,t,s)):(j&&l&&qh(t),t.flags|=1,Lt(i,t,n,s),t.child)}function yp(i,t,e,n,s){if(i===null){var a=e.type;return typeof a=="function"&&!ud(a)&&a.defaultProps===void 0&&e.compare===null?(t.tag=15,t.type=a,Lm(i,t,a,n,s)):(i=vl(e.type,null,n,t,t.mode,s),i.ref=t.ref,i.return=t,t.child=i)}if(a=i.child,!rd(i,s)){var r=a.memoizedProps;if(e=e.compare,e=e!==null?e:Sa,e(r,n)&&i.ref===t.ref)return ui(i,t,s)}return t.flags|=1,i=Ni(a,n),i.ref=t.ref,i.return=t,t.child=i}function Lm(i,t,e,n,s){if(i!==null){var a=i.memoizedProps;if(Sa(a,n)&&i.ref===t.ref)if(Rt=!1,t.pendingProps=n=a,rd(i,s))i.flags&131072&&(Rt=!0);else return t.lanes=i.lanes,ui(i,t,s)}return lh(i,t,e,n,s)}function Om(i,t,e){var n=t.pendingProps,s=n.children,a=(t.stateNode._pendingVisibility&2)!==0,r=i!==null?i.memoizedState:null;if(ua(i,t),n.mode==="hidden"||a){if(t.flags&128){if(n=r!==null?r.baseLanes|e:e,i!==null){for(s=t.child=i.child,a=0;s!==null;)a=a|s.lanes|s.childLanes,s=s.sibling;t.childLanes=a&~n}else t.childLanes=0,t.child=null;return Ap(i,t,n,e)}if(e&536870912)t.memoizedState={baseLanes:0,cachePool:null},i!==null&&fl(t,r!==null?r.cachePool:null),r!==null?cp(t,r):th(),Vg(t);else return t.lanes=t.childLanes=536870912,Ap(i,t,r!==null?r.baseLanes|e:e,e)}else r!==null?(fl(t,r.cachePool),cp(t,r),xi(t),t.memoizedState=null):(i!==null&&fl(t,null),th(),xi(t));return Lt(i,t,s,e),t.child}function Ap(i,t,e,n){var s=Yh();return s=s===null?null:{parent:wt._currentValue,pool:s},t.memoizedState={baseLanes:e,cachePool:s},i!==null&&fl(t,null),th(),Vg(t),i!==null&&Fa(i,t,n,!0),null}function ua(i,t){var e=t.ref;if(e===null)i!==null&&i.ref!==null&&(t.flags|=2097664);else{if(typeof e!="function"&&typeof e!="object")throw Error(E(284));(i===null||i.ref!==e)&&(t.flags|=2097664)}}function lh(i,t,e,n,s){return gn(t),e=Qh(i,t,e,n,void 0,s),n=$h(),i!==null&&!Rt?(Wh(i,t,s),ui(i,t,s)):(j&&n&&qh(t),t.flags|=1,Lt(i,t,e,s),t.child)}function _p(i,t,e,n,s,a){return gn(t),t.updateQueue=null,e=Kg(t,n,e,s),Yg(i),n=$h(),i!==null&&!Rt?(Wh(i,t,a),ui(i,t,a)):(j&&n&&qh(t),t.flags|=1,Lt(i,t,e,a),t.child)}function Sp(i,t,e,n,s){if(gn(t),t.stateNode===null){var a=jn,r=e.contextType;typeof r=="object"&&r!==null&&(a=Ut(r)),a=new e(n,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=ah,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=n,a.state=t.memoizedState,a.refs={},ld(t),r=e.contextType,a.context=typeof r=="object"&&r!==null?Ut(r):jn,a.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(yu(t,e,r,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(r=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),r!==a.state&&ah.enqueueReplaceState(a,a.state,null),fa(t,n,a,s),da(),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(i===null){a=t.stateNode;var l=t.memoizedProps,o=pn(e,l);a.props=o;var c=a.context,u=e.contextType;r=jn,typeof u=="object"&&u!==null&&(r=Ut(u));var h=e.getDerivedStateFromProps;u=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l||c!==r)&&mp(t,a,n,r),wi=!1;var d=t.memoizedState;a.state=d,fa(t,n,a,s),da(),c=t.memoizedState,l||d!==c||wi?(typeof h=="function"&&(yu(t,e,h,n),c=t.memoizedState),(o=wi||gp(t,e,o,n,d,c,r))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=r,n=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,fh(i,t),r=t.memoizedProps,u=pn(e,r),a.props=u,h=t.pendingProps,d=a.context,c=e.contextType,o=jn,typeof c=="object"&&c!==null&&(o=Ut(c)),l=e.getDerivedStateFromProps,(c=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(r!==h||d!==o)&&mp(t,a,n,o),wi=!1,d=t.memoizedState,a.state=d,fa(t,n,a,s),da();var f=t.memoizedState;r!==h||d!==f||wi||i!==null&&i.dependencies!==null&&Hl(i.dependencies)?(typeof l=="function"&&(yu(t,e,l,n),f=t.memoizedState),(u=wi||gp(t,e,u,n,d,f,o)||i!==null&&i.dependencies!==null&&Hl(i.dependencies))?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,f,o),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,f,o)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||r===i.memoizedProps&&d===i.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||r===i.memoizedProps&&d===i.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),a.props=n,a.state=f,a.context=o,n=u):(typeof a.componentDidUpdate!="function"||r===i.memoizedProps&&d===i.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||r===i.memoizedProps&&d===i.memoizedState||(t.flags|=1024),n=!1)}return a=n,ua(i,t),n=(t.flags&128)!==0,a||n?(a=t.stateNode,e=n&&typeof e.getDerivedStateFromError!="function"?null:a.render(),t.flags|=1,i!==null&&n?(t.child=dn(t,i.child,null,s),t.child=dn(t,null,e,s)):Lt(i,t,e,s),t.memoizedState=a.state,i=t.child):i=ui(i,t,s),i}function wp(i,t,e,n){return za(),t.flags|=256,Lt(i,t,e,n),t.child}var Au={dehydrated:null,treeContext:null,retryLane:0};function _u(i){return{baseLanes:i,cachePool:Xg()}}function Su(i,t,e){return i=i!==null?i.childLanes&~e:0,t&&(i|=ye),i}function Nm(i,t,e){var n=t.pendingProps,s=!1,a=(t.flags&128)!==0,r;if((r=a)||(r=i!==null&&i.memoizedState===null?!1:(Et.current&2)!==0),r&&(s=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,i===null){if(j){if(s?Ei(t):xi(t),j){var l=Ot,o;if(o=l){t:{for(o=l,l=ze;o.nodeType!==8;){if(!l){l=null;break t}if(o=Me(o.nextSibling),o===null){l=null;break t}}l=o}l!==null?(t.memoizedState={dehydrated:l,treeContext:rn!==null?{id:ni,overflow:si}:null,retryLane:536870912},o=be(18,null,null,0),o.stateNode=l,o.return=t,t.child=o,jt=t,Ot=null,o=!0):o=!1}o||hn(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return l.data==="$!"?t.lanes=16:t.lanes=536870912,null;ai(t)}return l=n.children,n=n.fallback,s?(xi(t),s=t.mode,l=ch({mode:"hidden",children:l},s),n=on(n,s,e,null),l.return=t,n.return=t,l.sibling=n,t.child=l,s=t.child,s.memoizedState=_u(e),s.childLanes=Su(i,r,e),t.memoizedState=Au,n):(Ei(t),oh(t,l))}if(o=i.memoizedState,o!==null&&(l=o.dehydrated,l!==null)){if(a)t.flags&256?(Ei(t),t.flags&=-257,t=wu(i,t,e)):t.memoizedState!==null?(xi(t),t.child=i.child,t.flags|=128,t=null):(xi(t),s=n.fallback,l=t.mode,n=ch({mode:"visible",children:n.children},l),s=on(s,l,e,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,dn(t,i.child,null,e),n=t.child,n.memoizedState=_u(e),n.childLanes=Su(i,r,e),t.memoizedState=Au,t=s);else if(Ei(t),l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var c=r.dgst;r=c,n=Error(E(419)),n.stack="",n.digest=r,wa({value:n,source:null,stack:null}),t=wu(i,t,e)}else if(Rt||Fa(i,t,e,!1),r=(e&i.childLanes)!==0,Rt||r){if(r=et,r!==null){if(n=e&-e,n&42)n=1;else switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=64;break;case 268435456:n=134217728;break;default:n=0}if(n=n&(r.suspendedLanes|e)?0:n,n!==0&&n!==o.retryLane)throw o.retryLane=n,Bi(i,n),Vt(r,i,n),Dm}l.data==="$?"||_h(),t=wu(i,t,e)}else l.data==="$?"?(t.flags|=128,t.child=i.child,t=aA.bind(null,i),l._reactRetry=t,t=null):(i=o.treeContext,Ot=Me(l.nextSibling),jt=t,j=!0,Re=null,ze=!1,i!==null&&(pe[ge++]=ni,pe[ge++]=si,pe[ge++]=rn,ni=i.id,si=i.overflow,rn=t),t=oh(t,n.children),t.flags|=4096);return t}return s?(xi(t),s=n.fallback,l=t.mode,o=i.child,c=o.sibling,n=Ni(o,{mode:"hidden",children:n.children}),n.subtreeFlags=o.subtreeFlags&31457280,c!==null?s=Ni(c,s):(s=on(s,l,e,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,l=i.child.memoizedState,l===null?l=_u(e):(o=l.cachePool,o!==null?(c=wt._currentValue,o=o.parent!==c?{parent:c,pool:c}:o):o=Xg(),l={baseLanes:l.baseLanes|e,cachePool:o}),s.memoizedState=l,s.childLanes=Su(i,r,e),t.memoizedState=Au,n):(Ei(t),e=i.child,i=e.sibling,e=Ni(e,{mode:"visible",children:n.children}),e.return=t,e.sibling=null,i!==null&&(r=t.deletions,r===null?(t.deletions=[i],t.flags|=16):r.push(i)),t.child=e,t.memoizedState=null,e)}function oh(i,t){return t=ch({mode:"visible",children:t},i.mode),t.return=i,i.child=t}function ch(i,t){return e0(i,t,0,null)}function wu(i,t,e){return dn(t,i.child,null,e),i=oh(t,t.pendingProps.children),i.flags|=2,t.memoizedState=null,i}function Ep(i,t,e){i.lanes|=t;var n=i.alternate;n!==null&&(n.lanes|=t),hh(i.return,t,e)}function Eu(i,t,e,n,s){var a=i.memoizedState;a===null?i.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:e,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=e,a.tailMode=s)}function km(i,t,e){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(Lt(i,t,n.children,e),n=Et.current,n&2)n=n&1|2,t.flags|=128;else{if(i!==null&&i.flags&128)t:for(i=t.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ep(i,e,t);else if(i.tag===19)Ep(i,e,t);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break t;for(;i.sibling===null;){if(i.return===null||i.return===t)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}n&=1}switch(rt(Et,n),s){case"forwards":for(e=t.child,s=null;e!==null;)i=e.alternate,i!==null&&Ll(i)===null&&(s=e),e=e.sibling;e=s,e===null?(s=t.child,t.child=null):(s=e.sibling,e.sibling=null),Eu(t,!1,s,e,a);break;case"backwards":for(e=null,s=t.child,t.child=null;s!==null;){if(i=s.alternate,i!==null&&Ll(i)===null){t.child=s;break}i=s.sibling,s.sibling=e,e=s,s=i}Eu(t,!0,e,null,a);break;case"together":Eu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ui(i,t,e){if(i!==null&&(t.dependencies=i.dependencies),Pi|=t.lanes,!(e&t.childLanes))if(i!==null){if(Fa(i,t,e,!1),(e&t.childLanes)===0)return null}else return null;if(i!==null&&t.child!==i.child)throw Error(E(153));if(t.child!==null){for(i=t.child,e=Ni(i,i.pendingProps),t.child=e,e.return=t;i.sibling!==null;)i=i.sibling,e=e.sibling=Ni(i,i.pendingProps),e.return=t;e.sibling=null}return t.child}function rd(i,t){return i.lanes&t?!0:(i=i.dependencies,!!(i!==null&&Hl(i)))}function Vy(i,t,e){switch(t.tag){case 3:Sl(t,t.stateNode.containerInfo),Ti(t,wt,i.memoizedState.cache),za();break;case 27:case 5:qu(t);break;case 4:Sl(t,t.stateNode.containerInfo);break;case 10:Ti(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Ei(t),t.flags|=128,null):e&t.child.childLanes?Nm(i,t,e):(Ei(t),i=ui(i,t,e),i!==null?i.sibling:null);Ei(t);break;case 19:var s=(i.flags&128)!==0;if(n=(e&t.childLanes)!==0,n||(Fa(i,t,e,!1),n=(e&t.childLanes)!==0),s){if(n)return km(i,t,e);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),rt(Et,Et.current),n)break;return null;case 22:case 23:return t.lanes=0,Om(i,t,e);case 24:Ti(t,wt,i.memoizedState.cache)}return ui(i,t,e)}function Im(i,t,e){if(i!==null)if(i.memoizedProps!==t.pendingProps)Rt=!0;else{if(!rd(i,e)&&!(t.flags&128))return Rt=!1,Vy(i,t,e);Rt=!!(i.flags&131072)}else Rt=!1,j&&t.flags&1048576&&Fg(t,Ml,t.index);switch(t.lanes=0,t.tag){case 16:t:{i=t.pendingProps;var n=t.elementType,s=n._init;if(n=s(n._payload),t.type=n,typeof n=="function")ud(n)?(i=pn(n,i),t.tag=1,t=Sp(null,t,n,i,e)):(t.tag=0,t=lh(null,t,n,i,e));else{if(n!=null){if(s=n.$$typeof,s===Lh){t.tag=11,t=bp(null,t,n,i,e);break t}else if(s===Oh){t.tag=14,t=yp(null,t,n,i,e);break t}}throw t=Pu(n)||n,Error(E(306,t,""))}}return t;case 0:return lh(i,t,t.type,t.pendingProps,e);case 1:return n=t.type,s=pn(n,t.pendingProps),Sp(i,t,n,s,e);case 3:t:{if(Sl(t,t.stateNode.containerInfo),i===null)throw Error(E(387));var a=t.pendingProps;s=t.memoizedState,n=s.element,fh(i,t),fa(t,a,null,e);var r=t.memoizedState;if(a=r.cache,Ti(t,wt,a),a!==s.cache&&dh(t,[wt],e,!0),da(),a=r.element,s.isDehydrated)if(s={element:a,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=wp(i,t,a,e);break t}else if(a!==n){n=ve(Error(E(424)),t),wa(n),t=wp(i,t,a,e);break t}else for(Ot=Me(t.stateNode.containerInfo.firstChild),jt=t,j=!0,Re=null,ze=!0,e=jg(t,null,a,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(za(),a===n){t=ui(i,t,e);break t}Lt(i,t,a,e)}t=t.child}return t;case 26:return ua(i,t),i===null?(e=jp(t.type,null,t.pendingProps,null))?t.memoizedState=e:j||(e=t.type,i=t.pendingProps,n=ql(Di.current).createElement(e),n[Bt]=t,n[$t]=i,Nt(n,e,i),Ct(n),t.stateNode=n):t.memoizedState=jp(t.type,i.memoizedProps,t.pendingProps,i.memoizedState),null;case 27:return qu(t),i===null&&j&&(n=t.stateNode=y0(t.type,t.pendingProps,Di.current),jt=t,ze=!0,Ot=Me(n.firstChild)),n=t.pendingProps.children,i!==null||j?Lt(i,t,n,e):t.child=dn(t,null,n,e),ua(i,t),t.child;case 5:return i===null&&j&&((s=n=Ot)&&(n=yA(n,t.type,t.pendingProps,ze),n!==null?(t.stateNode=n,jt=t,Ot=Me(n.firstChild),ze=!1,s=!0):s=!1),s||hn(t)),qu(t),s=t.type,a=t.pendingProps,r=i!==null?i.memoizedProps:null,n=a.children,Th(s,a)?n=null:r!==null&&Th(s,r)&&(t.flags|=32),t.memoizedState!==null&&(s=Qh(i,t,By,null,null,e),Ma._currentValue=s),ua(i,t),Lt(i,t,n,e),t.child;case 6:return i===null&&j&&((i=e=Ot)&&(e=AA(e,t.pendingProps,ze),e!==null?(t.stateNode=e,jt=t,Ot=null,i=!0):i=!1),i||hn(t)),null;case 13:return Nm(i,t,e);case 4:return Sl(t,t.stateNode.containerInfo),n=t.pendingProps,i===null?t.child=dn(t,null,n,e):Lt(i,t,n,e),t.child;case 11:return bp(i,t,t.type,t.pendingProps,e);case 7:return Lt(i,t,t.pendingProps,e),t.child;case 8:return Lt(i,t,t.pendingProps.children,e),t.child;case 12:return Lt(i,t,t.pendingProps.children,e),t.child;case 10:return n=t.pendingProps,Ti(t,t.type,n.value),Lt(i,t,n.children,e),t.child;case 9:return s=t.type._context,n=t.pendingProps.children,gn(t),s=Ut(s),n=n(s),t.flags|=1,Lt(i,t,n,e),t.child;case 14:return yp(i,t,t.type,t.pendingProps,e);case 15:return Lm(i,t,t.type,t.pendingProps,e);case 19:return km(i,t,e);case 22:return Om(i,t,e);case 24:return gn(t),n=Ut(wt),i===null?(s=Yh(),s===null&&(s=et,a=Xh(),s.pooledCache=a,a.refCount++,a!==null&&(s.pooledCacheLanes|=e),s=a),t.memoizedState={parent:n,cache:s},ld(t),Ti(t,wt,s)):(i.lanes&e&&(fh(i,t),fa(t,null,null,e),da()),s=i.memoizedState,a=t.memoizedState,s.parent!==n?(s={parent:n,cache:n},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Ti(t,wt,n)):(n=a.cache,Ti(t,wt,n),n!==s.cache&&dh(t,[wt],e,!0))),Lt(i,t,t.pendingProps.children,e),t.child;case 29:throw t.pendingProps}throw Error(E(156,t.tag))}var uh=qe(null),_n=null,ri=null;function Ti(i,t,e){rt(uh,t._currentValue),t._currentValue=e}function li(i){i._currentValue=uh.current,Mt(uh)}function hh(i,t,e){for(;i!==null;){var n=i.alternate;if((i.childLanes&t)!==t?(i.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),i===e)break;i=i.return}}function dh(i,t,e,n){var s=i.child;for(s!==null&&(s.return=i);s!==null;){var a=s.dependencies;if(a!==null){var r=s.child;a=a.firstContext;t:for(;a!==null;){var l=a;a=s;for(var o=0;o<t.length;o++)if(l.context===t[o]){a.lanes|=e,l=a.alternate,l!==null&&(l.lanes|=e),hh(a.return,e,i),n||(r=null);break t}a=l.next}}else if(s.tag===18){if(r=s.return,r===null)throw Error(E(341));r.lanes|=e,a=r.alternate,a!==null&&(a.lanes|=e),hh(r,e,i),r=null}else r=s.child;if(r!==null)r.return=s;else for(r=s;r!==null;){if(r===i){r=null;break}if(s=r.sibling,s!==null){s.return=r.return,r=s;break}r=r.return}s=r}}function Fa(i,t,e,n){i=null;for(var s=t,a=!1;s!==null;){if(!a){if(s.flags&524288)a=!0;else if(s.flags&262144)break}if(s.tag===10){var r=s.alternate;if(r===null)throw Error(E(387));if(r=r.memoizedProps,r!==null){var l=s.type;ae(s.pendingProps.value,r.value)||(i!==null?i.push(l):i=[l])}}else if(s===_l.current){if(r=s.alternate,r===null)throw Error(E(387));r.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(i!==null?i.push(Ma):i=[Ma])}s=s.return}i!==null&&dh(t,i,e,n),t.flags|=262144}function Hl(i){for(i=i.firstContext;i!==null;){if(!ae(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function gn(i){_n=i,ri=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ut(i){return Hm(_n,i)}function el(i,t){return _n===null&&gn(i),Hm(i,t)}function Hm(i,t){var e=t._currentValue;if(t={context:t,memoizedValue:e,next:null},ri===null){if(i===null)throw Error(E(308));ri=t,i.dependencies={lanes:0,firstContext:t},i.flags|=524288}else ri=ri.next=t;return e}var wi=!1;function ld(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fh(i,t){i=i.updateQueue,t.updateQueue===i&&(t.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Li(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Oi(i,t,e){var n=i.updateQueue;if(n===null)return null;if(n=n.shared,ut&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,t=Cl(i),Ug(i,null,e),t}return to(i,n,t,e),Cl(i)}function ha(i,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194176)!==0)){var n=t.lanes;n&=i.pendingLanes,e|=n,t.lanes=e,dg(i,e)}}function xu(i,t){var e=i.updateQueue,n=i.alternate;if(n!==null&&(n=n.updateQueue,e===n)){var s=null,a=null;if(e=e.firstBaseUpdate,e!==null){do{var r={lane:e.lane,tag:e.tag,payload:e.payload,callback:null,next:null};a===null?s=a=r:a=a.next=r,e=e.next}while(e!==null);a===null?s=a=t:a=a.next=t}else s=a=t;e={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,callbacks:n.callbacks},i.updateQueue=e;return}i=e.lastBaseUpdate,i===null?e.firstBaseUpdate=t:i.next=t,e.lastBaseUpdate=t}var ph=!1;function da(){if(ph){var i=Zn;if(i!==null)throw i}}function fa(i,t,e,n){ph=!1;var s=i.updateQueue;wi=!1;var a=s.firstBaseUpdate,r=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var o=l,c=o.next;o.next=null,r===null?a=c:r.next=c,r=o;var u=i.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==r&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=o))}if(a!==null){var h=s.baseState;r=0,u=c=o=null,l=a;do{var d=l.lane&-536870913,f=d!==l.lane;if(f?(q&d)===d:(n&d)===d){d!==0&&d===rs&&(ph=!0),u!==null&&(u=u.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});t:{var g=i,v=l;d=t;var A=e;switch(v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(A,h,d);break t}h=g;break t;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,d=typeof g=="function"?g.call(A,h,d):g,d==null)break t;h=nt({},h,d);break t;case 2:wi=!0}}d=l.callback,d!==null&&(i.flags|=64,f&&(i.flags|=8192),f=s.callbacks,f===null?s.callbacks=[d]:f.push(d))}else f={lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=f,o=h):u=u.next=f,r|=d;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);u===null&&(o=h),s.baseState=o,s.firstBaseUpdate=c,s.lastBaseUpdate=u,a===null&&(s.shared.lanes=0),Pi|=r,i.lanes=r,i.memoizedState=h}}function zm(i,t){if(typeof i!="function")throw Error(E(191,i));i.call(t)}function Bm(i,t){var e=i.callbacks;if(e!==null)for(i.callbacks=null,i=0;i<e.length;i++)zm(e[i],t)}function Pa(i,t){try{var e=t.updateQueue,n=e!==null?e.lastEffect:null;if(n!==null){var s=n.next;e=s;do{if((e.tag&i)===i){n=void 0;var a=e.create,r=e.inst;n=a(),r.destroy=n}e=e.next}while(e!==s)}}catch(l){Z(t,t.return,l)}}function Fi(i,t,e){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var a=s.next;n=a;do{if((n.tag&i)===i){var r=n.inst,l=r.destroy;if(l!==void 0){r.destroy=void 0,s=t;var o=e;try{l()}catch(c){Z(s,o,c)}}}n=n.next}while(n!==a)}}catch(c){Z(t,t.return,c)}}function Um(i){var t=i.updateQueue;if(t!==null){var e=i.stateNode;try{Bm(t,e)}catch(n){Z(i,i.return,n)}}}function Fm(i,t,e){e.props=pn(i.type,i.memoizedProps),e.state=i.memoizedState;try{e.componentWillUnmount()}catch(n){Z(i,t,n)}}function sn(i,t){try{var e=i.ref;if(e!==null){var n=i.stateNode;switch(i.tag){case 26:case 27:case 5:var s=n;break;default:s=n}typeof e=="function"?i.refCleanup=e(s):e.current=s}}catch(a){Z(i,t,a)}}function ee(i,t){var e=i.ref,n=i.refCleanup;if(e!==null)if(typeof n=="function")try{n()}catch(s){Z(i,t,s)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof e=="function")try{e(null)}catch(s){Z(i,t,s)}else e.current=null}function Pm(i){var t=i.type,e=i.memoizedProps,n=i.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":e.autoFocus&&n.focus();break t;case"img":e.src?n.src=e.src:e.srcSet&&(n.srcset=e.srcSet)}}catch(s){Z(i,i.return,s)}}function xp(i,t,e){try{var n=i.stateNode;pA(n,i.type,e,t),n[$t]=t}catch(s){Z(i,i.return,s)}}function Gm(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function Tu(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||Gm(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function gh(i,t,e){var n=i.tag;if(n===5||n===6)i=i.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(i,t):e.insertBefore(i,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(i,e)):(t=e,t.appendChild(i)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=lo));else if(n!==4&&n!==27&&(i=i.child,i!==null))for(gh(i,t,e),i=i.sibling;i!==null;)gh(i,t,e),i=i.sibling}function zl(i,t,e){var n=i.tag;if(n===5||n===6)i=i.stateNode,t?e.insertBefore(i,t):e.appendChild(i);else if(n!==4&&n!==27&&(i=i.child,i!==null))for(zl(i,t,e),i=i.sibling;i!==null;)zl(i,t,e),i=i.sibling}var Je=!1,ht=!1,Cu=!1,Tp=typeof WeakSet=="function"?WeakSet:Set,Tt=null,Cp=!1;function Xy(i,t){if(i=i.containerInfo,Eh=Yl,i=Og(i),Fh(i)){if("selectionStart"in i)var e={start:i.selectionStart,end:i.selectionEnd};else t:{e=(e=i.ownerDocument)&&e.defaultView||window;var n=e.getSelection&&e.getSelection();if(n&&n.rangeCount!==0){e=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{e.nodeType,a.nodeType}catch{e=null;break t}var r=0,l=-1,o=-1,c=0,u=0,h=i,d=null;e:for(;;){for(var f;h!==e||s!==0&&h.nodeType!==3||(l=r+s),h!==a||n!==0&&h.nodeType!==3||(o=r+n),h.nodeType===3&&(r+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===i)break e;if(d===e&&++c===s&&(l=r),d===a&&++u===n&&(o=r),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}e=l===-1||o===-1?null:{start:l,end:o}}else e=null}e=e||{start:0,end:0}}else e=null;for(xh={focusedElem:i,selectionRange:e},Yl=!1,Tt=t;Tt!==null;)if(t=Tt,i=t.child,(t.subtreeFlags&1028)!==0&&i!==null)i.return=t,Tt=i;else for(;Tt!==null;){switch(t=Tt,a=t.alternate,i=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(i&1024&&a!==null){i=void 0,e=t,s=a.memoizedProps,a=a.memoizedState,n=e.stateNode;try{var g=pn(e.type,s,e.elementType===e.type);i=n.getSnapshotBeforeUpdate(g,a),n.__reactInternalSnapshotBeforeUpdate=i}catch(v){Z(e,e.return,v)}}break;case 3:if(i&1024){if(i=t.stateNode.containerInfo,e=i.nodeType,e===9)Ch(i);else if(e===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Ch(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(i&1024)throw Error(E(163))}if(i=t.sibling,i!==null){i.return=t.return,Tt=i;break}Tt=t.return}return g=Cp,Cp=!1,g}function qm(i,t,e){var n=e.flags;switch(e.tag){case 0:case 11:case 15:We(i,e),n&4&&Pa(5,e);break;case 1:if(We(i,e),n&4)if(i=e.stateNode,t===null)try{i.componentDidMount()}catch(l){Z(e,e.return,l)}else{var s=pn(e.type,t.memoizedProps);t=t.memoizedState;try{i.componentDidUpdate(s,t,i.__reactInternalSnapshotBeforeUpdate)}catch(l){Z(e,e.return,l)}}n&64&&Um(e),n&512&&sn(e,e.return);break;case 3:if(We(i,e),n&64&&(n=e.updateQueue,n!==null)){if(i=null,e.child!==null)switch(e.child.tag){case 27:case 5:i=e.child.stateNode;break;case 1:i=e.child.stateNode}try{Bm(n,i)}catch(l){Z(e,e.return,l)}}break;case 26:We(i,e),n&512&&sn(e,e.return);break;case 27:case 5:We(i,e),t===null&&n&4&&Pm(e),n&512&&sn(e,e.return);break;case 12:We(i,e);break;case 13:We(i,e),n&4&&Xm(i,e);break;case 22:if(s=e.memoizedState!==null||Je,!s){t=t!==null&&t.memoizedState!==null||ht;var a=Je,r=ht;Je=s,(ht=t)&&!r?_i(i,e,(e.subtreeFlags&8772)!==0):We(i,e),Je=a,ht=r}n&512&&(e.memoizedProps.mode==="manual"?sn(e,e.return):ee(e,e.return));break;default:We(i,e)}}function jm(i){var t=i.alternate;t!==null&&(i.alternate=null,jm(t)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(t=i.stateNode,t!==null&&kh(t)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var vt=null,Jt=!1;function $e(i,t,e){for(e=e.child;e!==null;)Vm(i,t,e),e=e.sibling}function Vm(i,t,e){if(ie&&typeof ie.onCommitFiberUnmount=="function")try{ie.onCommitFiberUnmount(Na,e)}catch{}switch(e.tag){case 26:ht||ee(e,t),$e(i,t,e),e.memoizedState?e.memoizedState.count--:e.stateNode&&(e=e.stateNode,e.parentNode.removeChild(e));break;case 27:ht||ee(e,t);var n=vt,s=Jt;for(vt=e.stateNode,$e(i,t,e),e=e.stateNode,t=e.attributes;t.length;)e.removeAttributeNode(t[0]);kh(e),vt=n,Jt=s;break;case 5:ht||ee(e,t);case 6:s=vt;var a=Jt;if(vt=null,$e(i,t,e),vt=s,Jt=a,vt!==null)if(Jt)try{i=vt,n=e.stateNode,i.nodeType===8?i.parentNode.removeChild(n):i.removeChild(n)}catch(r){Z(e,t,r)}else try{vt.removeChild(e.stateNode)}catch(r){Z(e,t,r)}break;case 18:vt!==null&&(Jt?(t=vt,e=e.stateNode,t.nodeType===8?zu(t.parentNode,e):t.nodeType===1&&zu(t,e),Oa(t)):zu(vt,e.stateNode));break;case 4:n=vt,s=Jt,vt=e.stateNode.containerInfo,Jt=!0,$e(i,t,e),vt=n,Jt=s;break;case 0:case 11:case 14:case 15:ht||Fi(2,e,t),ht||Fi(4,e,t),$e(i,t,e);break;case 1:ht||(ee(e,t),n=e.stateNode,typeof n.componentWillUnmount=="function"&&Fm(e,t,n)),$e(i,t,e);break;case 21:$e(i,t,e);break;case 22:ht||ee(e,t),ht=(n=ht)||e.memoizedState!==null,$e(i,t,e),ht=n;break;default:$e(i,t,e)}}function Xm(i,t){if(t.memoizedState===null&&(i=t.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Oa(i)}catch(e){Z(t,t.return,e)}}function Yy(i){switch(i.tag){case 13:case 19:var t=i.stateNode;return t===null&&(t=i.stateNode=new Tp),t;case 22:return i=i.stateNode,t=i._retryCache,t===null&&(t=i._retryCache=new Tp),t;default:throw Error(E(435,i.tag))}}function Ru(i,t){var e=Yy(i);t.forEach(function(n){var s=rA.bind(null,i,n);e.has(n)||(e.add(n),n.then(s,s))})}function ue(i,t){var e=t.deletions;if(e!==null)for(var n=0;n<e.length;n++){var s=e[n],a=i,r=t,l=r;t:for(;l!==null;){switch(l.tag){case 27:case 5:vt=l.stateNode,Jt=!1;break t;case 3:vt=l.stateNode.containerInfo,Jt=!0;break t;case 4:vt=l.stateNode.containerInfo,Jt=!0;break t}l=l.return}if(vt===null)throw Error(E(160));Vm(a,r,s),vt=null,Jt=!1,a=s.alternate,a!==null&&(a.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Ym(t,i),t=t.sibling}var Ce=null;function Ym(i,t){var e=i.alternate,n=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ue(t,i),he(i),n&4&&(Fi(3,i,i.return),Pa(3,i),Fi(5,i,i.return));break;case 1:ue(t,i),he(i),n&512&&(ht||e===null||ee(e,e.return)),n&64&&Je&&(i=i.updateQueue,i!==null&&(n=i.callbacks,n!==null&&(e=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=e===null?n:e.concat(n))));break;case 26:var s=Ce;if(ue(t,i),he(i),n&512&&(ht||e===null||ee(e,e.return)),n&4){var a=e!==null?e.memoizedState:null;if(n=i.memoizedState,e===null)if(n===null)if(i.stateNode===null){t:{n=i.type,e=i.memoizedProps,s=s.ownerDocument||s;e:switch(n){case"title":a=s.getElementsByTagName("title")[0],(!a||a[ya]||a[Bt]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=s.createElement(n),s.head.insertBefore(a,s.querySelector("head > title"))),Nt(a,n,e),a[Bt]=i,Ct(a),n=a;break t;case"link":var r=Xp("link","href",s).get(n+(e.href||""));if(r){for(var l=0;l<r.length;l++)if(a=r[l],a.getAttribute("href")===(e.href==null?null:e.href)&&a.getAttribute("rel")===(e.rel==null?null:e.rel)&&a.getAttribute("title")===(e.title==null?null:e.title)&&a.getAttribute("crossorigin")===(e.crossOrigin==null?null:e.crossOrigin)){r.splice(l,1);break e}}a=s.createElement(n),Nt(a,n,e),s.head.appendChild(a);break;case"meta":if(r=Xp("meta","content",s).get(n+(e.content||""))){for(l=0;l<r.length;l++)if(a=r[l],a.getAttribute("content")===(e.content==null?null:""+e.content)&&a.getAttribute("name")===(e.name==null?null:e.name)&&a.getAttribute("property")===(e.property==null?null:e.property)&&a.getAttribute("http-equiv")===(e.httpEquiv==null?null:e.httpEquiv)&&a.getAttribute("charset")===(e.charSet==null?null:e.charSet)){r.splice(l,1);break e}}a=s.createElement(n),Nt(a,n,e),s.head.appendChild(a);break;default:throw Error(E(468,n))}a[Bt]=i,Ct(a),n=a}i.stateNode=n}else Yp(s,i.type,i.stateNode);else i.stateNode=Vp(s,n,i.memoizedProps);else a!==n?(a===null?e.stateNode!==null&&(e=e.stateNode,e.parentNode.removeChild(e)):a.count--,n===null?Yp(s,i.type,i.stateNode):Vp(s,n,i.memoizedProps)):n===null&&i.stateNode!==null&&xp(i,i.memoizedProps,e.memoizedProps)}break;case 27:if(n&4&&i.alternate===null){s=i.stateNode,a=i.memoizedProps;try{for(var o=s.firstChild;o;){var c=o.nextSibling,u=o.nodeName;o[ya]||u==="HEAD"||u==="BODY"||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&o.rel.toLowerCase()==="stylesheet"||s.removeChild(o),o=c}for(var h=i.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Nt(s,h,a),s[Bt]=i,s[$t]=a}catch(g){Z(i,i.return,g)}}case 5:if(ue(t,i),he(i),n&512&&(ht||e===null||ee(e,e.return)),i.flags&32){s=i.stateNode;try{ss(s,"")}catch(g){Z(i,i.return,g)}}n&4&&i.stateNode!=null&&(s=i.memoizedProps,xp(i,s,e!==null?e.memoizedProps:s)),n&1024&&(Cu=!0);break;case 6:if(ue(t,i),he(i),n&4){if(i.stateNode===null)throw Error(E(162));n=i.memoizedProps,e=i.stateNode;try{e.nodeValue=n}catch(g){Z(i,i.return,g)}}break;case 3:if(yl=null,s=Ce,Ce=jl(t.containerInfo),ue(t,i),Ce=s,he(i),n&4&&e!==null&&e.memoizedState.isDehydrated)try{Oa(t.containerInfo)}catch(g){Z(i,i.return,g)}Cu&&(Cu=!1,Km(i));break;case 4:n=Ce,Ce=jl(i.stateNode.containerInfo),ue(t,i),he(i),Ce=n;break;case 12:ue(t,i),he(i);break;case 13:ue(t,i),he(i),i.child.flags&8192&&i.memoizedState!==null!=(e!==null&&e.memoizedState!==null)&&(fd=Fe()),n&4&&(n=i.updateQueue,n!==null&&(i.updateQueue=null,Ru(i,n)));break;case 22:if(n&512&&(ht||e===null||ee(e,e.return)),o=i.memoizedState!==null,c=e!==null&&e.memoizedState!==null,u=Je,h=ht,Je=u||o,ht=h||c,ue(t,i),ht=h,Je=u,he(i),t=i.stateNode,t._current=i,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,n&8192&&(t._visibility=o?t._visibility&-2:t._visibility|1,o&&(t=Je||ht,e===null||c||t||kn(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))t:for(e=null,t=i;;){if(t.tag===5||t.tag===26||t.tag===27){if(e===null){c=e=t;try{if(s=c.stateNode,o)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{r=c.stateNode,l=c.memoizedProps.style;var f=l!=null&&l.hasOwnProperty("display")?l.display:null;r.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(g){Z(c,c.return,g)}}}else if(t.tag===6){if(e===null){c=t;try{c.stateNode.nodeValue=o?"":c.memoizedProps}catch(g){Z(c,c.return,g)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===i)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break t;for(;t.sibling===null;){if(t.return===null||t.return===i)break t;e===t&&(e=null),t=t.return}e===t&&(e=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=i.updateQueue,n!==null&&(e=n.retryQueue,e!==null&&(n.retryQueue=null,Ru(i,e))));break;case 19:ue(t,i),he(i),n&4&&(n=i.updateQueue,n!==null&&(i.updateQueue=null,Ru(i,n)));break;case 21:break;default:ue(t,i),he(i)}}function he(i){var t=i.flags;if(t&2){try{if(i.tag!==27){t:{for(var e=i.return;e!==null;){if(Gm(e)){var n=e;break t}e=e.return}throw Error(E(160))}switch(n.tag){case 27:var s=n.stateNode,a=Tu(i);zl(i,a,s);break;case 5:var r=n.stateNode;n.flags&32&&(ss(r,""),n.flags&=-33);var l=Tu(i);zl(i,l,r);break;case 3:case 4:var o=n.stateNode.containerInfo,c=Tu(i);gh(i,c,o);break;default:throw Error(E(161))}}}catch(u){Z(i,i.return,u)}i.flags&=-3}t&4096&&(i.flags&=-4097)}function Km(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var t=i;Km(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),i=i.sibling}}function We(i,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)qm(i,t.alternate,t),t=t.sibling}function kn(i){for(i=i.child;i!==null;){var t=i;switch(t.tag){case 0:case 11:case 14:case 15:Fi(4,t,t.return),kn(t);break;case 1:ee(t,t.return);var e=t.stateNode;typeof e.componentWillUnmount=="function"&&Fm(t,t.return,e),kn(t);break;case 26:case 27:case 5:ee(t,t.return),kn(t);break;case 22:ee(t,t.return),t.memoizedState===null&&kn(t);break;default:kn(t)}i=i.sibling}}function _i(i,t,e){for(e=e&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,s=i,a=t,r=a.flags;switch(a.tag){case 0:case 11:case 15:_i(s,a,e),Pa(4,a);break;case 1:if(_i(s,a,e),n=a,s=n.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(c){Z(n,n.return,c)}if(n=a,s=n.updateQueue,s!==null){var l=n.stateNode;try{var o=s.shared.hiddenCallbacks;if(o!==null)for(s.shared.hiddenCallbacks=null,s=0;s<o.length;s++)zm(o[s],l)}catch(c){Z(n,n.return,c)}}e&&r&64&&Um(a),sn(a,a.return);break;case 26:case 27:case 5:_i(s,a,e),e&&n===null&&r&4&&Pm(a),sn(a,a.return);break;case 12:_i(s,a,e);break;case 13:_i(s,a,e),e&&r&4&&Xm(s,a);break;case 22:a.memoizedState===null&&_i(s,a,e),sn(a,a.return);break;default:_i(s,a,e)}t=t.sibling}}function od(i,t){var e=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==e&&(i!=null&&i.refCount++,e!=null&&Ba(e))}function cd(i,t){i=null,t.alternate!==null&&(i=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==i&&(t.refCount++,i!=null&&Ba(i))}function Ai(i,t,e,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Qm(i,t,e,n),t=t.sibling}function Qm(i,t,e,n){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Ai(i,t,e,n),s&2048&&Pa(9,t);break;case 3:Ai(i,t,e,n),s&2048&&(i=null,t.alternate!==null&&(i=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==i&&(t.refCount++,i!=null&&Ba(i)));break;case 12:if(s&2048){Ai(i,t,e,n),i=t.stateNode;try{var a=t.memoizedProps,r=a.id,l=a.onPostCommit;typeof l=="function"&&l(r,t.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(o){Z(t,t.return,o)}}else Ai(i,t,e,n);break;case 23:break;case 22:a=t.stateNode,t.memoizedState!==null?a._visibility&4?Ai(i,t,e,n):pa(i,t):a._visibility&4?Ai(i,t,e,n):(a._visibility|=4,In(i,t,e,n,(t.subtreeFlags&10256)!==0)),s&2048&&od(t.alternate,t);break;case 24:Ai(i,t,e,n),s&2048&&cd(t.alternate,t);break;default:Ai(i,t,e,n)}}function In(i,t,e,n,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var a=i,r=t,l=e,o=n,c=r.flags;switch(r.tag){case 0:case 11:case 15:In(a,r,l,o,s),Pa(8,r);break;case 23:break;case 22:var u=r.stateNode;r.memoizedState!==null?u._visibility&4?In(a,r,l,o,s):pa(a,r):(u._visibility|=4,In(a,r,l,o,s)),s&&c&2048&&od(r.alternate,r);break;case 24:In(a,r,l,o,s),s&&c&2048&&cd(r.alternate,r);break;default:In(a,r,l,o,s)}t=t.sibling}}function pa(i,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var e=i,n=t,s=n.flags;switch(n.tag){case 22:pa(e,n),s&2048&&od(n.alternate,n);break;case 24:pa(e,n),s&2048&&cd(n.alternate,n);break;default:pa(e,n)}t=t.sibling}}var ia=8192;function On(i){if(i.subtreeFlags&ia)for(i=i.child;i!==null;)$m(i),i=i.sibling}function $m(i){switch(i.tag){case 26:On(i),i.flags&ia&&i.memoizedState!==null&&NA(Ce,i.memoizedState,i.memoizedProps);break;case 5:On(i);break;case 3:case 4:var t=Ce;Ce=jl(i.stateNode.containerInfo),On(i),Ce=t;break;case 22:i.memoizedState===null&&(t=i.alternate,t!==null&&t.memoizedState!==null?(t=ia,ia=16777216,On(i),ia=t):On(i));break;default:On(i)}}function Wm(i){var t=i.alternate;if(t!==null&&(i=t.child,i!==null)){t.child=null;do t=i.sibling,i.sibling=null,i=t;while(i!==null)}}function Ks(i){var t=i.deletions;if(i.flags&16){if(t!==null)for(var e=0;e<t.length;e++){var n=t[e];Tt=n,Jm(n,i)}Wm(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Zm(i),i=i.sibling}function Zm(i){switch(i.tag){case 0:case 11:case 15:Ks(i),i.flags&2048&&Fi(9,i,i.return);break;case 3:Ks(i);break;case 12:Ks(i);break;case 22:var t=i.stateNode;i.memoizedState!==null&&t._visibility&4&&(i.return===null||i.return.tag!==13)?(t._visibility&=-5,ml(i)):Ks(i);break;default:Ks(i)}}function ml(i){var t=i.deletions;if(i.flags&16){if(t!==null)for(var e=0;e<t.length;e++){var n=t[e];Tt=n,Jm(n,i)}Wm(i)}for(i=i.child;i!==null;){switch(t=i,t.tag){case 0:case 11:case 15:Fi(8,t,t.return),ml(t);break;case 22:e=t.stateNode,e._visibility&4&&(e._visibility&=-5,ml(t));break;default:ml(t)}i=i.sibling}}function Jm(i,t){for(;Tt!==null;){var e=Tt;switch(e.tag){case 0:case 11:case 15:Fi(8,e,t);break;case 23:case 22:if(e.memoizedState!==null&&e.memoizedState.cachePool!==null){var n=e.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Ba(e.memoizedState.cache)}if(n=e.child,n!==null)n.return=e,Tt=n;else t:for(e=i;Tt!==null;){n=Tt;var s=n.sibling,a=n.return;if(jm(n),n===e){Tt=null;break t}if(s!==null){s.return=a,Tt=s;break t}Tt=a}}}function Ky(i,t,e,n){this.tag=i,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function be(i,t,e,n){return new Ky(i,t,e,n)}function ud(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ni(i,t){var e=i.alternate;return e===null?(e=be(i.tag,t,i.key,i.mode),e.elementType=i.elementType,e.type=i.type,e.stateNode=i.stateNode,e.alternate=i,i.alternate=e):(e.pendingProps=t,e.type=i.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=i.flags&31457280,e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=i.sibling,e.index=i.index,e.ref=i.ref,e.refCleanup=i.refCleanup,e}function t0(i,t){i.flags&=31457282;var e=i.alternate;return e===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,i.type=e.type,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i}function vl(i,t,e,n,s,a){var r=0;if(n=i,typeof i=="function")ud(i)&&(r=1);else if(typeof i=="string")r=LA(i,e,Ue.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case zn:return on(e.children,s,a,t);case eg:r=8,s|=24;break;case Bu:return i=be(12,e,t,s|2),i.elementType=Bu,i.lanes=a,i;case Uu:return i=be(13,e,t,s),i.elementType=Uu,i.lanes=a,i;case Fu:return i=be(19,e,t,s),i.elementType=Fu,i.lanes=a,i;case ng:return e0(e,s,a,t);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case yb:case ii:r=10;break t;case ig:r=9;break t;case Lh:r=11;break t;case Oh:r=14;break t;case Si:r=16,n=null;break t}r=29,e=Error(E(130,i===null?"null":typeof i,"")),n=null}return t=be(r,e,t,s),t.elementType=i,t.type=n,t.lanes=a,t}function on(i,t,e,n){return i=be(7,i,n,t),i.lanes=e,i}function e0(i,t,e,n){i=be(22,i,n,t),i.elementType=ng,i.lanes=e;var s={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var a=s._current;if(a===null)throw Error(E(456));if(!(s._pendingVisibility&2)){var r=Bi(a,2);r!==null&&(s._pendingVisibility|=2,Vt(r,a,2))}},attach:function(){var a=s._current;if(a===null)throw Error(E(456));if(s._pendingVisibility&2){var r=Bi(a,2);r!==null&&(s._pendingVisibility&=-3,Vt(r,a,2))}}};return i.stateNode=s,i}function Mu(i,t,e){return i=be(6,i,null,t),i.lanes=e,i}function Du(i,t,e){return t=be(4,i.children!==null?i.children:[],i.key,t),t.lanes=e,t.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},t}function Ze(i){i.flags|=4}function Rp(i,t){if(t.type!=="stylesheet"||t.state.loading&4)i.flags&=-16777217;else if(i.flags|=16777216,!S0(t)){if(t=Ae.current,t!==null&&((q&4194176)===q?Pe!==null:(q&62914560)!==q&&!(q&536870912)||t!==Pe))throw la=Ju,Pg;i.flags|=8192}}function il(i,t){t!==null&&(i.flags|=4),i.flags&16384&&(t=i.tag!==22?ug():536870912,i.lanes|=t,os|=t)}function Qs(i,t){if(!j)switch(i.tailMode){case"hidden":t=i.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?i.tail=null:e.sibling=null;break;case"collapsed":e=i.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t||i.tail===null?i.tail=null:i.tail.sibling=null:n.sibling=null}}function ct(i){var t=i.alternate!==null&&i.alternate.child===i.child,e=0,n=0;if(t)for(var s=i.child;s!==null;)e|=s.lanes|s.childLanes,n|=s.subtreeFlags&31457280,n|=s.flags&31457280,s.return=i,s=s.sibling;else for(s=i.child;s!==null;)e|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=i,s=s.sibling;return i.subtreeFlags|=n,i.childLanes=e,t}function Qy(i,t,e){var n=t.pendingProps;switch(jh(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(t),null;case 1:return ct(t),null;case 3:return e=t.stateNode,n=null,i!==null&&(n=i.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),li(wt),is(),e.pendingContext&&(e.context=e.pendingContext,e.pendingContext=null),(i===null||i.child===null)&&(Xs(t)?Ze(t):i===null||i.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Re!==null&&(Ah(Re),Re=null))),ct(t),null;case 26:return e=t.memoizedState,i===null?(Ze(t),e!==null?(ct(t),Rp(t,e)):(ct(t),t.flags&=-16777217)):e?e!==i.memoizedState?(Ze(t),ct(t),Rp(t,e)):(ct(t),t.flags&=-16777217):(i.memoizedProps!==n&&Ze(t),ct(t),t.flags&=-16777217),null;case 27:wl(t),e=Di.current;var s=t.type;if(i!==null&&t.stateNode!=null)i.memoizedProps!==n&&Ze(t);else{if(!n){if(t.stateNode===null)throw Error(E(166));return ct(t),null}i=Ue.current,Xs(t)?sp(t,i):(i=y0(s,n,e),t.stateNode=i,Ze(t))}return ct(t),null;case 5:if(wl(t),e=t.type,i!==null&&t.stateNode!=null)i.memoizedProps!==n&&Ze(t);else{if(!n){if(t.stateNode===null)throw Error(E(166));return ct(t),null}if(i=Ue.current,Xs(t))sp(t,i);else{switch(s=ql(Di.current),i){case 1:i=s.createElementNS("http://www.w3.org/2000/svg",e);break;case 2:i=s.createElementNS("http://www.w3.org/1998/Math/MathML",e);break;default:switch(e){case"svg":i=s.createElementNS("http://www.w3.org/2000/svg",e);break;case"math":i=s.createElementNS("http://www.w3.org/1998/Math/MathML",e);break;case"script":i=s.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof n.is=="string"?s.createElement("select",{is:n.is}):s.createElement("select"),n.multiple?i.multiple=!0:n.size&&(i.size=n.size);break;default:i=typeof n.is=="string"?s.createElement(e,{is:n.is}):s.createElement(e)}}i[Bt]=t,i[$t]=n;t:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)i.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break t;for(;s.sibling===null;){if(s.return===null||s.return===t)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=i;t:switch(Nt(i,e,n),e){case"button":case"input":case"select":case"textarea":i=!!n.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Ze(t)}}return ct(t),t.flags&=-16777217,null;case 6:if(i&&t.stateNode!=null)i.memoizedProps!==n&&Ze(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(E(166));if(i=Di.current,Xs(t)){if(i=t.stateNode,e=t.memoizedProps,n=null,s=jt,s!==null)switch(s.tag){case 27:case 5:n=s.memoizedProps}i[Bt]=t,i=!!(i.nodeValue===e||n!==null&&n.suppressHydrationWarning===!0||m0(i.nodeValue,e)),i||hn(t)}else i=ql(i).createTextNode(n),i[Bt]=t,t.stateNode=i}return ct(t),null;case 13:if(n=t.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(s=Xs(t),n!==null&&n.dehydrated!==null){if(i===null){if(!s)throw Error(E(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(E(317));s[Bt]=t}else za(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ct(t),s=!1}else Re!==null&&(Ah(Re),Re=null),s=!0;if(!s)return t.flags&256?(ai(t),t):(ai(t),null)}if(ai(t),t.flags&128)return t.lanes=e,t;if(e=n!==null,i=i!==null&&i.memoizedState!==null,e){n=t.child,s=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(s=n.alternate.memoizedState.cachePool.pool);var a=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),a!==s&&(n.flags|=2048)}return e!==i&&e&&(t.child.flags|=8192),il(t,t.updateQueue),ct(t),null;case 4:return is(),i===null&&md(t.stateNode.containerInfo),ct(t),null;case 10:return li(t.type),ct(t),null;case 19:if(Mt(Et),s=t.memoizedState,s===null)return ct(t),null;if(n=(t.flags&128)!==0,a=s.rendering,a===null)if(n)Qs(s,!1);else{if(dt!==0||i!==null&&i.flags&128)for(i=t.child;i!==null;){if(a=Ll(i),a!==null){for(t.flags|=128,Qs(s,!1),i=a.updateQueue,t.updateQueue=i,il(t,i),t.subtreeFlags=0,i=e,e=t.child;e!==null;)t0(e,i),e=e.sibling;return rt(Et,Et.current&1|2),t.child}i=i.sibling}s.tail!==null&&Fe()>Bl&&(t.flags|=128,n=!0,Qs(s,!1),t.lanes=4194304)}else{if(!n)if(i=Ll(a),i!==null){if(t.flags|=128,n=!0,i=i.updateQueue,t.updateQueue=i,il(t,i),Qs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!j)return ct(t),null}else 2*Fe()-s.renderingStartTime>Bl&&e!==536870912&&(t.flags|=128,n=!0,Qs(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(i=s.last,i!==null?i.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Fe(),t.sibling=null,i=Et.current,rt(Et,n?i&1|2:i&1),t):(ct(t),null);case 22:case 23:return ai(t),Vh(),n=t.memoizedState!==null,i!==null?i.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?e&536870912&&!(t.flags&128)&&(ct(t),t.subtreeFlags&6&&(t.flags|=8192)):ct(t),e=t.updateQueue,e!==null&&il(t,e.retryQueue),e=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==e&&(t.flags|=2048),i!==null&&Mt(ln),null;case 24:return e=null,i!==null&&(e=i.memoizedState.cache),t.memoizedState.cache!==e&&(t.flags|=2048),li(wt),ct(t),null;case 25:return null}throw Error(E(156,t.tag))}function $y(i,t){switch(jh(t),t.tag){case 1:return i=t.flags,i&65536?(t.flags=i&-65537|128,t):null;case 3:return li(wt),is(),i=t.flags,i&65536&&!(i&128)?(t.flags=i&-65537|128,t):null;case 26:case 27:case 5:return wl(t),null;case 13:if(ai(t),i=t.memoizedState,i!==null&&i.dehydrated!==null){if(t.alternate===null)throw Error(E(340));za()}return i=t.flags,i&65536?(t.flags=i&-65537|128,t):null;case 19:return Mt(Et),null;case 4:return is(),null;case 10:return li(t.type),null;case 22:case 23:return ai(t),Vh(),i!==null&&Mt(ln),i=t.flags,i&65536?(t.flags=i&-65537|128,t):null;case 24:return li(wt),null;case 25:return null;default:return null}}function i0(i,t){switch(jh(t),t.tag){case 3:li(wt),is();break;case 26:case 27:case 5:wl(t);break;case 4:is();break;case 13:ai(t);break;case 19:Mt(Et);break;case 10:li(t.type);break;case 22:case 23:ai(t),Vh(),i!==null&&Mt(ln);break;case 24:li(wt)}}var Wy={getCacheForType:function(i){var t=Ut(wt),e=t.data.get(i);return e===void 0&&(e=i(),t.data.set(i,e)),e}},Zy=typeof WeakMap=="function"?WeakMap:Map,ut=0,et=null,F=null,q=0,tt=0,te=null,ti=!1,ps=!1,hd=!1,hi=0,dt=0,Pi=0,cn=0,dd=0,ye=0,os=0,ga=null,Be=null,mh=!1,fd=0,Bl=1/0,Ul=null,ki=null,nl=!1,en=null,ma=0,vh=0,bh=null,va=0,yh=null;function se(){if(ut&2&&q!==0)return q&-q;if(k.T!==null){var i=rs;return i!==0?i:gd()}return pg()}function n0(){ye===0&&(ye=!(q&536870912)||j?cg():536870912);var i=Ae.current;return i!==null&&(i.flags|=32),ye}function Vt(i,t,e){(i===et&&tt===2||i.cancelPendingCommit!==null)&&(cs(i,0),ei(i,q,ye,!1)),Ia(i,e),(!(ut&2)||i!==et)&&(i===et&&(!(ut&2)&&(cn|=e),dt===4&&ei(i,q,ye,!1)),je(i))}function s0(i,t,e){if(ut&6)throw Error(E(327));var n=!e&&(t&60)===0&&(t&i.expiredLanes)===0||ka(i,t),s=n?eA(i,t):Lu(i,t,!0),a=n;do{if(s===0){ps&&!n&&ei(i,t,0,!1);break}else if(s===6)ei(i,t,0,!ti);else{if(e=i.current.alternate,a&&!Jy(e)){s=Lu(i,t,!1),a=!1;continue}if(s===2){if(a=t,i.errorRecoveryDisabledLanes&a)var r=0;else r=i.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;t:{var l=i;s=ga;var o=l.current.memoizedState.isDehydrated;if(o&&(cs(l,r).flags|=256),r=Lu(l,r,!1),r!==2){if(hd&&!o){l.errorRecoveryDisabledLanes|=a,cn|=a,s=4;break t}a=Be,Be=s,a!==null&&Ah(a)}s=r}if(a=!1,s!==2)continue}}if(s===1){cs(i,0),ei(i,t,0,!0);break}t:{switch(n=i,s){case 0:case 1:throw Error(E(345));case 4:if((t&4194176)===t){ei(n,t,ye,!ti);break t}break;case 2:Be=null;break;case 3:case 5:break;default:throw Error(E(329))}if(n.finishedWork=e,n.finishedLanes=t,(t&62914560)===t&&(a=fd+300-Fe(),10<a)){if(ei(n,t,ye,!ti),Ql(n,0)!==0)break t;n.timeoutHandle=b0(Mp.bind(null,n,e,Be,Ul,mh,t,ye,cn,os,ti,2,-0,0),a);break t}Mp(n,e,Be,Ul,mh,t,ye,cn,os,ti,0,-0,0)}}break}while(!0);je(i)}function Ah(i){Be===null?Be=i:Be.push.apply(Be,i)}function Mp(i,t,e,n,s,a,r,l,o,c,u,h,d){var f=t.subtreeFlags;if((f&8192||(f&16785408)===16785408)&&(Ra={stylesheets:null,count:0,unsuspend:OA},$m(t),t=kA(),t!==null)){i.cancelPendingCommit=t(Lp.bind(null,i,e,n,s,r,l,o,1,h,d)),ei(i,a,r,!c);return}Lp(i,e,n,s,r,l,o,u,h,d)}function Jy(i){for(var t=i;;){var e=t.tag;if((e===0||e===11||e===15)&&t.flags&16384&&(e=t.updateQueue,e!==null&&(e=e.stores,e!==null)))for(var n=0;n<e.length;n++){var s=e[n],a=s.getSnapshot;s=s.value;try{if(!ae(a(),s))return!1}catch{return!1}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===i)break;for(;t.sibling===null;){if(t.return===null||t.return===i)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ei(i,t,e,n){t&=~dd,t&=~cn,i.suspendedLanes|=t,i.pingedLanes&=~t,n&&(i.warmLanes|=t),n=i.expirationTimes;for(var s=t;0<s;){var a=31-ne(s),r=1<<a;n[a]=-1,s&=~r}e!==0&&hg(i,e,t)}function ao(){return ut&6?!0:(Ga(0,!1),!1)}function pd(){if(F!==null){if(tt===0)var i=F.return;else i=F,ri=_n=null,Zh(i),Wn=null,Ea=0,i=F;for(;i!==null;)i0(i.alternate,i),i=i.return;F=null}}function cs(i,t){i.finishedWork=null,i.finishedLanes=0;var e=i.timeoutHandle;e!==-1&&(i.timeoutHandle=-1,mA(e)),e=i.cancelPendingCommit,e!==null&&(i.cancelPendingCommit=null,e()),pd(),et=i,F=e=Ni(i.current,null),q=t,tt=0,te=null,ti=!1,ps=ka(i,t),hd=!1,os=ye=dd=cn=Pi=dt=0,Be=ga=null,mh=!1,t&8&&(t|=t&32);var n=i.entangledLanes;if(n!==0)for(i=i.entanglements,n&=t;0<n;){var s=31-ne(n),a=1<<s;t|=i[s],n&=~a}return hi=t,Jl(),e}function a0(i,t){B=null,k.H=Ge,t===ra?(t=lp(),tt=3):t===Pg?(t=lp(),tt=4):tt=t===Dm?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,te=t,F===null&&(dt=1,Il(i,ve(t,i.current)))}function r0(){var i=k.H;return k.H=Ge,i===null?Ge:i}function l0(){var i=k.A;return k.A=Wy,i}function _h(){dt=4,ti||(q&4194176)!==q&&Ae.current!==null||(ps=!0),!(Pi&134217727)&&!(cn&134217727)||et===null||ei(et,q,ye,!1)}function Lu(i,t,e){var n=ut;ut|=2;var s=r0(),a=l0();(et!==i||q!==t)&&(Ul=null,cs(i,t)),t=!1;var r=dt;t:do try{if(tt!==0&&F!==null){var l=F,o=te;switch(tt){case 8:pd(),r=6;break t;case 3:case 2:case 6:Ae.current===null&&(t=!0);var c=tt;if(tt=0,te=null,Yn(i,l,o,c),e&&ps){r=0;break t}break;default:c=tt,tt=0,te=null,Yn(i,l,o,c)}}tA(),r=dt;break}catch(u){a0(i,u)}while(!0);return t&&i.shellSuspendCounter++,ri=_n=null,ut=n,k.H=s,k.A=a,F===null&&(et=null,q=0,Jl()),r}function tA(){for(;F!==null;)o0(F)}function eA(i,t){var e=ut;ut|=2;var n=r0(),s=l0();et!==i||q!==t?(Ul=null,Bl=Fe()+500,cs(i,t)):ps=ka(i,t);t:do try{if(tt!==0&&F!==null){t=F;var a=te;e:switch(tt){case 1:tt=0,te=null,Yn(i,t,a,1);break;case 2:if(rp(a)){tt=0,te=null,Dp(t);break}t=function(){tt===2&&et===i&&(tt=7),je(i)},a.then(t,t);break t;case 3:tt=7;break t;case 4:tt=5;break t;case 7:rp(a)?(tt=0,te=null,Dp(t)):(tt=0,te=null,Yn(i,t,a,7));break;case 5:var r=null;switch(F.tag){case 26:r=F.memoizedState;case 5:case 27:var l=F;if(!r||S0(r)){tt=0,te=null;var o=l.sibling;if(o!==null)F=o;else{var c=l.return;c!==null?(F=c,ro(c)):F=null}break e}}tt=0,te=null,Yn(i,t,a,5);break;case 6:tt=0,te=null,Yn(i,t,a,6);break;case 8:pd(),dt=6;break t;default:throw Error(E(462))}}iA();break}catch(u){a0(i,u)}while(!0);return ri=_n=null,k.H=n,k.A=s,ut=e,F!==null?0:(et=null,q=0,Jl(),dt)}function iA(){for(;F!==null&&!Eb();)o0(F)}function o0(i){var t=Im(i.alternate,i,hi);i.memoizedProps=i.pendingProps,t===null?ro(i):F=t}function Dp(i){var t=i,e=t.alternate;switch(t.tag){case 15:case 0:t=_p(e,t,t.pendingProps,t.type,void 0,q);break;case 11:t=_p(e,t,t.pendingProps,t.type.render,t.ref,q);break;case 5:Zh(t);default:i0(e,t),t=F=t0(t,hi),t=Im(e,t,hi)}i.memoizedProps=i.pendingProps,t===null?ro(i):F=t}function Yn(i,t,e,n){ri=_n=null,Zh(t),Wn=null,Ea=0;var s=t.return;try{if(jy(i,s,t,e,q)){dt=1,Il(i,ve(e,i.current)),F=null;return}}catch(a){if(s!==null)throw F=s,a;dt=1,Il(i,ve(e,i.current)),F=null;return}t.flags&32768?(j||n===1?i=!0:ps||q&536870912?i=!1:(ti=i=!0,(n===2||n===3||n===6)&&(n=Ae.current,n!==null&&n.tag===13&&(n.flags|=16384))),c0(t,i)):ro(t)}function ro(i){var t=i;do{if(t.flags&32768){c0(t,ti);return}i=t.return;var e=Qy(t.alternate,t,hi);if(e!==null){F=e;return}if(t=t.sibling,t!==null){F=t;return}F=t=i}while(t!==null);dt===0&&(dt=5)}function c0(i,t){do{var e=$y(i.alternate,i);if(e!==null){e.flags&=32767,F=e;return}if(e=i.return,e!==null&&(e.flags|=32768,e.subtreeFlags=0,e.deletions=null),!t&&(i=i.sibling,i!==null)){F=i;return}F=i=e}while(i!==null);dt=6,F=null}function Lp(i,t,e,n,s,a,r,l,o,c){var u=k.T,h=it.p;try{it.p=2,k.T=null,nA(i,t,e,n,h,s,a,r,l,o,c)}finally{k.T=u,it.p=h}}function nA(i,t,e,n,s,a,r,l){do es();while(en!==null);if(ut&6)throw Error(E(327));var o=i.finishedWork;if(n=i.finishedLanes,o===null)return null;if(i.finishedWork=null,i.finishedLanes=0,o===i.current)throw Error(E(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var c=o.lanes|o.childLanes;if(c|=Ph,Ib(i,n,c,a,r,l),i===et&&(F=et=null,q=0),!(o.subtreeFlags&10256)&&!(o.flags&10256)||nl||(nl=!0,vh=c,bh=e,lA(El,function(){return es(!0),null})),e=(o.flags&15990)!==0,o.subtreeFlags&15990||e?(e=k.T,k.T=null,a=it.p,it.p=2,r=ut,ut|=4,Xy(i,o),Ym(o,i),Cy(xh,i.containerInfo),Yl=!!Eh,xh=Eh=null,i.current=o,qm(i,o.alternate,o),xb(),ut=r,it.p=a,k.T=e):i.current=o,nl?(nl=!1,en=i,ma=n):u0(i,c),c=i.pendingLanes,c===0&&(ki=null),Db(o.stateNode,s),je(i),t!==null)for(s=i.onRecoverableError,o=0;o<t.length;o++)c=t[o],s(c.value,{componentStack:c.stack});return ma&3&&es(),c=i.pendingLanes,n&4194218&&c&42?i===yh?va++:(va=0,yh=i):va=0,Ga(0,!1),null}function u0(i,t){(i.pooledCacheLanes&=t)===0&&(t=i.pooledCache,t!=null&&(i.pooledCache=null,Ba(t)))}function es(){if(en!==null){var i=en,t=vh;vh=0;var e=fg(ma),n=k.T,s=it.p;try{if(it.p=32>e?32:e,k.T=null,en===null)var a=!1;else{e=bh,bh=null;var r=en,l=ma;if(en=null,ma=0,ut&6)throw Error(E(331));var o=ut;if(ut|=4,Zm(r.current),Qm(r,r.current,l,e),ut=o,Ga(0,!1),ie&&typeof ie.onPostCommitFiberRoot=="function")try{ie.onPostCommitFiberRoot(Na,r)}catch{}a=!0}return a}finally{it.p=s,k.T=n,u0(i,t)}}return!1}function Op(i,t,e){t=ve(e,t),t=rh(i.stateNode,t,2),i=Oi(i,t,2),i!==null&&(Ia(i,2),je(i))}function Z(i,t,e){if(i.tag===3)Op(i,i,e);else for(;t!==null;){if(t.tag===3){Op(t,i,e);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ki===null||!ki.has(n))){i=ve(e,i),e=Rm(2),n=Oi(t,e,2),n!==null&&(Mm(e,n,t,i),Ia(n,2),je(n));break}}t=t.return}}function Ou(i,t,e){var n=i.pingCache;if(n===null){n=i.pingCache=new Zy;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(e)||(hd=!0,s.add(e),i=sA.bind(null,i,t,e),t.then(i,i))}function sA(i,t,e){var n=i.pingCache;n!==null&&n.delete(t),i.pingedLanes|=i.suspendedLanes&e,i.warmLanes&=~e,et===i&&(q&e)===e&&(dt===4||dt===3&&(q&62914560)===q&&300>Fe()-fd?!(ut&2)&&cs(i,0):dd|=e,os===q&&(os=0)),je(i)}function h0(i,t){t===0&&(t=ug()),i=Bi(i,t),i!==null&&(Ia(i,t),je(i))}function aA(i){var t=i.memoizedState,e=0;t!==null&&(e=t.retryLane),h0(i,e)}function rA(i,t){var e=0;switch(i.tag){case 13:var n=i.stateNode,s=i.memoizedState;s!==null&&(e=s.retryLane);break;case 19:n=i.stateNode;break;case 22:n=i.stateNode._retryCache;break;default:throw Error(E(314))}n!==null&&n.delete(t),h0(i,e)}function lA(i,t){return Nh(i,t)}var Fl=null,Hn=null,Sh=!1,Pl=!1,Nu=!1,un=0;function je(i){i!==Hn&&i.next===null&&(Hn===null?Fl=Hn=i:Hn=Hn.next=i),Pl=!0,Sh||(Sh=!0,cA(oA))}function Ga(i,t){if(!Nu&&Pl){Nu=!0;do for(var e=!1,n=Fl;n!==null;){if(!t)if(i!==0){var s=n.pendingLanes;if(s===0)var a=0;else{var r=n.suspendedLanes,l=n.pingedLanes;a=(1<<31-ne(42|i)+1)-1,a&=s&~(r&~l),a=a&201326677?a&201326677|1:a?a|2:0}a!==0&&(e=!0,Np(n,a))}else a=q,a=Ql(n,n===et?a:0),!(a&3)||ka(n,a)||(e=!0,Np(n,a));n=n.next}while(e);Nu=!1}}function oA(){Pl=Sh=!1;var i=0;un!==0&&(gA()&&(i=un),un=0);for(var t=Fe(),e=null,n=Fl;n!==null;){var s=n.next,a=d0(n,t);a===0?(n.next=null,e===null?Fl=s:e.next=s,s===null&&(Hn=e)):(e=n,(i!==0||a&3)&&(Pl=!0)),n=s}Ga(i,!1)}function d0(i,t){for(var e=i.suspendedLanes,n=i.pingedLanes,s=i.expirationTimes,a=i.pendingLanes&-62914561;0<a;){var r=31-ne(a),l=1<<r,o=s[r];o===-1?(!(l&e)||l&n)&&(s[r]=kb(l,t)):o<=t&&(i.expiredLanes|=l),a&=~l}if(t=et,e=q,e=Ql(i,i===t?e:0),n=i.callbackNode,e===0||i===t&&tt===2||i.cancelPendingCommit!==null)return n!==null&&n!==null&&uu(n),i.callbackNode=null,i.callbackPriority=0;if(!(e&3)||ka(i,e)){if(t=e&-e,t===i.callbackPriority)return t;switch(n!==null&&uu(n),fg(e)){case 2:case 8:e=lg;break;case 32:e=El;break;case 268435456:e=og;break;default:e=El}return n=f0.bind(null,i),e=Nh(e,n),i.callbackPriority=t,i.callbackNode=e,t}return n!==null&&n!==null&&uu(n),i.callbackPriority=2,i.callbackNode=null,2}function f0(i,t){var e=i.callbackNode;if(es()&&i.callbackNode!==e)return null;var n=q;return n=Ql(i,i===et?n:0),n===0?null:(s0(i,n,t),d0(i,Fe()),i.callbackNode!=null&&i.callbackNode===e?f0.bind(null,i):null)}function Np(i,t){if(es())return null;s0(i,t,!0)}function cA(i){vA(function(){ut&6?Nh(rg,i):i()})}function gd(){return un===0&&(un=cg()),un}function kp(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ul(""+i)}function Ip(i,t){var e=t.ownerDocument.createElement("input");return e.name=t.name,e.value=t.value,i.id&&e.setAttribute("form",i.id),t.parentNode.insertBefore(e,t),i=new FormData(i),e.parentNode.removeChild(e),i}function uA(i,t,e,n,s){if(t==="submit"&&e&&e.stateNode===s){var a=kp((s[$t]||null).action),r=n.submitter;r&&(t=(t=r[$t]||null)?kp(t.formAction):r.getAttribute("formAction"),t!==null&&(a=t,r=null));var l=new $l("action","action",null,n,s);i.push({event:l,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(un!==0){var o=r?Ip(s,r):new FormData(s);sh(e,{pending:!0,data:o,method:s.method,action:a},null,o)}}else typeof a=="function"&&(l.preventDefault(),o=r?Ip(s,r):new FormData(s),sh(e,{pending:!0,data:o,method:s.method,action:a},a,o))},currentTarget:s}]})}}for(sl=0;sl<ip.length;sl++)al=ip[sl],Hp=al.toLowerCase(),zp=al[0].toUpperCase()+al.slice(1),De(Hp,"on"+zp);var al,Hp,zp,sl;De(kg,"onAnimationEnd");De(Ig,"onAnimationIteration");De(Hg,"onAnimationStart");De("dblclick","onDoubleClick");De("focusin","onFocus");De("focusout","onBlur");De(My,"onTransitionRun");De(Dy,"onTransitionStart");De(Ly,"onTransitionCancel");De(zg,"onTransitionEnd");ns("onMouseEnter",["mouseout","mouseover"]);ns("onMouseLeave",["mouseout","mouseover"]);ns("onPointerEnter",["pointerout","pointerover"]);ns("onPointerLeave",["pointerout","pointerover"]);mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mn("onBeforeInput",["compositionend","keypress","textInput","paste"]);mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ta));function p0(i,t){t=(t&4)!==0;for(var e=0;e<i.length;e++){var n=i[e],s=n.event;n=n.listeners;t:{var a=void 0;if(t)for(var r=n.length-1;0<=r;r--){var l=n[r],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==a&&s.isPropagationStopped())break t;a=l,s.currentTarget=c;try{a(s)}catch(u){kl(u)}s.currentTarget=null,a=o}else for(r=0;r<n.length;r++){if(l=n[r],o=l.instance,c=l.currentTarget,l=l.listener,o!==a&&s.isPropagationStopped())break t;a=l,s.currentTarget=c;try{a(s)}catch(u){kl(u)}s.currentTarget=null,a=o}}}}function G(i,t){var e=t[Vu];e===void 0&&(e=t[Vu]=new Set);var n=i+"__bubble";e.has(n)||(g0(t,i,2,!1),e.add(n))}function ku(i,t,e){var n=0;t&&(n|=4),g0(e,i,n,t)}var rl="_reactListening"+Math.random().toString(36).slice(2);function md(i){if(!i[rl]){i[rl]=!0,gg.forEach(function(e){e!=="selectionchange"&&(hA.has(e)||ku(e,!1,i),ku(e,!0,i))});var t=i.nodeType===9?i:i.ownerDocument;t===null||t[rl]||(t[rl]=!0,ku("selectionchange",!1,t))}}function g0(i,t,e,n){switch(C0(t)){case 2:var s=zA;break;case 8:s=BA;break;default:s=Ad}e=s.bind(null,t,e,i),s=void 0,!Qu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?i.addEventListener(t,e,{capture:!0,passive:s}):i.addEventListener(t,e,!0):s!==void 0?i.addEventListener(t,e,{passive:s}):i.addEventListener(t,e,!1)}function Iu(i,t,e,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)t:for(;;){if(n===null)return;var r=n.tag;if(r===3||r===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(r===4)for(r=n.return;r!==null;){var o=r.tag;if((o===3||o===4)&&(o=r.stateNode.containerInfo,o===s||o.nodeType===8&&o.parentNode===s))return;r=r.return}for(;l!==null;){if(r=nn(l),r===null)return;if(o=r.tag,o===5||o===6||o===26||o===27){n=a=r;continue t}l=l.parentNode}}n=n.return}wg(function(){var c=a,u=Hh(e),h=[];t:{var d=Bg.get(i);if(d!==void 0){var f=$l,g=i;switch(i){case"keypress":if(dl(e)===0)break t;case"keydown":case"keyup":f=ry;break;case"focusin":g="focus",f=gu;break;case"focusout":g="blur",f=gu;break;case"beforeblur":case"afterblur":f=gu;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Vf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Kb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=cy;break;case kg:case Ig:case Hg:f=Wb;break;case zg:f=hy;break;case"scroll":case"scrollend":f=Xb;break;case"wheel":f=fy;break;case"copy":case"cut":case"paste":f=Jb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Yf;break;case"toggle":case"beforetoggle":f=gy}var v=(t&4)!==0,A=!v&&(i==="scroll"||i==="scrollend"),p=v?d!==null?d+"Capture":null:d;v=[];for(var m=c,b;m!==null;){var y=m;if(b=y.stateNode,y=y.tag,y!==5&&y!==26&&y!==27||b===null||p===null||(y=Aa(m,p),y!=null&&v.push(Ca(m,y,b))),A)break;m=m.return}0<v.length&&(d=new f(d,g,null,e,u),h.push({event:d,listeners:v}))}}if(!(t&7)){t:{if(d=i==="mouseover"||i==="pointerover",f=i==="mouseout"||i==="pointerout",d&&e!==Ku&&(g=e.relatedTarget||e.fromElement)&&(nn(g)||g[ds]))break t;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(g=e.relatedTarget||e.toElement,f=c,g=g?nn(g):null,g!==null&&(A=hs(g),v=g.tag,g!==A||v!==5&&v!==27&&v!==6)&&(g=null)):(f=null,g=c),f!==g)){if(v=Vf,y="onMouseLeave",p="onMouseEnter",m="mouse",(i==="pointerout"||i==="pointerover")&&(v=Yf,y="onPointerLeave",p="onPointerEnter",m="pointer"),A=f==null?d:ea(f),b=g==null?d:ea(g),d=new v(y,m+"leave",f,e,u),d.target=A,d.relatedTarget=b,y=null,nn(u)===c&&(v=new v(p,m+"enter",g,e,u),v.target=b,v.relatedTarget=A,y=v),A=y,f&&g)e:{for(v=f,p=g,m=0,b=v;b;b=Nn(b))m++;for(b=0,y=p;y;y=Nn(y))b++;for(;0<m-b;)v=Nn(v),m--;for(;0<b-m;)p=Nn(p),b--;for(;m--;){if(v===p||p!==null&&v===p.alternate)break e;v=Nn(v),p=Nn(p)}v=null}else v=null;f!==null&&Bp(h,d,f,v,!1),g!==null&&A!==null&&Bp(h,A,g,v,!0)}}t:{if(d=c?ea(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var _=Wf;else if($f(d))if(Mg)_=xy;else{_=wy;var w=Sy}else f=d.nodeName,!f||f.toLowerCase()!=="input"||d.type!=="checkbox"&&d.type!=="radio"?c&&Ih(c.elementType)&&(_=Wf):_=Ey;if(_&&(_=_(i,c))){Rg(h,_,e,u);break t}w&&w(i,d,c),i==="focusout"&&c&&d.type==="number"&&c.memoizedProps.value!=null&&Yu(d,"number",d.value)}switch(w=c?ea(c):window,i){case"focusin":($f(w)||w.contentEditable==="true")&&(Pn=w,$u=c,aa=null);break;case"focusout":aa=$u=Pn=null;break;case"mousedown":Wu=!0;break;case"contextmenu":case"mouseup":case"dragend":Wu=!1,ep(h,e,u);break;case"selectionchange":if(Ry)break;case"keydown":case"keyup":ep(h,e,u)}var S;if(Uh)t:{switch(i){case"compositionstart":var x="onCompositionStart";break t;case"compositionend":x="onCompositionEnd";break t;case"compositionupdate":x="onCompositionUpdate";break t}x=void 0}else Fn?Tg(i,e)&&(x="onCompositionEnd"):i==="keydown"&&e.keyCode===229&&(x="onCompositionStart");x&&(xg&&e.locale!=="ko"&&(Fn||x!=="onCompositionStart"?x==="onCompositionEnd"&&Fn&&(S=Eg()):(Mi=u,zh="value"in Mi?Mi.value:Mi.textContent,Fn=!0)),w=Gl(c,x),0<w.length&&(x=new Xf(x,i,null,e,u),h.push({event:x,listeners:w}),S?x.data=S:(S=Cg(e),S!==null&&(x.data=S)))),(S=vy?by(i,e):yy(i,e))&&(x=Gl(c,"onBeforeInput"),0<x.length&&(w=new Xf("onBeforeInput","beforeinput",null,e,u),h.push({event:w,listeners:x}),w.data=S)),uA(h,i,c,e,u)}p0(h,t)})}function Ca(i,t,e){return{instance:i,listener:t,currentTarget:e}}function Gl(i,t){for(var e=t+"Capture",n=[];i!==null;){var s=i,a=s.stateNode;s=s.tag,s!==5&&s!==26&&s!==27||a===null||(s=Aa(i,e),s!=null&&n.unshift(Ca(i,s,a)),s=Aa(i,t),s!=null&&n.push(Ca(i,s,a))),i=i.return}return n}function Nn(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Bp(i,t,e,n,s){for(var a=t._reactName,r=[];e!==null&&e!==n;){var l=e,o=l.alternate,c=l.stateNode;if(l=l.tag,o!==null&&o===n)break;l!==5&&l!==26&&l!==27||c===null||(o=c,s?(c=Aa(e,a),c!=null&&r.unshift(Ca(e,c,o))):s||(c=Aa(e,a),c!=null&&r.push(Ca(e,c,o)))),e=e.return}r.length!==0&&i.push({event:t,listeners:r})}var dA=/\r\n?/g,fA=/\u0000|\uFFFD/g;function Up(i){return(typeof i=="string"?i:""+i).replace(dA,`
`).replace(fA,"")}function m0(i,t){return t=Up(t),Up(i)===t}function lo(){}function Q(i,t,e,n,s,a){switch(e){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||ss(i,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&ss(i,""+n);break;case"className":Kr(i,"class",n);break;case"tabIndex":Kr(i,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Kr(i,e,n);break;case"style":Sg(i,n,a);break;case"data":if(t!=="object"){Kr(i,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||e!=="href")){i.removeAttribute(e);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){i.removeAttribute(e);break}n=ul(""+n),i.setAttribute(e,n);break;case"action":case"formAction":if(typeof n=="function"){i.setAttribute(e,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(e==="formAction"?(t!=="input"&&Q(i,t,"name",s.name,s,null),Q(i,t,"formEncType",s.formEncType,s,null),Q(i,t,"formMethod",s.formMethod,s,null),Q(i,t,"formTarget",s.formTarget,s,null)):(Q(i,t,"encType",s.encType,s,null),Q(i,t,"method",s.method,s,null),Q(i,t,"target",s.target,s,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){i.removeAttribute(e);break}n=ul(""+n),i.setAttribute(e,n);break;case"onClick":n!=null&&(i.onclick=lo);break;case"onScroll":n!=null&&G("scroll",i);break;case"onScrollEnd":n!=null&&G("scrollend",i);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(E(61));if(e=n.__html,e!=null){if(s.children!=null)throw Error(E(60));i.innerHTML=e}}break;case"multiple":i.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":i.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){i.removeAttribute("xlink:href");break}e=ul(""+n),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?i.setAttribute(e,""+n):i.removeAttribute(e);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?i.setAttribute(e,""):i.removeAttribute(e);break;case"capture":case"download":n===!0?i.setAttribute(e,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?i.setAttribute(e,n):i.removeAttribute(e);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?i.setAttribute(e,n):i.removeAttribute(e);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?i.removeAttribute(e):i.setAttribute(e,n);break;case"popover":G("beforetoggle",i),G("toggle",i),cl(i,"popover",n);break;case"xlinkActuate":Qe(i,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Qe(i,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Qe(i,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Qe(i,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Qe(i,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Qe(i,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Qe(i,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Qe(i,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Qe(i,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":cl(i,"is",n);break;case"innerText":case"textContent":break;default:(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(e=jb.get(e)||e,cl(i,e,n))}}function wh(i,t,e,n,s,a){switch(e){case"style":Sg(i,n,a);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(E(61));if(e=n.__html,e!=null){if(s.children!=null)throw Error(E(60));i.innerHTML=e}}break;case"children":typeof n=="string"?ss(i,n):(typeof n=="number"||typeof n=="bigint")&&ss(i,""+n);break;case"onScroll":n!=null&&G("scroll",i);break;case"onScrollEnd":n!=null&&G("scrollend",i);break;case"onClick":n!=null&&(i.onclick=lo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mg.hasOwnProperty(e))t:{if(e[0]==="o"&&e[1]==="n"&&(s=e.endsWith("Capture"),t=e.slice(2,s?e.length-7:void 0),a=i[$t]||null,a=a!=null?a[e]:null,typeof a=="function"&&i.removeEventListener(t,a,s),typeof n=="function")){typeof a!="function"&&a!==null&&(e in i?i[e]=null:i.hasAttribute(e)&&i.removeAttribute(e)),i.addEventListener(t,n,s);break t}e in i?i[e]=n:n===!0?i.setAttribute(e,""):cl(i,e,n)}}}function Nt(i,t,e){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":G("error",i),G("load",i);var n=!1,s=!1,a;for(a in e)if(e.hasOwnProperty(a)){var r=e[a];if(r!=null)switch(a){case"src":n=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(E(137,t));default:Q(i,t,a,r,e,null)}}s&&Q(i,t,"srcSet",e.srcSet,e,null),n&&Q(i,t,"src",e.src,e,null);return;case"input":G("invalid",i);var l=a=r=s=null,o=null,c=null;for(n in e)if(e.hasOwnProperty(n)){var u=e[n];if(u!=null)switch(n){case"name":s=u;break;case"type":r=u;break;case"checked":o=u;break;case"defaultChecked":c=u;break;case"value":a=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(E(137,t));break;default:Q(i,t,n,u,e,null)}}yg(i,a,l,o,c,r,s,!1),xl(i);return;case"select":G("invalid",i),n=r=a=null;for(s in e)if(e.hasOwnProperty(s)&&(l=e[s],l!=null))switch(s){case"value":a=l;break;case"defaultValue":r=l;break;case"multiple":n=l;default:Q(i,t,s,l,e,null)}t=a,e=r,i.multiple=!!n,t!=null?Qn(i,!!n,t,!1):e!=null&&Qn(i,!!n,e,!0);return;case"textarea":G("invalid",i),a=s=n=null;for(r in e)if(e.hasOwnProperty(r)&&(l=e[r],l!=null))switch(r){case"value":n=l;break;case"defaultValue":s=l;break;case"children":a=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(E(91));break;default:Q(i,t,r,l,e,null)}_g(i,n,s,a),xl(i);return;case"option":for(o in e)if(e.hasOwnProperty(o)&&(n=e[o],n!=null))switch(o){case"selected":i.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Q(i,t,o,n,e,null)}return;case"dialog":G("cancel",i),G("close",i);break;case"iframe":case"object":G("load",i);break;case"video":case"audio":for(n=0;n<Ta.length;n++)G(Ta[n],i);break;case"image":G("error",i),G("load",i);break;case"details":G("toggle",i);break;case"embed":case"source":case"link":G("error",i),G("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in e)if(e.hasOwnProperty(c)&&(n=e[c],n!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(E(137,t));default:Q(i,t,c,n,e,null)}return;default:if(Ih(t)){for(u in e)e.hasOwnProperty(u)&&(n=e[u],n!==void 0&&wh(i,t,u,n,e,void 0));return}}for(l in e)e.hasOwnProperty(l)&&(n=e[l],n!=null&&Q(i,t,l,n,e,null))}function pA(i,t,e,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,a=null,r=null,l=null,o=null,c=null,u=null;for(f in e){var h=e[f];if(e.hasOwnProperty(f)&&h!=null)switch(f){case"checked":break;case"value":break;case"defaultValue":o=h;default:n.hasOwnProperty(f)||Q(i,t,f,null,n,h)}}for(var d in n){var f=n[d];if(h=e[d],n.hasOwnProperty(d)&&(f!=null||h!=null))switch(d){case"type":a=f;break;case"name":s=f;break;case"checked":c=f;break;case"defaultChecked":u=f;break;case"value":r=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(E(137,t));break;default:f!==h&&Q(i,t,d,f,n,h)}}Xu(i,r,l,o,c,u,a,s);return;case"select":f=r=l=d=null;for(a in e)if(o=e[a],e.hasOwnProperty(a)&&o!=null)switch(a){case"value":break;case"multiple":f=o;default:n.hasOwnProperty(a)||Q(i,t,a,null,n,o)}for(s in n)if(a=n[s],o=e[s],n.hasOwnProperty(s)&&(a!=null||o!=null))switch(s){case"value":d=a;break;case"defaultValue":l=a;break;case"multiple":r=a;default:a!==o&&Q(i,t,s,a,n,o)}t=l,e=r,n=f,d!=null?Qn(i,!!e,d,!1):!!n!=!!e&&(t!=null?Qn(i,!!e,t,!0):Qn(i,!!e,e?[]:"",!1));return;case"textarea":f=d=null;for(l in e)if(s=e[l],e.hasOwnProperty(l)&&s!=null&&!n.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Q(i,t,l,null,n,s)}for(r in n)if(s=n[r],a=e[r],n.hasOwnProperty(r)&&(s!=null||a!=null))switch(r){case"value":d=s;break;case"defaultValue":f=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(E(91));break;default:s!==a&&Q(i,t,r,s,n,a)}Ag(i,d,f);return;case"option":for(var g in e)if(d=e[g],e.hasOwnProperty(g)&&d!=null&&!n.hasOwnProperty(g))switch(g){case"selected":i.selected=!1;break;default:Q(i,t,g,null,n,d)}for(o in n)if(d=n[o],f=e[o],n.hasOwnProperty(o)&&d!==f&&(d!=null||f!=null))switch(o){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Q(i,t,o,d,n,f)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var v in e)d=e[v],e.hasOwnProperty(v)&&d!=null&&!n.hasOwnProperty(v)&&Q(i,t,v,null,n,d);for(c in n)if(d=n[c],f=e[c],n.hasOwnProperty(c)&&d!==f&&(d!=null||f!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(E(137,t));break;default:Q(i,t,c,d,n,f)}return;default:if(Ih(t)){for(var A in e)d=e[A],e.hasOwnProperty(A)&&d!==void 0&&!n.hasOwnProperty(A)&&wh(i,t,A,void 0,n,d);for(u in n)d=n[u],f=e[u],!n.hasOwnProperty(u)||d===f||d===void 0&&f===void 0||wh(i,t,u,d,n,f);return}}for(var p in e)d=e[p],e.hasOwnProperty(p)&&d!=null&&!n.hasOwnProperty(p)&&Q(i,t,p,null,n,d);for(h in n)d=n[h],f=e[h],!n.hasOwnProperty(h)||d===f||d==null&&f==null||Q(i,t,h,d,n,f)}var Eh=null,xh=null;function ql(i){return i.nodeType===9?i:i.ownerDocument}function Fp(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function v0(i,t){if(i===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&t==="foreignObject"?0:i}function Th(i,t){return i==="textarea"||i==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hu=null;function gA(){var i=window.event;return i&&i.type==="popstate"?i===Hu?!1:(Hu=i,!0):(Hu=null,!1)}var b0=typeof setTimeout=="function"?setTimeout:void 0,mA=typeof clearTimeout=="function"?clearTimeout:void 0,Pp=typeof Promise=="function"?Promise:void 0,vA=typeof queueMicrotask=="function"?queueMicrotask:typeof Pp<"u"?function(i){return Pp.resolve(null).then(i).catch(bA)}:b0;function bA(i){setTimeout(function(){throw i})}function zu(i,t){var e=t,n=0;do{var s=e.nextSibling;if(i.removeChild(e),s&&s.nodeType===8)if(e=s.data,e==="/$"){if(n===0){i.removeChild(s),Oa(t);return}n--}else e!=="$"&&e!=="$?"&&e!=="$!"||n++;e=s}while(e);Oa(t)}function Ch(i){var t=i.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var e=t;switch(t=t.nextSibling,e.nodeName){case"HTML":case"HEAD":case"BODY":Ch(e),kh(e);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(e.rel.toLowerCase()==="stylesheet")continue}i.removeChild(e)}}function yA(i,t,e,n){for(;i.nodeType===1;){var s=e;if(i.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(n){if(!i[ya])switch(t){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(a=i.getAttribute("rel"),a==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(a!==s.rel||i.getAttribute("href")!==(s.href==null?null:s.href)||i.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||i.getAttribute("title")!==(s.title==null?null:s.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(a=i.getAttribute("src"),(a!==(s.src==null?null:s.src)||i.getAttribute("type")!==(s.type==null?null:s.type)||i.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&a&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(t==="input"&&i.type==="hidden"){var a=s.name==null?null:""+s.name;if(s.type==="hidden"&&i.getAttribute("name")===a)return i}else return i;if(i=Me(i.nextSibling),i===null)break}return null}function AA(i,t,e){if(t==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!e||(i=Me(i.nextSibling),i===null))return null;return i}function Me(i){for(;i!=null;i=i.nextSibling){var t=i.nodeType;if(t===1||t===3)break;if(t===8){if(t=i.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return i}function Gp(i){i=i.previousSibling;for(var t=0;i;){if(i.nodeType===8){var e=i.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return i;t--}else e==="/$"&&t++}i=i.previousSibling}return null}function y0(i,t,e){switch(t=ql(e),i){case"html":if(i=t.documentElement,!i)throw Error(E(452));return i;case"head":if(i=t.head,!i)throw Error(E(453));return i;case"body":if(i=t.body,!i)throw Error(E(454));return i;default:throw Error(E(451))}}var _e=new Map,qp=new Set;function jl(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var di=it.d;it.d={f:_A,r:SA,D:wA,C:EA,L:xA,m:TA,X:RA,S:CA,M:MA};function _A(){var i=di.f(),t=ao();return i||t}function SA(i){var t=fs(i);t!==null&&t.tag===5&&t.type==="form"?ym(t):di.r(i)}var gs=typeof document>"u"?null:document;function A0(i,t,e){var n=gs;if(n&&typeof t=="string"&&t){var s=me(t);s='link[rel="'+i+'"][href="'+s+'"]',typeof e=="string"&&(s+='[crossorigin="'+e+'"]'),qp.has(s)||(qp.add(s),i={rel:i,crossOrigin:e,href:t},n.querySelector(s)===null&&(t=n.createElement("link"),Nt(t,"link",i),Ct(t),n.head.appendChild(t)))}}function wA(i){di.D(i),A0("dns-prefetch",i,null)}function EA(i,t){di.C(i,t),A0("preconnect",i,t)}function xA(i,t,e){di.L(i,t,e);var n=gs;if(n&&i&&t){var s='link[rel="preload"][as="'+me(t)+'"]';t==="image"&&e&&e.imageSrcSet?(s+='[imagesrcset="'+me(e.imageSrcSet)+'"]',typeof e.imageSizes=="string"&&(s+='[imagesizes="'+me(e.imageSizes)+'"]')):s+='[href="'+me(i)+'"]';var a=s;switch(t){case"style":a=us(i);break;case"script":a=ms(i)}_e.has(a)||(i=nt({rel:"preload",href:t==="image"&&e&&e.imageSrcSet?void 0:i,as:t},e),_e.set(a,i),n.querySelector(s)!==null||t==="style"&&n.querySelector(qa(a))||t==="script"&&n.querySelector(ja(a))||(t=n.createElement("link"),Nt(t,"link",i),Ct(t),n.head.appendChild(t)))}}function TA(i,t){di.m(i,t);var e=gs;if(e&&i){var n=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+me(n)+'"][href="'+me(i)+'"]',a=s;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=ms(i)}if(!_e.has(a)&&(i=nt({rel:"modulepreload",href:i},t),_e.set(a,i),e.querySelector(s)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(e.querySelector(ja(a)))return}n=e.createElement("link"),Nt(n,"link",i),Ct(n),e.head.appendChild(n)}}}function CA(i,t,e){di.S(i,t,e);var n=gs;if(n&&i){var s=Kn(n).hoistableStyles,a=us(i);t=t||"default";var r=s.get(a);if(!r){var l={loading:0,preload:null};if(r=n.querySelector(qa(a)))l.loading=5;else{i=nt({rel:"stylesheet",href:i,"data-precedence":t},e),(e=_e.get(a))&&vd(i,e);var o=r=n.createElement("link");Ct(o),Nt(o,"link",i),o._p=new Promise(function(c,u){o.onload=c,o.onerror=u}),o.addEventListener("load",function(){l.loading|=1}),o.addEventListener("error",function(){l.loading|=2}),l.loading|=4,bl(r,t,n)}r={type:"stylesheet",instance:r,count:1,state:l},s.set(a,r)}}}function RA(i,t){di.X(i,t);var e=gs;if(e&&i){var n=Kn(e).hoistableScripts,s=ms(i),a=n.get(s);a||(a=e.querySelector(ja(s)),a||(i=nt({src:i,async:!0},t),(t=_e.get(s))&&bd(i,t),a=e.createElement("script"),Ct(a),Nt(a,"link",i),e.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},n.set(s,a))}}function MA(i,t){di.M(i,t);var e=gs;if(e&&i){var n=Kn(e).hoistableScripts,s=ms(i),a=n.get(s);a||(a=e.querySelector(ja(s)),a||(i=nt({src:i,async:!0,type:"module"},t),(t=_e.get(s))&&bd(i,t),a=e.createElement("script"),Ct(a),Nt(a,"link",i),e.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},n.set(s,a))}}function jp(i,t,e,n){var s=(s=Di.current)?jl(s):null;if(!s)throw Error(E(446));switch(i){case"meta":case"title":return null;case"style":return typeof e.precedence=="string"&&typeof e.href=="string"?(t=us(e.href),e=Kn(s).hoistableStyles,n=e.get(t),n||(n={type:"style",instance:null,count:0,state:null},e.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(e.rel==="stylesheet"&&typeof e.href=="string"&&typeof e.precedence=="string"){i=us(e.href);var a=Kn(s).hoistableStyles,r=a.get(i);if(r||(s=s.ownerDocument||s,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(i,r),(a=s.querySelector(qa(i)))&&!a._p&&(r.instance=a,r.state.loading=5),_e.has(i)||(e={rel:"preload",as:"style",href:e.href,crossOrigin:e.crossOrigin,integrity:e.integrity,media:e.media,hrefLang:e.hrefLang,referrerPolicy:e.referrerPolicy},_e.set(i,e),a||DA(s,i,e,r.state))),t&&n===null)throw Error(E(528,""));return r}if(t&&n!==null)throw Error(E(529,""));return null;case"script":return t=e.async,e=e.src,typeof e=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ms(e),e=Kn(s).hoistableScripts,n=e.get(t),n||(n={type:"script",instance:null,count:0,state:null},e.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(E(444,i))}}function us(i){return'href="'+me(i)+'"'}function qa(i){return'link[rel="stylesheet"]['+i+"]"}function _0(i){return nt({},i,{"data-precedence":i.precedence,precedence:null})}function DA(i,t,e,n){i.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=i.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),Nt(t,"link",e),Ct(t),i.head.appendChild(t))}function ms(i){return'[src="'+me(i)+'"]'}function ja(i){return"script[async]"+i}function Vp(i,t,e){if(t.count++,t.instance===null)switch(t.type){case"style":var n=i.querySelector('style[data-href~="'+me(e.href)+'"]');if(n)return t.instance=n,Ct(n),n;var s=nt({},e,{"data-href":e.href,"data-precedence":e.precedence,href:null,precedence:null});return n=(i.ownerDocument||i).createElement("style"),Ct(n),Nt(n,"style",s),bl(n,e.precedence,i),t.instance=n;case"stylesheet":s=us(e.href);var a=i.querySelector(qa(s));if(a)return t.state.loading|=4,t.instance=a,Ct(a),a;n=_0(e),(s=_e.get(s))&&vd(n,s),a=(i.ownerDocument||i).createElement("link"),Ct(a);var r=a;return r._p=new Promise(function(l,o){r.onload=l,r.onerror=o}),Nt(a,"link",n),t.state.loading|=4,bl(a,e.precedence,i),t.instance=a;case"script":return a=ms(e.src),(s=i.querySelector(ja(a)))?(t.instance=s,Ct(s),s):(n=e,(s=_e.get(a))&&(n=nt({},e),bd(n,s)),i=i.ownerDocument||i,s=i.createElement("script"),Ct(s),Nt(s,"link",n),i.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(E(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(n=t.instance,t.state.loading|=4,bl(n,e.precedence,i));return t.instance}function bl(i,t,e){for(var n=e.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=n.length?n[n.length-1]:null,a=s,r=0;r<n.length;r++){var l=n[r];if(l.dataset.precedence===t)a=l;else if(a!==s)break}a?a.parentNode.insertBefore(i,a.nextSibling):(t=e.nodeType===9?e.head:e,t.insertBefore(i,t.firstChild))}function vd(i,t){i.crossOrigin==null&&(i.crossOrigin=t.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=t.referrerPolicy),i.title==null&&(i.title=t.title)}function bd(i,t){i.crossOrigin==null&&(i.crossOrigin=t.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=t.referrerPolicy),i.integrity==null&&(i.integrity=t.integrity)}var yl=null;function Xp(i,t,e){if(yl===null){var n=new Map,s=yl=new Map;s.set(e,n)}else s=yl,n=s.get(e),n||(n=new Map,s.set(e,n));if(n.has(i))return n;for(n.set(i,null),e=e.getElementsByTagName(i),s=0;s<e.length;s++){var a=e[s];if(!(a[ya]||a[Bt]||i==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var r=a.getAttribute(t)||"";r=i+r;var l=n.get(r);l?l.push(a):n.set(r,[a])}}return n}function Yp(i,t,e){i=i.ownerDocument||i,i.head.insertBefore(e,t==="title"?i.querySelector("head > title"):null)}function LA(i,t,e){if(e===1||t.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return i=t.disabled,typeof t.precedence=="string"&&i==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function S0(i){return!(i.type==="stylesheet"&&!(i.state.loading&3))}var Ra=null;function OA(){}function NA(i,t,e){if(Ra===null)throw Error(E(475));var n=Ra;if(t.type==="stylesheet"&&(typeof e.media!="string"||matchMedia(e.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var s=us(e.href),a=i.querySelector(qa(s));if(a){i=a._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Vl.bind(n),i.then(n,n)),t.state.loading|=4,t.instance=a,Ct(a);return}a=i.ownerDocument||i,e=_0(e),(s=_e.get(s))&&vd(e,s),a=a.createElement("link"),Ct(a);var r=a;r._p=new Promise(function(l,o){r.onload=l,r.onerror=o}),Nt(a,"link",e),t.instance=a}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(t,i),(i=t.state.preload)&&!(t.state.loading&3)&&(n.count++,t=Vl.bind(n),i.addEventListener("load",t),i.addEventListener("error",t))}}function kA(){if(Ra===null)throw Error(E(475));var i=Ra;return i.stylesheets&&i.count===0&&Rh(i,i.stylesheets),0<i.count?function(t){var e=setTimeout(function(){if(i.stylesheets&&Rh(i,i.stylesheets),i.unsuspend){var n=i.unsuspend;i.unsuspend=null,n()}},6e4);return i.unsuspend=t,function(){i.unsuspend=null,clearTimeout(e)}}:null}function Vl(){if(this.count--,this.count===0){if(this.stylesheets)Rh(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Xl=null;function Rh(i,t){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Xl=new Map,t.forEach(IA,i),Xl=null,Vl.call(i))}function IA(i,t){if(!(t.state.loading&4)){var e=Xl.get(i);if(e)var n=e.get(null);else{e=new Map,Xl.set(i,e);for(var s=i.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<s.length;a++){var r=s[a];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(e.set(r.dataset.precedence,r),n=r)}n&&e.set(null,n)}s=t.instance,r=s.getAttribute("data-precedence"),a=e.get(r)||n,a===n&&e.set(null,s),e.set(r,s),this.count++,n=Vl.bind(this),s.addEventListener("load",n),s.addEventListener("error",n),a?a.parentNode.insertBefore(s,a.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(s,i.firstChild)),t.state.loading|=4}}var Ma={$$typeof:ii,Provider:null,Consumer:null,_currentValue:an,_currentValue2:an,_threadCount:0};function HA(i,t,e,n,s,a,r,l){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hu(0),this.hiddenUpdates=hu(null),this.identifierPrefix=n,this.onUncaughtError=s,this.onCaughtError=a,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function w0(i,t,e,n,s,a,r,l,o,c,u,h){return i=new HA(i,t,e,r,l,o,c,h),t=1,a===!0&&(t|=24),a=be(3,null,null,t),i.current=a,a.stateNode=i,t=Xh(),t.refCount++,i.pooledCache=t,t.refCount++,a.memoizedState={element:n,isDehydrated:e,cache:t},ld(a),i}function E0(i){return i?(i=jn,i):jn}function x0(i,t,e,n,s,a){s=E0(s),n.context===null?n.context=s:n.pendingContext=s,n=Li(t),n.payload={element:e},a=a===void 0?null:a,a!==null&&(n.callback=a),e=Oi(i,n,t),e!==null&&(Vt(e,i,t),ha(e,i,t))}function Kp(i,t){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var e=i.retryLane;i.retryLane=e!==0&&e<t?e:t}}function yd(i,t){Kp(i,t),(i=i.alternate)&&Kp(i,t)}function T0(i){if(i.tag===13){var t=Bi(i,67108864);t!==null&&Vt(t,i,67108864),yd(i,67108864)}}var Yl=!0;function zA(i,t,e,n){var s=k.T;k.T=null;var a=it.p;try{it.p=2,Ad(i,t,e,n)}finally{it.p=a,k.T=s}}function BA(i,t,e,n){var s=k.T;k.T=null;var a=it.p;try{it.p=8,Ad(i,t,e,n)}finally{it.p=a,k.T=s}}function Ad(i,t,e,n){if(Yl){var s=Mh(n);if(s===null)Iu(i,t,n,Kl,e),Qp(i,n);else if(FA(s,i,t,e,n))n.stopPropagation();else if(Qp(i,n),t&4&&-1<UA.indexOf(i)){for(;s!==null;){var a=fs(s);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var r=Ji(a.pendingLanes);if(r!==0){var l=a;for(l.pendingLanes|=2,l.entangledLanes|=2;r;){var o=1<<31-ne(r);l.entanglements[1]|=o,r&=~o}je(a),!(ut&6)&&(Bl=Fe()+500,Ga(0,!1))}}break;case 13:l=Bi(a,2),l!==null&&Vt(l,a,2),ao(),yd(a,2)}if(a=Mh(n),a===null&&Iu(i,t,n,Kl,e),a===s)break;s=a}s!==null&&n.stopPropagation()}else Iu(i,t,n,null,e)}}function Mh(i){return i=Hh(i),_d(i)}var Kl=null;function _d(i){if(Kl=null,i=nn(i),i!==null){var t=hs(i);if(t===null)i=null;else{var e=t.tag;if(e===13){if(i=sg(t),i!==null)return i;i=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;i=null}else t!==i&&(i=null)}}return Kl=i,null}function C0(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Tb()){case rg:return 2;case lg:return 8;case El:case Cb:return 32;case og:return 268435456;default:return 32}default:return 32}}var Dh=!1,Ii=null,Hi=null,zi=null,Da=new Map,La=new Map,Ci=[],UA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qp(i,t){switch(i){case"focusin":case"focusout":Ii=null;break;case"dragenter":case"dragleave":Hi=null;break;case"mouseover":case"mouseout":zi=null;break;case"pointerover":case"pointerout":Da.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":La.delete(t.pointerId)}}function $s(i,t,e,n,s,a){return i===null||i.nativeEvent!==a?(i={blockedOn:t,domEventName:e,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=fs(t),t!==null&&T0(t)),i):(i.eventSystemFlags|=n,t=i.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),i)}function FA(i,t,e,n,s){switch(t){case"focusin":return Ii=$s(Ii,i,t,e,n,s),!0;case"dragenter":return Hi=$s(Hi,i,t,e,n,s),!0;case"mouseover":return zi=$s(zi,i,t,e,n,s),!0;case"pointerover":var a=s.pointerId;return Da.set(a,$s(Da.get(a)||null,i,t,e,n,s)),!0;case"gotpointercapture":return a=s.pointerId,La.set(a,$s(La.get(a)||null,i,t,e,n,s)),!0}return!1}function R0(i){var t=nn(i.target);if(t!==null){var e=hs(t);if(e!==null){if(t=e.tag,t===13){if(t=sg(e),t!==null){i.blockedOn=t,Hb(i.priority,function(){if(e.tag===13){var n=se(),s=Bi(e,n);s!==null&&Vt(s,e,n),yd(e,n)}});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){i.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Al(i){if(i.blockedOn!==null)return!1;for(var t=i.targetContainers;0<t.length;){var e=Mh(i.nativeEvent);if(e===null){e=i.nativeEvent;var n=new e.constructor(e.type,e);Ku=n,e.target.dispatchEvent(n),Ku=null}else return t=fs(e),t!==null&&T0(t),i.blockedOn=e,!1;t.shift()}return!0}function $p(i,t,e){Al(i)&&e.delete(t)}function PA(){Dh=!1,Ii!==null&&Al(Ii)&&(Ii=null),Hi!==null&&Al(Hi)&&(Hi=null),zi!==null&&Al(zi)&&(zi=null),Da.forEach($p),La.forEach($p)}function ll(i,t){i.blockedOn===t&&(i.blockedOn=null,Dh||(Dh=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,PA)))}var ol=null;function Wp(i){ol!==i&&(ol=i,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,function(){ol===i&&(ol=null);for(var t=0;t<i.length;t+=3){var e=i[t],n=i[t+1],s=i[t+2];if(typeof n!="function"){if(_d(n||e)===null)continue;break}var a=fs(e);a!==null&&(i.splice(t,3),t-=3,sh(a,{pending:!0,data:s,method:e.method,action:n},n,s))}}))}function Oa(i){function t(o){return ll(o,i)}Ii!==null&&ll(Ii,i),Hi!==null&&ll(Hi,i),zi!==null&&ll(zi,i),Da.forEach(t),La.forEach(t);for(var e=0;e<Ci.length;e++){var n=Ci[e];n.blockedOn===i&&(n.blockedOn=null)}for(;0<Ci.length&&(e=Ci[0],e.blockedOn===null);)R0(e),e.blockedOn===null&&Ci.shift();if(e=(i.ownerDocument||i).$$reactFormReplay,e!=null)for(n=0;n<e.length;n+=3){var s=e[n],a=e[n+1],r=s[$t]||null;if(typeof a=="function")r||Wp(e);else if(r){var l=null;if(a&&a.hasAttribute("formAction")){if(s=a,r=a[$t]||null)l=r.formAction;else if(_d(s)!==null)continue}else l=r.action;typeof l=="function"?e[n+1]=l:(e.splice(n,3),n-=3),Wp(e)}}}function Sd(i){this._internalRoot=i}oo.prototype.render=Sd.prototype.render=function(i){var t=this._internalRoot;if(t===null)throw Error(E(409));var e=t.current,n=se();x0(e,n,i,t,null,null)};oo.prototype.unmount=Sd.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var t=i.containerInfo;i.tag===0&&es(),x0(i.current,2,null,i,null,null),ao(),t[ds]=null}};function oo(i){this._internalRoot=i}oo.prototype.unstable_scheduleHydration=function(i){if(i){var t=pg();i={blockedOn:null,target:i,priority:t};for(var e=0;e<Ci.length&&t!==0&&t<Ci[e].priority;e++);Ci.splice(e,0,i),e===0&&R0(i)}};var Zp=Jp.version;if(Zp!=="19.0.0")throw Error(E(527,Zp,"19.0.0"));it.findDOMNode=function(i){var t=i._reactInternals;if(t===void 0)throw typeof i.render=="function"?Error(E(188)):(i=Object.keys(i).join(","),Error(E(268,i)));return i=wb(t),i=i!==null?ag(i):null,i=i===null?null:i.stateNode,i};var GA={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:k,findFiberByHostInstance:nn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(Ws=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Ws.isDisabled&&Ws.supportsFiber))try{Na=Ws.inject(GA),ie=Ws}catch{}var Ws;co.createRoot=function(i,t){if(!tg(i))throw Error(E(299));var e=!1,n="",s=xm,a=Tm,r=Cm,l=null;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=w0(i,1,!1,null,null,e,n,s,a,r,l,null),i[ds]=t.current,md(i.nodeType===8?i.parentNode:i),new Sd(t)};co.hydrateRoot=function(i,t,e){if(!tg(i))throw Error(E(299));var n=!1,s="",a=xm,r=Tm,l=Cm,o=null,c=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(a=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(l=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(o=e.unstable_transitionCallbacks),e.formState!==void 0&&(c=e.formState)),t=w0(i,1,!0,t,e??null,n,s,a,r,l,o,c),t.context=E0(null),e=t.current,n=se(),s=Li(n),s.callback=null,Oi(e,s,n),t.current.lanes=n,Ia(t,n),je(t),i[ds]=t.current,md(i),new oo(t)};co.version="19.0.0"});var O0=Ne((J1,L0)=>{"use strict";function D0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D0)}catch(i){console.error(i)}}D0(),L0.exports=M0()});var q0=Ne(go=>{"use strict";var KA=Symbol.for("react.transitional.element"),QA=Symbol.for("react.fragment");function G0(i,t,e){var n=null;if(e!==void 0&&(n=""+e),t.key!==void 0&&(n=""+t.key),"key"in t){e={};for(var s in t)s!=="key"&&(e[s]=t[s])}else e=t;return t=e.ref,{$$typeof:KA,type:i,key:n,ref:t!==void 0?t:null,props:e}}go.Fragment=QA;go.jsx=G0;go.jsxs=G0});var Md=Ne((r_,j0)=>{"use strict";j0.exports=q0()});(function(i,t,e,n,s,a,r){i[e]=i[e]||function(){(i[e].q=i[e].q||[]).push(arguments)},a=t.createElement(n),a.async=1,a.src="https://www.clarity.ms/tag/"+s,r=t.getElementsByTagName(n)[0],r.parentNode.insertBefore(a,r)})(window,document,"clarity","script","pac0u1emft");var Tn=bs(ys(),1);function mv({title:i,titleId:t,...e},n){return Tn.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},e),i?Tn.createElement("title",{id:t},i):null,Tn.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}var vv=Tn.forwardRef(mv),So=vv;var Es={};Es.d=(i,t)=>{for(var e in t)Es.o(t,e)&&!Es.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:t[e]})};Es.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t);var N=globalThis.pdfjsLib={};Es.d(N,{AbortException:()=>Ye,AnnotationEditorLayer:()=>Kc,AnnotationEditorParamsType:()=>P,AnnotationEditorType:()=>I,AnnotationEditorUIManager:()=>Qi,AnnotationLayer:()=>Bc,AnnotationMode:()=>pi,ColorPicker:()=>Rr,DOMSVGFactory:()=>ks,DrawLayer:()=>Qc,FeatureTest:()=>Dt,GlobalWorkerOptions:()=>Vi,ImageKind:()=>tr,InvalidPDFException:()=>er,MissingPDFException:()=>Xi,OPS:()=>we,OutputScale:()=>Ms,PDFDataRangeTransport:()=>mr,PDFDateString:()=>nr,PDFWorker:()=>Mn,PasswordResponses:()=>Sv,PermissionFlag:()=>_v,PixelsPerInch:()=>mi,RenderingCancelledException:()=>Rs,TextLayer:()=>Os,UnexpectedResponseException:()=>Dn,Util:()=>M,VerbosityLevel:()=>Lr,XfaLayer:()=>yr,build:()=>ub,createValidAbsoluteUrl:()=>Tv,fetchData:()=>Ir,getDocument:()=>rb,getFilenameFromUrl:()=>kv,getPdfFilenameFromUrl:()=>Iv,getXfaPageViewport:()=>Hv,isDataScheme:()=>Hr,isPdfFile:()=>Zc,noContextMenu:()=>xe,normalizeUnicode:()=>Lv,setLayerDimensions:()=>Yi,shadow:()=>U,stopEvent:()=>Ee,version:()=>cb});var Pt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),lf=[1,0,0,1,0,0],Ro=[.001,0,0,.001,0,0],bv=1e7,Ja=1.35,yv=.35,a1=yv/Ja,Zt={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},pi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Av="pdfjs_internal_editor_",I={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},P={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},_v={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},It={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},tr={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},St={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var As={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var Lr={ERRORS:0,WARNINGS:1,INFOS:5},we={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Sv={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Or=Lr.WARNINGS;function wv(i){Number.isInteger(i)&&(Or=i)}function Ev(){return Or}function Nr(i){Or>=Lr.INFOS&&console.log(`Info: ${i}`)}function z(i){Or>=Lr.WARNINGS&&console.log(`Warning: ${i}`)}function K(i){throw new Error(i)}function mt(i,t){i||K(t)}function xv(i){switch(i?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Tv(i,t=null,e=null){if(!i)return null;try{if(e&&typeof i=="string"&&(e.addDefaultProtocol&&i.startsWith("www.")&&i.match(/\./g)?.length>=2&&(i=`http://${i}`),e.tryConvertEncoding))try{i=Dv(i)}catch{}let n=t?new URL(i,t):new URL(i);if(xv(n))return n}catch{}return null}function U(i,t,e,n=!1){return Object.defineProperty(i,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}var vi=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}(),xs=class extends vi{constructor(t,e){super(t,"PasswordException"),this.code=e}},Ts=class extends vi{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},er=class extends vi{constructor(t){super(t,"InvalidPDFException")}},Xi=class extends vi{constructor(t){super(t,"MissingPDFException")}},Dn=class extends vi{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}},Mo=class extends vi{constructor(t){super(t,"FormatError")}},Ye=class extends vi{constructor(t){super(t,"AbortException")}};function of(i){(typeof i!="object"||i?.length===void 0)&&K("Invalid argument for bytesToString");let t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);let n=[];for(let s=0;s<t;s+=e){let a=Math.min(s+e,t),r=i.subarray(s,a);n.push(String.fromCharCode.apply(null,r))}return n.join("")}function kr(i){typeof i!="string"&&K("Invalid argument for stringToBytes");let t=i.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=i.charCodeAt(n)&255;return e}function Cv(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function $c(i){let t=Object.create(null);for(let[e,n]of i)t[e]=n;return t}function Rv(){let i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function Mv(){try{return new Function(""),!0}catch{return!1}}var Dt=class{static get isLittleEndian(){return U(this,"isLittleEndian",Rv())}static get isEvalSupported(){return U(this,"isEvalSupported",Mv())}static get isOffscreenCanvasSupported(){return U(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return U(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?U(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):U(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return U(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}},wo=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0")),M=class{static makeHexColor(t,e,n){return`#${wo[t]}${wo[e]}${wo[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){let n=t[0]*e[0]+t[1]*e[2]+e[4],s=t[0]*e[1]+t[1]*e[3]+e[5];return[n,s]}static applyInverseTransform(t,e){let n=e[0]*e[3]-e[1]*e[2],s=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,a=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[s,a]}static getAxialAlignedBoundingBox(t,e){let n=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),a=this.applyTransform([t[0],t[3]],e),r=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],s[0],a[0],r[0]),Math.min(n[1],s[1],a[1],r[1]),Math.max(n[0],s[0],a[0],r[0]),Math.max(n[1],s[1],a[1],r[1])]}static inverseTransform(t){let e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){let e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],a=t[2]*e[0]+t[3]*e[2],r=t[2]*e[1]+t[3]*e[3],l=(n+r)/2,o=Math.sqrt((n+r)**2-4*(n*r-a*s))/2,c=l+o||1,u=l-o||1;return[Math.sqrt(c),Math.sqrt(u)]}static normalizeRect(t){let e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){let n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;let a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>r?null:[n,a,s,r]}static#t(t,e,n,s,a,r,l,o,c,u){if(c<=0||c>=1)return;let h=1-c,d=c*c,f=d*c,g=h*(h*(h*t+3*c*e)+3*d*n)+f*s,v=h*(h*(h*a+3*c*r)+3*d*l)+f*o;u[0]=Math.min(u[0],g),u[1]=Math.min(u[1],v),u[2]=Math.max(u[2],g),u[3]=Math.max(u[3],v)}static#e(t,e,n,s,a,r,l,o,c,u,h,d){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&this.#t(t,e,n,s,a,r,l,o,-h/u,d);return}let f=u**2-4*h*c;if(f<0)return;let g=Math.sqrt(f),v=2*c;this.#t(t,e,n,s,a,r,l,o,(-u+g)/v,d),this.#t(t,e,n,s,a,r,l,o,(-u-g)/v,d)}static bezierBoundingBox(t,e,n,s,a,r,l,o,c){return c?(c[0]=Math.min(c[0],t,l),c[1]=Math.min(c[1],e,o),c[2]=Math.max(c[2],t,l),c[3]=Math.max(c[3],e,o)):c=[Math.min(t,l),Math.min(e,o),Math.max(t,l),Math.max(e,o)],this.#e(t,n,a,l,e,s,r,o,3*(-t+3*(n-a)+l),6*(t-2*n+a),3*(n-t),c),this.#e(t,n,a,l,e,s,r,o,3*(-e+3*(s-r)+o),6*(e-2*s+r),3*(s-e),c),c}};function Dv(i){return decodeURIComponent(escape(i))}var Eo=null,Vd=null;function Lv(i){return Eo||(Eo=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Vd=new Map([["\uFB05","\u017Ft"]])),i.replaceAll(Eo,(t,e,n)=>e?e.normalize("NFKC"):Vd.get(n))}function Ov(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();let i=new Uint8Array(32);return crypto.getRandomValues(i),of(i)}var Wc="pdfjs_internal_id_",Ve={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function Nv(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(of(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...t){return new Promise(e=>{e(i(...t))})});var Xe="http://www.w3.org/2000/svg",mi=class{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF};async function Ir(i,t="text"){if(ws(i,document.baseURI)){let e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{let s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}var Cs=class i{constructor({viewBox:t,scale:e,rotation:n,offsetX:s=0,offsetY:a=0,dontFlip:r=!1}){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=s,this.offsetY=a;let l=(t[2]+t[0])/2,o=(t[3]+t[1])/2,c,u,h,d;switch(n%=360,n<0&&(n+=360),n){case 180:c=-1,u=0,h=0,d=1;break;case 90:c=0,u=1,h=1,d=0;break;case 270:c=0,u=-1,h=-1,d=0;break;case 0:c=1,u=0,h=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}r&&(h=-h,d=-d);let f,g,v,A;c===0?(f=Math.abs(o-t[1])*e+s,g=Math.abs(l-t[0])*e+a,v=(t[3]-t[1])*e,A=(t[2]-t[0])*e):(f=Math.abs(l-t[0])*e+s,g=Math.abs(o-t[1])*e+a,v=(t[2]-t[0])*e,A=(t[3]-t[1])*e),this.transform=[c*e,u*e,h*e,d*e,f-c*e*l-h*e*o,g-u*e*l-d*e*o],this.width=v,this.height=A}get rawDims(){let{viewBox:t}=this;return U(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:a=!1}={}){return new i({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:a})}convertToViewportPoint(t,e){return M.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){let e=M.applyTransform([t[0],t[1]],this.transform),n=M.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return M.applyInverseTransform([t,e],this.transform)}},Rs=class extends vi{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}};function Hr(i){let t=i.length,e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function Zc(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function kv(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function Iv(i,t="document.pdf"){if(typeof i!="string")return t;if(Hr(i))return z('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;let e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=e.exec(i),a=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(a&&(a=a[0],a.includes("%")))try{a=n.exec(decodeURIComponent(a))[0]}catch{}return a||t}var ir=class{started=Object.create(null);times=[];time(t){t in this.started&&z(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||z(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){let t=[],e=0;for(let{name:n}of this.times)e=Math.max(n.length,e);for(let{name:n,start:s,end:a}of this.times)t.push(`${n.padEnd(e)} ${a-s}ms
`);return t.join("")}};function ws(i,t){try{let{protocol:e}=t?new URL(i,t):new URL(i);return e==="http:"||e==="https:"}catch{return!1}}function xe(i){i.preventDefault()}function Ee(i){i.preventDefault(),i.stopPropagation()}function Xd(i){console.log("Deprecated API usage: "+i)}var nr=class{static#t;static toDateObject(t){if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let e=this.#t.exec(t);if(!e)return null;let n=parseInt(e[1],10),s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let r=parseInt(e[4],10);r=r>=0&&r<=23?r:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let o=parseInt(e[6],10);o=o>=0&&o<=59?o:0;let c=e[7]||"Z",u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let h=parseInt(e[9],10)||0;return h=h>=0&&h<=59?h:0,c==="-"?(r+=u,l+=h):c==="+"&&(r-=u,l-=h),new Date(Date.UTC(n,s,a,r,l,o))}};function Hv(i,{scale:t=1,rotation:e=0}){let{width:n,height:s}=i.attributes.style,a=[0,0,parseInt(n),parseInt(s)];return new Cs({viewBox:a,scale:t,rotation:e})}function Jc(i){if(i.startsWith("#")){let t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(z(`Not a valid color format: "${i}"`),[0,0,0])}function zv(i){let t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(let e of i.keys()){t.style.color=e;let n=window.getComputedStyle(t).color;i.set(e,Jc(n))}t.remove()}function at(i){let{a:t,b:e,c:n,d:s,e:a,f:r}=i.getTransform();return[t,e,n,s,a,r]}function ke(i){let{a:t,b:e,c:n,d:s,e:a,f:r}=i.getTransform().invertSelf();return[t,e,n,s,a,r]}function Yi(i,t,e=!1,n=!0){if(t instanceof Cs){let{pageWidth:s,pageHeight:a}=t.rawDims,{style:r}=i,l=Dt.isCSSRoundSupported,o=`var(--scale-factor) * ${s}px`,c=`var(--scale-factor) * ${a}px`,u=l?`round(down, ${o}, var(--scale-round-x, 1px))`:`calc(${o})`,h=l?`round(down, ${c}, var(--scale-round-y, 1px))`:`calc(${c})`;!e||t.rotation%180===0?(r.width=u,r.height=h):(r.width=h,r.height=u)}n&&i.setAttribute("data-main-rotation",t.rotation)}var Ms=class{constructor(){let t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}},Do=class i{#t=null;#e=null;#i;#n=null;#a=null;static#s=null;constructor(t){this.#i=t,i.#s||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){let t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");let e=this.#i._uiManager._signal;t.addEventListener("contextmenu",xe,{signal:e}),t.addEventListener("pointerdown",i.#c,{signal:e});let n=this.#n=document.createElement("div");n.className="buttons",t.append(n);let s=this.#i.toolbarPosition;if(s){let{style:a}=t,r=this.#i._uiManager.direction==="ltr"?1-s[0]:s[0];a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return this.#h(),t}get div(){return this.#t}static#c(t){t.stopPropagation()}#l(t){this.#i._focusEventsAllowed=!1,Ee(t)}#u(t){this.#i._focusEventsAllowed=!0,Ee(t)}#o(t){let e=this.#i._uiManager._signal;t.addEventListener("focusin",this.#l.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",xe,{signal:e})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown()}#h(){let{editorType:t,_uiManager:e}=this.#i,n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",i.#s[t]),this.#o(n),n.addEventListener("click",s=>{e.delete()},{signal:e._signal}),this.#n.append(n)}get#r(){let t=document.createElement("div");return t.className="divider",t}async addAltText(t){let e=await t.render();this.#o(e),this.#n.prepend(e,this.#r),this.#a=t}addColorPicker(t){this.#e=t;let e=t.renderButton();this.#o(e),this.#n.prepend(e,this.#r)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}},Lo=class{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){let t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",xe,{signal:this.#i._signal});let e=this.#t=document.createElement("div");return e.className="buttons",t.append(e),this.#s(),t}#a(t,e){let n=0,s=0;for(let a of t){let r=a.y+a.height;if(r<n)continue;let l=a.x+(e?a.width:0);if(r>n){s=l,n=r;continue}e?l>s&&(s=l):l<s&&(s=l)}return[e?1-s:s,n]}show(t,e,n){let[s,a]=this.#a(e,n),{style:r}=this.#e||=this.#n();t.append(this.#e),r.insetInlineEnd=`${100*s}%`,r.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(){let t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");let e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");let n=this.#i._signal;t.addEventListener("contextmenu",xe,{signal:n}),t.addEventListener("click",()=>{this.#i.highlightSelection("floating_button")},{signal:n}),this.#t.append(t)}};function sr(i,t,e){for(let n of e)t.addEventListener(n,i[n].bind(i))}var Oo=class{#t=0;get id(){return`${Av}${this.#t++}`}},No=class i{#t=Ov();#e=0;#i=null;static get _isSVGFittingCanvas(){let t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;let a=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return U(this,"_isSVGFittingCanvas",a)}async#n(t,e){this.#i||=new Map;let n=this.#i.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let s;if(typeof e=="string"?(n.url=e,s=await Ir(e,"blob")):e instanceof File?s=n.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){let a=i._isSVGFittingCanvas,r=new FileReader,l=new Image,o=new Promise((c,u)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,c()},r.onload=async()=>{let h=n.svgUrl=r.result;l.src=await a?`${h}#svgView(preserveAspectRatio(none))`:h},l.onerror=r.onerror=u});r.readAsDataURL(s),await o}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){z(s),n=null}return this.#i.set(t,n),n&&this.#i.set(n.id,n),n}async getFromFile(t){let{lastModified:e,name:n,size:s,type:a}=t;return this.#n(`${e}_${n}_${s}_${a}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){let n=await e;return this.#n(t,n)}async getFromId(t){this.#i||=new Map;let e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){let{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let n=this.#i.get(t);if(n?.bitmap)return n.refCounter+=1,n;let s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,n),this.#i.set(n.id,n),n}getSvgUrl(t){let e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;let e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;let{bitmap:n}=e;if(!e.url&&!e.file){let s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=s.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}},ko=class{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:n,mustExec:s,type:a=NaN,overwriteIfSameType:r=!1,keepUndo:l=!1}){if(s&&t(),this.#e)return;let o={cmd:t,undo:e,post:n,type:a};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(o);return}if(r&&this.#t[this.#n].type===a){l&&(o.undo=this.#t[this.#n].undo),this.#t[this.#n]=o;return}let c=this.#n+1;c===this.#i?this.#t.splice(0,1):(this.#n=c,c<this.#t.length&&this.#t.splice(c)),this.#t.push(o)}undo(){if(this.#n===-1)return;this.#e=!0;let{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;let{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}},Ki=class{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:e}=Dt.platform;for(let[n,s,a={}]of t)for(let r of n){let l=r.startsWith("mac+");e&&l?(this.callbacks.set(r.slice(4),{callback:s,options:a}),this.allKeys.add(r.split("+").at(-1))):!e&&!l&&(this.callbacks.set(r,{callback:s,options:a}),this.allKeys.add(r.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);let e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;let n=this.callbacks.get(this.#t(e));if(!n)return;let{callback:s,options:{bubbles:a=!1,args:r=[],checker:l=null}}=n;l&&!l(t,e)||(s.bind(t,...r,e)(),a||Ee(e))}},Io=class i{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let t=new Map([["CanvasText",null],["Canvas",null]]);return zv(t),U(this,"_colors",t)}convert(t){let e=Jc(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(let[n,s]of this._colors)if(s.every((a,r)=>a===e[r]))return i._colorsMapping.get(n);return e}getHexCode(t){let e=this._colors.get(t);return e?M.makeHexColor(...e):t}},Qi=class i{#t=new AbortController;#e=null;#i=new Map;#n=new Map;#a=null;#s=null;#c=null;#l=new ko;#u=null;#o=null;#h=0;#r=new Set;#d=null;#f=null;#p=new Set;_editorUndoBar=null;#m=!1;#g=!1;#v=!1;#b=null;#A=null;#_=null;#E=null;#x=!1;#T=null;#R=new Oo;#S=!1;#M=!1;#C=null;#D=null;#k=null;#B=null;#w=I.NONE;#y=new Set;#N=null;#U=null;#P=null;#G={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#O=null;#F=null;#X=null;#I=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let t=i.prototype,e=r=>r.#F.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&r.hasSomethingToControl(),n=(r,{target:l})=>{if(l instanceof HTMLInputElement){let{type:o}=l;return o!=="text"&&o!=="number"}return!0},s=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return U(this,"_keyboardManager",new Ki([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(r,{target:l})=>!(l instanceof HTMLButtonElement)&&r.#F.contains(l)&&!r.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(r,{target:l})=>!(l instanceof HTMLButtonElement)&&r.#F.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}constructor(t,e,n,s,a,r,l,o,c,u,h,d){let f=this._signal=this.#t.signal;this.#F=t,this.#X=e,this.#a=n,this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:f}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:f}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:f}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:f}),s._on("setpreference",this.onSetPreference.bind(this),{signal:f}),s._on("switchannotationeditorparams",g=>this.updateParams(g.type,g.value),{signal:f}),this.#et(),this.#at(),this.#K(),this.#s=a.annotationStorage,this.#b=a.filterFactory,this.#U=r,this.#E=l||null,this.#m=o,this.#g=c,this.#v=u,this.#B=h||null,this.viewParameters={realScale:mi.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=d||null}destroy(){this.#I?.resolve(),this.#I=null,this.#t?.abort(),this.#t=null,this._signal=null;for(let t of this.#n.values())t.destroy();this.#n.clear(),this.#i.clear(),this.#p.clear(),this.#e=null,this.#y.clear(),this.#l.destroy(),this.#a?.destroy(),this.#T?.hide(),this.#T=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#O&&(clearTimeout(this.#O),this.#O=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#B}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return U(this,"hcmFilter",this.#U?this.#b.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return U(this,"direction",getComputedStyle(this.#F).direction)}get highlightColors(){return U(this,"highlightColors",this.#E?new Map(this.#E.split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return U(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#o=t}setMainHighlightColorPicker(t){this.#k=t}editAltText(t,e=!1){this.#a?.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#v=e;break}}onPageChanging({pageNumber:t}){this.#h=t-1}focusMainContainer(){this.#F.focus()}findParent(t,e){for(let n of this.#n.values()){let{x:s,y:a,width:r,height:l}=n.div.getBoundingClientRect();if(t>=s&&t<=s+r&&e>=a&&e<=a+l)return n}return null}disableUserSelect(t=!1){this.#X.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*mi.PDF_TO_CSS_UNITS;for(let e of this.#p)e.onScaleChanging();this.#o?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#j({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#Y(t){let{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(let n of this.#n.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t=""){let e=document.getSelection();if(!e||e.isCollapsed)return;let{anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:r}=e,l=e.toString(),c=this.#j(e).closest(".textLayer"),u=this.getSelectionBoxes(c);if(!u)return;e.empty();let h=this.#Y(c),d=this.#w===I.NONE,f=()=>{h?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:u,anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:r,text:l}),d&&this.showAllEditors("highlight",!0,!0)};if(d){this.switchToMode(I.HIGHLIGHT,f);return}f()}#J(){let t=document.getSelection();if(!t||t.isCollapsed)return;let n=this.#j(t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(this.#T||=new Lo(this),this.#T.show(n,s,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}#tt(){let t=document.getSelection();if(!t||t.isCollapsed){this.#N&&(this.#T?.hide(),this.#N=null,this.#L({hasSelectedText:!1}));return}let{anchorNode:e}=t;if(e===this.#N)return;let s=this.#j(t).closest(".textLayer");if(!s){this.#N&&(this.#T?.hide(),this.#N=null,this.#L({hasSelectedText:!1}));return}if(this.#T?.hide(),this.#N=e,this.#L({hasSelectedText:!0}),!(this.#w!==I.HIGHLIGHT&&this.#w!==I.NONE)&&(this.#w===I.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#x=this.isShiftKeyDown,!this.isShiftKeyDown)){let a=this.#w===I.HIGHLIGHT?this.#Y(s):null;a?.toggleDrawing();let r=new AbortController,l=this.combinedSignal(r),o=c=>{c.type==="pointerup"&&c.button!==0||(r.abort(),a?.toggleDrawing(!0),c.type==="pointerup"&&this.#V("main_toolbar"))};window.addEventListener("pointerup",o,{signal:l}),window.addEventListener("blur",o,{signal:l})}}#V(t=""){this.#w===I.HIGHLIGHT?this.highlightSelection(t):this.#m&&this.#J()}#et(){document.addEventListener("selectionchange",this.#tt.bind(this),{signal:this._signal})}#it(){if(this.#_)return;this.#_=new AbortController;let t=this.combinedSignal(this.#_);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#nt(){this.#_?.abort(),this.#_=null}blur(){if(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#V("main_toolbar")),!this.hasSelection)return;let{activeElement:t}=document;for(let e of this.#y)if(e.div.contains(t)){this.#D=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#D)return;let[t,e]=this.#D;this.#D=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#K(){if(this.#C)return;this.#C=new AbortController;let t=this.combinedSignal(this.#C);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#st(){this.#C?.abort(),this.#C=null}#Q(){if(this.#u)return;this.#u=new AbortController;let t=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#$(){this.#u?.abort(),this.#u=null}#at(){let t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#K(),this.#Q()}removeEditListeners(){this.#st(),this.#$()}dragOver(t){for(let{type:e}of t.dataTransfer.items)for(let n of this.#f)if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(let e of t.dataTransfer.items)for(let n of this.#f)if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;let e=[];for(let n of this.#y){let s=n.serialize(!0);s&&e.push(s)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();let{clipboardData:e}=t;for(let a of e.items)for(let r of this.#f)if(r.isHandlingMimeForPasting(a.type)){r.paste(a,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){z(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();let s=this.currentLayer;try{let a=[];for(let o of n){let c=await s.deserialize(o);if(!c)return;a.push(c)}let r=()=>{for(let o of a)this.#W(o);this.#Z(a)},l=()=>{for(let o of a)o.remove()};this.addCommands({cmd:r,undo:l,mustExec:!0})}catch(a){z(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#w!==I.NONE&&!this.isEditorHandlingKeyboard&&i._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#V("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#L(t){Object.entries(t).some(([n,s])=>this.#G[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#G,t)}),this.#w===I.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#z([[P.HIGHLIGHT_FREE,!0]]))}#z(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#it(),this.#Q(),this.#L({isEditing:this.#w!==I.NONE,isEmpty:this.#q(),hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:this.#l.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#nt(),this.#$(),this.#L({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#f){this.#f=t;for(let e of this.#f)this.#z(e.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#n.get(this.#h)}getLayer(t){return this.#n.get(t)}get currentPageIndex(){return this.#h}addLayer(t){this.#n.set(t.pageIndex,t),this.#S?t.enable():t.disable()}removeLayer(t){this.#n.delete(t.pageIndex)}async updateMode(t,e=null,n=!1){if(this.#w!==t&&!(this.#I&&(await this.#I.promise,!this.#I))){if(this.#I=Promise.withResolvers(),this.#w=t,t===I.NONE){this.setEditingState(!1),this.#lt(),this._editorUndoBar?.hide(),this.#I.resolve();return}this.setEditingState(!0),await this.#rt(),this.unselectAll();for(let s of this.#n.values())s.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),this.#I.resolve();return}for(let s of this.#i.values())s.annotationElementId===e?(this.setSelected(s),s.enterInEditMode()):s.unselect();this.#I.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#w&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){if(this.#f){switch(t){case P.CREATE:this.currentLayer.addNewEditor();return;case P.HIGHLIGHT_DEFAULT_COLOR:this.#k?.updateColor(e);break;case P.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#P||=new Map).set(t,e),this.showAllEditors("highlight",e);break}for(let n of this.#y)n.updateParams(t,e);for(let n of this.#f)n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){for(let a of this.#i.values())a.editorType===t&&a.show(e);(this.#P?.get(P.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#z([[P.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#M!==t){this.#M=t;for(let e of this.#n.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#rt(){if(!this.#S){this.#S=!0;let t=[];for(let e of this.#n.values())t.push(e.enable());await Promise.all(t);for(let e of this.#i.values())e.enable()}}#lt(){if(this.unselectAll(),this.#S){this.#S=!1;for(let t of this.#n.values())t.disable();for(let t of this.#i.values())t.disable()}}getEditors(t){let e=[];for(let n of this.#i.values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#i.delete(t.id),this.unselect(t),(!t.annotationElementId||!this.#r.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#r.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#r.has(t)}removeDeletedAnnotationElement(t){this.#r.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#W(t){let e=this.#n.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#z(t.propertiesToUpdate))}get#ot(){let t=null;for(t of this.#y);return t}updateUI(t){this.#ot===t&&this.#z(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#z(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#y.has(t)){this.#y.delete(t),t.unselect(),this.#L({hasSelectedEditor:this.hasSelection});return}this.#y.add(t),t.select(),this.#z(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}setSelected(t){this.#o?.commitOrRemove();for(let e of this.#y)e!==t&&e.unselect();this.#y.clear(),this.#y.add(t),t.select(),this.#z(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}isSelected(t){return this.#y.has(t)}get firstSelectedEditor(){return this.#y.values().next().value}unselect(t){t.unselect(),this.#y.delete(t),this.#L({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#y.size!==0}get isEnterHandled(){return this.#y.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#l.undo(),this.#L({hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#q()}),this._editorUndoBar?.hide()}redo(){this.#l.redo(),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:this.#l.hasSomethingToRedo(),isEmpty:this.#q()})}addCommands(t){this.#l.add(t),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#q()})}cleanUndoStack(t){this.#l.cleanType(t)}#q(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(let t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();let t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;let e=t?[t]:[...this.#y],n=()=>{this._editorUndoBar?.show(s,e.length===1?e[0].editorType:e.length);for(let a of e)a.remove()},s=()=>{for(let a of e)this.#W(a)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#Z(t){for(let e of this.#y)e.unselect();this.#y.clear();for(let e of t)e.isEmpty()||(this.#y.add(e),e.select());this.#L({hasSelectedEditor:this.hasSelection})}selectAll(){for(let t of this.#y)t.commit();this.#Z(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#w!==I.NONE))&&!this.#o?.commitOrRemove()&&this.hasSelection){for(let t of this.#y)t.unselect();this.#y.clear(),this.#L({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=e;let[s,a]=this.#H,r=[...this.#y],l=1e3;this.#O&&clearTimeout(this.#O),this.#O=setTimeout(()=>{this.#O=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(let o of r)this.#i.has(o.id)&&o.translateInPage(s,a)},undo:()=>{for(let o of r)this.#i.has(o.id)&&o.translateInPage(-s,-a)},mustExec:!1})},l);for(let o of r)o.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#d=new Map;for(let t of this.#y)this.#d.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#d)return!1;this.disableUserSelect(!1);let t=this.#d;this.#d=null;let e=!1;for(let[{x:s,y:a,pageIndex:r},l]of t)l.newX=s,l.newY=a,l.newPageIndex=r,e||=s!==l.savedX||a!==l.savedY||r!==l.savedPageIndex;if(!e)return!1;let n=(s,a,r,l)=>{if(this.#i.has(s.id)){let o=this.#n.get(l);o?s._setParentAndPosition(o,a,r):(s.pageIndex=l,s.x=a,s.y=r)}};return this.addCommands({cmd:()=>{for(let[s,{newX:a,newY:r,newPageIndex:l}]of t)n(s,a,r,l)},undo:()=>{for(let[s,{savedX:a,savedY:r,savedPageIndex:l}]of t)n(s,a,r,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#d)for(let n of this.#d.keys())n.drag(t,e)}rebuild(t){if(t.parent===null){let e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#y.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#w}get imageManager(){return U(this,"imageManager",new No)}getSelectionBoxes(t){if(!t)return null;let e=document.getSelection();for(let c=0,u=e.rangeCount;c<u;c++)if(!t.contains(e.getRangeAt(c).commonAncestorContainer))return null;let{x:n,y:s,width:a,height:r}=t.getBoundingClientRect(),l;switch(t.getAttribute("data-main-rotation")){case"90":l=(c,u,h,d)=>({x:(u-s)/r,y:1-(c+h-n)/a,width:d/r,height:h/a});break;case"180":l=(c,u,h,d)=>({x:1-(c+h-n)/a,y:1-(u+d-s)/r,width:h/a,height:d/r});break;case"270":l=(c,u,h,d)=>({x:1-(u+d-s)/r,y:(c-n)/a,width:d/r,height:h/a});break;default:l=(c,u,h,d)=>({x:(c-n)/a,y:(u-s)/r,width:h/a,height:d/r});break}let o=[];for(let c=0,u=e.rangeCount;c<u;c++){let h=e.getRangeAt(c);if(!h.collapsed)for(let{x:d,y:f,width:g,height:v}of h.getClientRects())g===0||v===0||o.push(l(d,f,g,v))}return o.length===0?null:o}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#c||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#c?.delete(t)}renderAnnotationElement(t){let e=this.#c?.get(t.data.id);if(!e)return;let n=this.#s.getRawValue(e);n&&(this.#w===I.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}},ar=class i{#t=null;#e=!1;#i=null;#n=null;#a=null;#s=null;#c=!1;#l=null;#u=null;#o=null;#h=null;#r=!1;static#d=null;static _l10n=null;constructor(t){this.#u=t,this.#r=t._uiManager.useNewAltTextFlow,i.#d||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){i._l10n??=t}async render(){let t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";let e=this.#n=document.createElement("span");t.append(e),this.#r?(t.classList.add("new"),t.setAttribute("data-l10n-id",i.#d.missing),e.setAttribute("data-l10n-id",i.#d["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let n=this.#u._uiManager._signal;t.addEventListener("contextmenu",xe,{signal:n}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});let s=a=>{a.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#r&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#f}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#c=!0,s(a))},{signal:n}),await this.#p(),t}get#f(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#c}),this.#c=!1)}isEmpty(){return this.#r?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#r?this.#t!==null||!!this.#o:this.isEmpty()}get guessedText(){return this.#o}async setGuessedText(t){this.#t===null&&(this.#o=t,this.#h=await i._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#r||this.#t){this.#l?.remove(),this.#l=null;return}if(!this.#l){let e=this.#l=document.createElement("div");e.className="noAltTextBadge",this.#u.div.append(e)}this.#l.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#o===e&&(e=this.#h),{altText:e,decorative:this.#e,guessedText:this.#o,textWithDisclaimer:this.#h}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:s,cancel:a=!1}){n&&(this.#o=n,this.#h=s),!(this.#t===t&&this.#e===e)&&(a||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#i&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i.disabled=!t)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#f}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#a=null,this.#l?.remove(),this.#l=null}async#p(){let t=this.#i;if(!t)return;if(this.#r){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",i.#d[this.#f]),this.#n?.setAttribute("data-l10n-id",i.#d[`${this.#f}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#a;if(!e){this.#a=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#u.id}`;let s=100,a=this.#u._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#a.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:a}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#a?.classList.remove("show")},{signal:a})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#u.getImageForAltText()?.setAttribute("aria-describedby",e.id)}},ot=class i{#t=null;#e=null;#i=null;#n=!1;#a=null;#s="";#c=!1;#l=null;#u=null;#o=null;#h=null;#r="";#d=!1;#f=null;#p=!1;#m=!1;#g=!1;#v=null;#b=0;#A=0;#_=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#E=!1;#x=i._zIndex++;static _borderLineWidth=-1;static _colorManager=new Io;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){let t=i.prototype._resizeWithKeyboard,e=Qi.TRANSLATE_SMALL,n=Qi.TRANSLATE_BIG;return U(this,"_resizerKeyboardManager",new Ki([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],i.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;let{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:r}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[a,r];let[l,o]=this.parentDimensions;this.x=t.x/l,this.y=t.y/o,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return U(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){let e=new Ho({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(i._l10n??=t,i._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),i._borderLineWidth!==-1)return;let n=getComputedStyle(document.documentElement);i._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){K("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#E}set _isDraggable(t){this.#E=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){let[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#x}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#O(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#d?this.#d=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){let[a,r]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/a,this.y=(e+s)/r,this.fixAndSetPosition()}#T([t,e],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#T(this.parentDimensions,t,e)}translateInPage(t,e){this.#f||=[this.x,this.y,this.width,this.height],this.#T(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){this.#f||=[this.x,this.y,this.width,this.height];let{div:n,parentDimensions:[s,a]}=this;if(this.x+=t/s,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:h,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:l}=this,[o,c]=this.getBaseTranslation();r+=o,l+=c;let{style:u}=n;u.left=`${(100*r).toFixed(2)}%`,u.top=`${(100*l).toFixed(2)}%`,this._onTranslating(r,l),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#f&&(this.#f[0]!==this.x||this.#f[1]!==this.y)}get _hasBeenResized(){return!!this.#f&&(this.#f[2]!==this.width||this.#f[3]!==this.height)}getBaseTranslation(){let[t,e]=this.parentDimensions,{_borderLineWidth:n}=i,s=n/t,a=n/e;switch(this.rotation){case 90:return[-s,a];case 180:return[s,a];case 270:return[s,-a];default:return[-s,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){let{div:{style:e},pageDimensions:[n,s]}=this,{x:a,y:r,width:l,height:o}=this;if(l*=n,o*=s,a*=n,r*=s,this._mustFixPosition)switch(t){case 0:a=Math.max(0,Math.min(n-l,a)),r=Math.max(0,Math.min(s-o,r));break;case 90:a=Math.max(0,Math.min(n-o,a)),r=Math.min(s,Math.max(l,r));break;case 180:a=Math.min(n,Math.max(l,a)),r=Math.min(s,Math.max(o,r));break;case 270:a=Math.min(n,Math.max(o,a)),r=Math.max(0,Math.min(s-l,r));break}this.x=a/=n,this.y=r/=s;let[c,u]=this.getBaseTranslation();a+=c,r+=u,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}static#R(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return i.#R(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return i.#R(t,e,360-this.parentRotation)}#S(t){switch(t){case 90:{let[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{let[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){let[n,s]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*t/n).toFixed(2)}%`,this.#c||(a.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){let{style:t}=this.div,{height:e,width:n}=t,s=n.endsWith("%"),a=!this.#c&&e.endsWith("%");if(s&&a)return;let[r,l]=this.parentDimensions;s||(t.width=`${(100*parseFloat(n)/r).toFixed(2)}%`),!this.#c&&!a&&(t.height=`${(100*parseFloat(e)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#M(){if(this.#l)return;this.#l=document.createElement("div"),this.#l.classList.add("resizers");let t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(let n of t){let s=document.createElement("div");this.#l.append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",this.#C.bind(this,n),{signal:e}),s.addEventListener("contextmenu",xe,{signal:e}),s.tabIndex=-1}this.div.prepend(this.#l)}#C(t,e){e.preventDefault();let{isMac:n}=Dt.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#i?.toggle(!1);let s=this._isDraggable;this._isDraggable=!1,this.#u=[e.screenX,e.screenY];let a=new AbortController,r=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:r}),window.addEventListener("touchmove",Ee,{passive:!1,signal:r}),window.addEventListener("contextmenu",xe,{signal:r}),this.#o={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let l=this.parent.div.style.cursor,o=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;let c=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=l,this.div.style.cursor=o,this.#k()};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})}#D(t,e,n,s){this.width=n,this.height=s,this.x=t,this.y=e;let[a,r]=this.parentDimensions;this.setDims(a*n,r*s),this.fixAndSetPosition(),this._onResized()}_onResized(){}#k(){if(!this.#o)return;let{savedX:t,savedY:e,savedWidth:n,savedHeight:s}=this.#o;this.#o=null;let a=this.x,r=this.y,l=this.width,o=this.height;a===t&&r===e&&l===n&&o===s||this.addCommands({cmd:this.#D.bind(this,a,r,l,o),undo:this.#D.bind(this,t,e,n,s),mustExec:!0})}#B(t,e){let[n,s]=this.parentDimensions,a=this.x,r=this.y,l=this.width,o=this.height,c=i.MIN_SIZE/n,u=i.MIN_SIZE/s,h=D=>Math.round(D*1e4)/1e4,d=this.#S(this.rotation),f=(D,O)=>[d[0]*D+d[2]*O,d[1]*D+d[3]*O],g=this.#S(360-this.rotation),v=(D,O)=>[g[0]*D+g[2]*O,g[1]*D+g[3]*O],A,p,m=!1,b=!1;switch(t){case"topLeft":m=!0,A=(D,O)=>[0,0],p=(D,O)=>[D,O];break;case"topMiddle":A=(D,O)=>[D/2,0],p=(D,O)=>[D/2,O];break;case"topRight":m=!0,A=(D,O)=>[D,0],p=(D,O)=>[0,O];break;case"middleRight":b=!0,A=(D,O)=>[D,O/2],p=(D,O)=>[0,O/2];break;case"bottomRight":m=!0,A=(D,O)=>[D,O],p=(D,O)=>[0,0];break;case"bottomMiddle":A=(D,O)=>[D/2,O],p=(D,O)=>[D/2,0];break;case"bottomLeft":m=!0,A=(D,O)=>[0,O],p=(D,O)=>[D,0];break;case"middleLeft":b=!0,A=(D,O)=>[0,O/2],p=(D,O)=>[D,O/2];break}let y=A(l,o),_=p(l,o),w=f(..._),S=h(a+w[0]),x=h(r+w[1]),T=1,R=1,L,V;if(e.fromKeyboard)({deltaX:L,deltaY:V}=e);else{let{screenX:D,screenY:O}=e,[Oe,Se]=this.#u;[L,V]=this.screenToPageTranslation(D-Oe,O-Se),this.#u[0]=D,this.#u[1]=O}if([L,V]=v(L/n,V/s),m){let D=Math.hypot(l,o);T=R=Math.max(Math.min(Math.hypot(_[0]-y[0]-L,_[1]-y[1]-V)/D,1/l,1/o),c/l,u/o)}else b?T=Math.max(c,Math.min(1,Math.abs(_[0]-y[0]-L)))/l:R=Math.max(u,Math.min(1,Math.abs(_[1]-y[1]-V)))/o;let At=h(l*T),Y=h(o*R);w=f(...p(At,Y));let Ft=S-w[0],X=x-w[1];this.#f||=[this.x,this.y,this.width,this.height],this.width=At,this.height=Y,this.x=Ft,this.y=X,this.setDims(n*At,s*Y),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}async addEditToolbar(){return this._editToolbar||this.#m?this._editToolbar:(this._editToolbar=new Do(this),this.div.append(this._editToolbar.render()),this.#i&&await this._editToolbar.addAltText(this.#i),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#i?.destroy())}addContainer(t){let e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#i||(ar.initialize(i._l10n),this.#i=new ar(this),this.#t&&(this.#i.data=this.#t,this.#t=null),await this.addEditToolbar())}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#n?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#N();let[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);let[n,s]=this.getInitialTranslation();return this.translate(n,s),sr(this,this.div,["pointerdown"]),this._uiManager._editorUndoBar?.hide(),this.div}pointerdown(t){let{isMac:e}=Dt.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#d=!0,this._isDraggable){this.#y(t);return}this.#w(t)}get isSelected(){return this._uiManager.isSelected(this)}#w(t){let{isMac:e}=Dt.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#y(t){let{isSelected:e}=this;this._uiManager.setUpDragSession();let n=new AbortController,s=this._uiManager.combinedSignal(n),a={capture:!0,passive:!1,signal:s},r=o=>{n.abort(),this.#a=null,this.#d=!1,this._uiManager.endDragSession()||this.#w(o)};e&&(this.#b=t.clientX,this.#A=t.clientY,this.#a=t.pointerId,this.#s=t.pointerType,window.addEventListener("pointermove",o=>{let{clientX:c,clientY:u,pointerId:h}=o;if(h!==this.#a){Ee(o);return}let[d,f]=this.screenToPageTranslation(c-this.#b,u-this.#A);this.#b=c,this.#A=u,this._uiManager.dragSelectedEditors(d,f)},a),window.addEventListener("touchmove",Ee,a),window.addEventListener("pointerdown",o=>{o.isPrimary&&o.pointerType===this.#s&&r(o),Ee(o)},a)),this._onStartDragging();let l=o=>{if(!this.#a||this.#a===o.pointerId){r(o),this._onStopDragging();return}Ee(o)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){let s=this.parentScale,[a,r]=this.pageDimensions,[l,o]=this.pageTranslation,c=t/s,u=e/s,h=this.x*a,d=this.y*r,f=this.width*a,g=this.height*r;switch(n){case 0:return[h+c+l,r-d-u-g+o,h+c+f+l,r-d-u+o];case 90:return[h+u+l,r-d+c+o,h+u+g+l,r-d+c+f+o];case 180:return[h-c-f+l,r-d+u+o,h-c+l,r-d+u+g+o];case 270:return[h-u-g+l,r-d-c-f+o,h-u+l,r-d-c+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){let[n,s,a,r]=t,l=a-n,o=r-s;switch(this.rotation){case 0:return[n,e-r,l,o];case 90:return[n,e-s,o,l];case 180:return[a,e-s,l,o];case 270:return[a,e-r,o,l];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#m=!0}disableEditMode(){this.#m=!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#g}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){let{top:t,left:e,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:a,innerWidth:r}=window;return e<r&&s>0&&t<a&&n>0}#N(){if(this.#h||!this.div)return;this.#h=new AbortController;let t=this._uiManager.combinedSignal(this.#h);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#N()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){K("An editor must be serializable")}static async deserialize(t,e,n){let s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});s.rotation=t.rotation,s.#t=t.accessibilityData;let[a,r]=s.pageDimensions,[l,o,c,u]=s.getRectInCurrentCoords(t.rect,r);return s.x=l/a,s.y=o/r,s.width=c/a,s.height=u/r,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#h?.abort(),this.#h=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#O(),this.removeEditToolbar(),this.#_){for(let t of this.#_.values())clearTimeout(t);this.#_=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#M(),this.#l.classList.remove("hidden"),sr(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#o={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let e=this.#l.children;if(!this.#e){this.#e=Array.from(e);let r=this.#U.bind(this),l=this.#P.bind(this),o=this._uiManager._signal;for(let c of this.#e){let u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",r,{signal:o}),c.addEventListener("blur",l,{signal:o}),c.addEventListener("focus",this.#G.bind(this,u),{signal:o}),c.setAttribute("data-l10n-id",i._l10nResizer[u])}}let n=this.#e[0],s=0;for(let r of e){if(r===n)break;s++}let a=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(a!==s){if(a<s)for(let l=0;l<s-a;l++)this.#l.append(this.#l.firstChild);else if(a>s)for(let l=0;l<a-s;l++)this.#l.firstChild.before(this.#l.lastChild);let r=0;for(let l of e){let c=this.#e[r++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",i._l10nResizer[c])}}this.#H(0),this.#g=!0,this.#l.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#U(t){i._resizerKeyboardManager.exec(this,t)}#P(t){this.#g&&t.relatedTarget?.parentNode!==this.#l&&this.#O()}#G(t){this.#r=this.#g?t:""}#H(t){if(this.#e)for(let e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#g&&this.#B(this.#r,{deltaX:t,deltaY:e,fromKeyboard:!0})}#O(){this.#g=!1,this.#H(-1),this.#k()}_stopResizingWithKeyboard(){this.#O(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}unselect(){this.#l?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#c=!0;let n=t/e,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#_||=new Map;let{action:n}=t,s=this.#_.get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),this.#_.delete(n),this.#_.size===0&&(this.#_=null)},i._telemetryTimeout),this.#_.set(n,s);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#n=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#n=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){let n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){let{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}},Ho=class extends ot{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}},Yd=3285377520,le=4294901760,Ie=65535,rr=class{constructor(t){this.h1=t?t&4294967295:Yd,this.h2=t?t&4294967295:Yd}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let v=0,A=t.length;v<A;v++){let p=t.charCodeAt(v);p<=255?e[n++]=p:(e[n++]=p>>>8,e[n++]=p&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");let s=n>>2,a=n-s*4,r=new Uint32Array(e.buffer,0,s),l=0,o=0,c=this.h1,u=this.h2,h=3432918353,d=461845907,f=h&Ie,g=d&Ie;for(let v=0;v<s;v++)v&1?(l=r[v],l=l*h&le|l*f&Ie,l=l<<15|l>>>17,l=l*d&le|l*g&Ie,c^=l,c=c<<13|c>>>19,c=c*5+3864292196):(o=r[v],o=o*h&le|o*f&Ie,o=o<<15|o>>>17,o=o*d&le|o*g&Ie,u^=o,u=u<<13|u>>>19,u=u*5+3864292196);switch(l=0,a){case 3:l^=e[s*4+2]<<16;case 2:l^=e[s*4+1]<<8;case 1:l^=e[s*4],l=l*h&le|l*f&Ie,l=l<<15|l>>>17,l=l*d&le|l*g&Ie,s&1?c^=l:u^=l}this.h1=c,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&le|t*36045&Ie,e=e*4283543511&le|((e<<16|t>>>16)*2950163797&le)>>>16,t^=e>>>1,t=t*444984403&le|t*60499&Ie,e=e*3301882366&le|((e<<16|t>>>16)*3120437893&le)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}},zo=Object.freeze({map:null,hash:"",transfer:void 0}),Ds=class{#t=!1;#e=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){let n=this.#i.get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return this.#i.get(t)}remove(t){if(this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(let e of this.#i.values())if(e instanceof ot)return;this.onAnnotationEditor(null)}}setValue(t,e){let n=this.#i.get(t),s=!1;if(n!==void 0)for(let[a,r]of Object.entries(e))n[a]!==r&&(s=!0,n[a]=r);else s=!0,this.#i.set(t,e);s&&this.#n(),e instanceof ot&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#i.has(t)}getAll(){return this.#i.size>0?$c(this.#i):null}setAll(t){for(let[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return this.#i.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new lr(this)}get serializable(){if(this.#i.size===0)return zo;let t=new Map,e=new rr,n=[],s=Object.create(null),a=!1;for(let[r,l]of this.#i){let o=l instanceof ot?l.serialize(!1,s):l;o&&(t.set(r,o),e.update(`${r}:${JSON.stringify(o)}`),a||=!!o.bitmap)}if(a)for(let r of t.values())r.bitmap&&n.push(r.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:zo}get editorStats(){let t=null,e=new Map;for(let n of this.#i.values()){if(!(n instanceof ot))continue;let s=n.telemetryFinalData;if(!s)continue;let{type:a}=s;e.has(a)||e.set(a,Object.getPrototypeOf(n).constructor),t||=Object.create(null);let r=t[a]||=new Map;for(let[l,o]of Object.entries(s)){if(l==="type")continue;let c=r.get(l);c||(c=new Map,r.set(l,c));let u=c.get(o)??0;c.set(o,u+1)}}for(let[n,s]of e)t[n]=s.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;let t=[];for(let e of this.#i.values())!(e instanceof ot)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}},lr=class extends Ds{#t;constructor(t){super();let{map:e,hash:n,transfer:s}=t.serializable,a=structuredClone(e,s?{transfer:s}:null);this.#t={map:a,hash:n,transfer:s}}get print(){K("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return U(this,"modifiedIds",{ids:new Set,hash:""})}},Bo=class{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(let t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||this.#t.has(t.loadedName))){if(mt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:n,src:s,style:a}=t,r=new FontFace(n,s,a);this.addNativeFontFace(r);try{await r.load(),this.#t.add(n),e?.(t)}catch{z(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(r)}return}K("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){let n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw z(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}let e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{let s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){let t=!!this._document?.fonts;return U(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(Pt||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),U(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(mt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){let a=n.shift();setTimeout(a.callback,0)}}let{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){let t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return U(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(y,_){return y.charCodeAt(_)<<24|y.charCodeAt(_+1)<<16|y.charCodeAt(_+2)<<8|y.charCodeAt(_+3)&255}function s(y,_,w,S){let x=y.substring(0,_),T=y.substring(_+w);return x+S+T}let a,r,l=this._document.createElement("canvas");l.width=1,l.height=1;let o=l.getContext("2d"),c=0;function u(y,_){if(++c>30){z("Load test font never loaded."),_();return}if(o.font="30px "+y,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0){_();return}setTimeout(u.bind(null,y,_))}let h=`lt${Date.now()}${this.loadTestFontId++}`,d=this._loadTestFont;d=s(d,976,h.length,h);let g=16,v=1482184792,A=n(d,g);for(a=0,r=h.length-3;a<r;a+=4)A=A-v+n(h,a)|0;a<h.length&&(A=A-v+n(h+"XXX",a)|0),d=s(d,g,4,Cv(A));let p=`url(data:font/opentype;base64,${btoa(d)});`,m=`@font-face {font-family:"${h}";src:${p}}`;this.insertRule(m);let b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(let y of[t.loadedName,h]){let _=this._document.createElement("span");_.textContent="Hi",_.style.fontFamily=y,b.append(_)}this._document.body.append(b),u(h,()=>{b.remove(),e.complete()})}},Uo=class{constructor(t,{disableFontFace:e=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(let s in t)this[s]=t[s];this.disableFontFace=e===!0,this._inspectFont=n}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{let e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let t=`url(data:${this.mimetype};base64,${Nv(this.data)});`,e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(a){z(`getPathGenerator - ignoring character: "${a}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[e]=function(a,r){};let s=[];for(let a=0,r=n.length;a<r;)switch(n[a++]){case Ve.BEZIER_CURVE_TO:{let[l,o,c,u,h,d]=n.slice(a,a+6);s.push(f=>f.bezierCurveTo(l,o,c,u,h,d)),a+=6}break;case Ve.MOVE_TO:{let[l,o]=n.slice(a,a+2);s.push(c=>c.moveTo(l,o)),a+=2}break;case Ve.LINE_TO:{let[l,o]=n.slice(a,a+2);s.push(c=>c.lineTo(l,o)),a+=2}break;case Ve.QUADRATIC_CURVE_TO:{let[l,o,c,u]=n.slice(a,a+4);s.push(h=>h.quadraticCurveTo(l,o,c,u)),a+=4}break;case Ve.RESTORE:s.push(l=>l.restore());break;case Ve.SAVE:s.push(l=>l.save());break;case Ve.SCALE:mt(s.length===2,"Scale command is only valid at the third position.");break;case Ve.TRANSFORM:{let[l,o,c,u,h,d]=n.slice(a,a+6);s.push(f=>f.transform(l,o,c,u,h,d)),a+=6}break;case Ve.TRANSLATE:{let[l,o]=n.slice(a,a+2);s.push(c=>c.translate(l,o)),a+=2}break}return s.push(a=>a.closePath()),this.compiledGlyphs[e]=function(r,l){s[0](r),s[1](r),r.scale(l,-l);for(let o=2,c=s.length;o<c;o++)s[o](r)}}},or=class{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");let n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){K("Abstract method `_createCanvas` called.")}},Fo=class extends or{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){let n=this._document.createElement("canvas");return n.width=t,n.height=e,n}},cr=class{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");let e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){K("Abstract method `_fetch` called.")}},ur=class extends cr{async _fetch(t){let e=await Ir(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):kr(e)}},hr=class{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,a){return"none"}destroy(t=!1){}},Po=class extends hr{#t;#e;#i;#n;#a;#s;#c=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#a=e}get#l(){return this.#e||=new Map}get#u(){return this.#s||=new Map}get#o(){if(!this.#i){let t=this.#a.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;let n=this.#a.createElementNS(Xe,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#i=this.#a.createElementNS(Xe,"defs"),t.append(n),n.append(this.#i),this.#a.body.append(t)}return this.#i}#h(t){if(t.length===1){let o=t[0],c=new Array(256);for(let h=0;h<256;h++)c[h]=o[h]/255;let u=c.join(",");return[u,u,u]}let[e,n,s]=t,a=new Array(256),r=new Array(256),l=new Array(256);for(let o=0;o<256;o++)a[o]=e[o]/255,r[o]=n[o]/255,l[o]=s[o]/255;return[a.join(","),r.join(","),l.join(",")]}#r(t){if(this.#t===void 0){this.#t="";let e=this.#a.URL;e!==this.#a.baseURI&&(Hr(e)?z('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=e.split("#",1)[0])}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#l.get(t);if(e)return e;let[n,s,a]=this.#h(t),r=t.length===1?n:`${n}${s}${a}`;if(e=this.#l.get(r),e)return this.#l.set(t,e),e;let l=`g_${this.#n}_transfer_map_${this.#c++}`,o=this.#r(l);this.#l.set(t,o),this.#l.set(r,o);let c=this.#p(l);return this.#g(n,s,a,c),o}addHCMFilter(t,e){let n=`${t}-${e}`,s="base",a=this.#u.get(s);if(a?.key===n||(a?(a.filter?.remove(),a.key=n,a.url="none",a.filter=null):(a={key:n,url:"none",filter:null},this.#u.set(s,a)),!t||!e))return a.url;let r=this.#b(t);t=M.makeHexColor(...r);let l=this.#b(e);if(e=M.makeHexColor(...l),this.#o.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return a.url;let o=new Array(256);for(let f=0;f<=255;f++){let g=f/255;o[f]=g<=.03928?g/12.92:((g+.055)/1.055)**2.4}let c=o.join(","),u=`g_${this.#n}_hcm_filter`,h=a.filter=this.#p(u);this.#g(c,c,c,h),this.#f(h);let d=(f,g)=>{let v=r[f]/255,A=l[f]/255,p=new Array(g+1);for(let m=0;m<=g;m++)p[m]=v+m/g*(A-v);return p.join(",")};return this.#g(d(0,5),d(1,5),d(2,5),h),a.url=this.#r(u),a.url}addAlphaFilter(t){let e=this.#l.get(t);if(e)return e;let[n]=this.#h([t]),s=`alpha_${n}`;if(e=this.#l.get(s),e)return this.#l.set(t,e),e;let a=`g_${this.#n}_alpha_map_${this.#c++}`,r=this.#r(a);this.#l.set(t,r),this.#l.set(s,r);let l=this.#p(a);return this.#v(n,l),r}addLuminosityFilter(t){let e=this.#l.get(t||"luminosity");if(e)return e;let n,s;if(t?([n]=this.#h([t]),s=`luminosity_${n}`):s="luminosity",e=this.#l.get(s),e)return this.#l.set(t,e),e;let a=`g_${this.#n}_luminosity_map_${this.#c++}`,r=this.#r(a);this.#l.set(t,r),this.#l.set(s,r);let l=this.#p(a);return this.#d(l),t&&this.#v(n,l),r}addHighlightHCMFilter(t,e,n,s,a){let r=`${e}-${n}-${s}-${a}`,l=this.#u.get(t);if(l?.key===r||(l?(l.filter?.remove(),l.key=r,l.url="none",l.filter=null):(l={key:r,url:"none",filter:null},this.#u.set(t,l)),!e||!n))return l.url;let[o,c]=[e,n].map(this.#b.bind(this)),u=Math.round(.2126*o[0]+.7152*o[1]+.0722*o[2]),h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[d,f]=[s,a].map(this.#b.bind(this));h<u&&([u,h,d,f]=[h,u,f,d]),this.#o.style.color="";let g=(p,m,b)=>{let y=new Array(256),_=(h-u)/b,w=p/255,S=(m-p)/(255*b),x=0;for(let T=0;T<=b;T++){let R=Math.round(u+T*_),L=w+T*S;for(let V=x;V<=R;V++)y[V]=L;x=R+1}for(let T=x;T<256;T++)y[T]=y[x-1];return y.join(",")},v=`g_${this.#n}_hcm_${t}_filter`,A=l.filter=this.#p(v);return this.#f(A),this.#g(g(d[0],f[0],5),g(d[1],f[1],5),g(d[2],f[2],5),A),l.url=this.#r(v),l.url}destroy(t=!1){t&&this.#s?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#c=0)}#d(t){let e=this.#a.createElementNS(Xe,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#f(t){let e=this.#a.createElementNS(Xe,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){let e=this.#a.createElementNS(Xe,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#o.append(e),e}#m(t,e,n){let s=this.#a.createElementNS(Xe,e);s.setAttribute("type","discrete"),s.setAttribute("tableValues",n),t.append(s)}#g(t,e,n,s){let a=this.#a.createElementNS(Xe,"feComponentTransfer");s.append(a),this.#m(a,"feFuncR",t),this.#m(a,"feFuncG",e),this.#m(a,"feFuncB",n)}#v(t,e){let n=this.#a.createElementNS(Xe,"feComponentTransfer");e.append(n),this.#m(n,"feFuncA",t)}#b(t){return this.#o.style.color=t,Jc(getComputedStyle(this.#o).getPropertyValue("color"))}},dr=class{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");let e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){K("Abstract method `_fetch` called.")}},fr=class extends dr{async _fetch(t){let e=await Ir(t,"arraybuffer");return new Uint8Array(e)}};async function cf(i){let e=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(e)}var Go=class extends hr{},qo=class extends or{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}},jo=class extends cr{async _fetch(t){return cf(t)}},Vo=class extends dr{async _fetch(t){return cf(t)}},Ht={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Xo(i,t){if(!t)return;let e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),i.clip(s)}var Ls=class{getPattern(){K("Abstract method `getPattern` called.")}},Yo=class extends Ls{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,s){let a;if(s===Ht.STROKE||s===Ht.FILL){let r=e.current.getClippedPathBoundingBox(s,at(t))||[0,0,0,0],l=Math.ceil(r[2]-r[0])||1,o=Math.ceil(r[3]-r[1])||1,c=e.cachedCanvases.getCanvas("pattern",l,o),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-r[0],-r[1]),n=M.transform(n,[1,0,0,1,r[0],r[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),Xo(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),a=t.createPattern(c.canvas,"no-repeat");let h=new DOMMatrix(n);a.setTransform(h)}else Xo(t,this._bbox),a=this._createGradient(t);return a}};function xo(i,t,e,n,s,a,r,l){let o=t.coords,c=t.colors,u=i.data,h=i.width*4,d;o[e+1]>o[n+1]&&(d=e,e=n,n=d,d=a,a=r,r=d),o[n+1]>o[s+1]&&(d=n,n=s,s=d,d=r,r=l,l=d),o[e+1]>o[n+1]&&(d=e,e=n,n=d,d=a,a=r,r=d);let f=(o[e]+t.offsetX)*t.scaleX,g=(o[e+1]+t.offsetY)*t.scaleY,v=(o[n]+t.offsetX)*t.scaleX,A=(o[n+1]+t.offsetY)*t.scaleY,p=(o[s]+t.offsetX)*t.scaleX,m=(o[s+1]+t.offsetY)*t.scaleY;if(g>=m)return;let b=c[a],y=c[a+1],_=c[a+2],w=c[r],S=c[r+1],x=c[r+2],T=c[l],R=c[l+1],L=c[l+2],V=Math.round(g),At=Math.round(m),Y,Ft,X,D,O,Oe,Se,re;for(let kt=V;kt<=At;kt++){if(kt<A){let st=kt<g?0:(g-kt)/(g-A);Y=f-(f-v)*st,Ft=b-(b-w)*st,X=y-(y-S)*st,D=_-(_-x)*st}else{let st;kt>m?st=1:A===m?st=0:st=(A-kt)/(A-m),Y=v-(v-p)*st,Ft=w-(w-T)*st,X=S-(S-R)*st,D=x-(x-L)*st}let _t;kt<g?_t=0:kt>m?_t=1:_t=(g-kt)/(g-m),O=f-(f-p)*_t,Oe=b-(b-T)*_t,Se=y-(y-R)*_t,re=_-(_-L)*_t;let Sn=Math.round(Math.min(Y,O)),vs=Math.round(Math.max(Y,O)),Xt=h*kt+Sn*4;for(let st=Sn;st<=vs;st++)_t=(Y-st)/(Y-O),_t<0?_t=0:_t>1&&(_t=1),u[Xt++]=Ft-(Ft-Oe)*_t|0,u[Xt++]=X-(X-Se)*_t|0,u[Xt++]=D-(D-re)*_t|0,u[Xt++]=255}}function Bv(i,t,e){let n=t.coords,s=t.colors,a,r;switch(t.type){case"lattice":let l=t.verticesPerRow,o=Math.floor(n.length/l)-1,c=l-1;for(a=0;a<o;a++){let u=a*l;for(let h=0;h<c;h++,u++)xo(i,e,n[u],n[u+1],n[u+l],s[u],s[u+1],s[u+l]),xo(i,e,n[u+l+1],n[u+1],n[u+l],s[u+l+1],s[u+1],s[u+l])}break;case"triangles":for(a=0,r=n.length;a<r;a+=3)xo(i,e,n[a],n[a+1],n[a+2],s[a],s[a+1],s[a+2]);break;default:throw new Error("illegal figure")}}var Ko=class extends Ls{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){let l=Math.floor(this._bounds[0]),o=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-l,u=Math.ceil(this._bounds[3])-o,h=Math.min(Math.ceil(Math.abs(c*t[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),f=c/h,g=u/d,v={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-o,scaleX:1/f,scaleY:1/g},A=h+2*2,p=d+2*2,m=n.getCanvas("mesh",A,p),b=m.context,y=b.createImageData(h,d);if(e){let w=y.data;for(let S=0,x=w.length;S<x;S+=4)w[S]=e[0],w[S+1]=e[1],w[S+2]=e[2],w[S+3]=255}for(let w of this._figures)Bv(y,w,v);return b.putImageData(y,2,2),{canvas:m.canvas,offsetX:l-2*f,offsetY:o-2*g,scaleX:f,scaleY:g}}getPattern(t,e,n,s){Xo(t,this._bbox);let a;if(s===Ht.SHADING)a=M.singularValueDecompose2dScale(at(t));else if(a=M.singularValueDecompose2dScale(e.baseTransform),this.matrix){let l=M.singularValueDecompose2dScale(this.matrix);a=[a[0]*l[0],a[1]*l[1]]}let r=this._createMeshCanvas(a,s===Ht.SHADING?null:this._background,e.cachedCanvases);return s!==Ht.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(r.offsetX,r.offsetY),t.scale(r.scaleX,r.scaleY),t.createPattern(r.canvas,"no-repeat")}},Qo=class extends Ls{getPattern(){return"hotpink"}};function Uv(i){switch(i[0]){case"RadialAxial":return new Yo(i);case"Mesh":return new Ko(i);case"Dummy":return new Qo}throw new Error(`Unknown IR type: ${i[0]}`)}var Kd={COLORED:1,UNCOLORED:2},$o=class i{static MAX_PATTERN_SIZE=3e3;constructor(t,e,n,s,a){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t){let{bbox:e,operatorList:n,paintType:s,tilingType:a,color:r,canvasGraphicsFactory:l}=this,{xstep:o,ystep:c}=this;o=Math.abs(o),c=Math.abs(c),Nr("TilingType: "+a);let u=e[0],h=e[1],d=e[2],f=e[3],g=d-u,v=f-h,A=M.singularValueDecompose2dScale(this.matrix),p=M.singularValueDecompose2dScale(this.baseTransform),m=A[0]*p[0],b=A[1]*p[1],y=g,_=v,w=!1,S=!1,x=Math.ceil(o*m),T=Math.ceil(c*b),R=Math.ceil(g*m),L=Math.ceil(v*b);x>=R?y=o:w=!0,T>=L?_=c:S=!0;let V=this.getSizeAndScale(y,this.ctx.canvas.width,m),At=this.getSizeAndScale(_,this.ctx.canvas.height,b),Y=t.cachedCanvases.getCanvas("pattern",V.size,At.size),Ft=Y.context,X=l.createCanvasGraphics(Ft);if(X.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(X,s,r),Ft.translate(-V.scale*u,-At.scale*h),X.transform(V.scale,0,0,At.scale,0,0),Ft.save(),this.clipBbox(X,u,h,d,f),X.baseTransform=at(X.ctx),X.executeOperatorList(n),X.endDrawing(),Ft.restore(),w||S){let D=Y.canvas;w&&(y=o),S&&(_=c);let O=this.getSizeAndScale(y,this.ctx.canvas.width,m),Oe=this.getSizeAndScale(_,this.ctx.canvas.height,b),Se=O.size,re=Oe.size,kt=t.cachedCanvases.getCanvas("pattern-workaround",Se,re),_t=kt.context,Sn=w?Math.floor(g/o):0,vs=S?Math.floor(v/c):0;for(let Xt=0;Xt<=Sn;Xt++)for(let st=0;st<=vs;st++)_t.drawImage(D,Se*Xt,re*st,Se,re,0,0,Se,re);return{canvas:kt.canvas,scaleX:O.scale,scaleY:Oe.scale,offsetX:u,offsetY:h}}return{canvas:Y.canvas,scaleX:V.scale,scaleY:At.scale,offsetX:u,offsetY:h}}getSizeAndScale(t,e,n){let s=Math.max(i.MAX_PATTERN_SIZE,e),a=Math.ceil(t*n);return a>=s?a=s:n=a/t,{scale:n,size:a}}clipBbox(t,e,n,s,a){let r=s-e,l=a-n;t.ctx.rect(e,n,r,l),t.current.updateRectMinMax(at(t.ctx),[e,n,s,a]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){let s=t.ctx,a=t.current;switch(e){case Kd.COLORED:let r=this.ctx;s.fillStyle=r.fillStyle,s.strokeStyle=r.strokeStyle,a.fillColor=r.fillStyle,a.strokeColor=r.strokeStyle;break;case Kd.UNCOLORED:let l=M.makeHexColor(n[0],n[1],n[2]);s.fillStyle=l,s.strokeStyle=l,a.fillColor=l,a.strokeColor=l;break;default:throw new Mo(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,s){let a=n;s!==Ht.SHADING&&(a=M.transform(a,e.baseTransform),this.matrix&&(a=M.transform(a,this.matrix)));let r=this.createPatternCanvas(e),l=new DOMMatrix(a);l=l.translate(r.offsetX,r.offsetY),l=l.scale(1/r.scaleX,1/r.scaleY);let o=t.createPattern(r.canvas,"repeat");return o.setTransform(l),o}};function Fv({src:i,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:a=4294967295,inverseDecode:r=!1}){let l=Dt.isLittleEndian?4278190080:255,[o,c]=r?[a,l]:[l,a],u=n>>3,h=n&7,d=i.length;e=new Uint32Array(e.buffer);let f=0;for(let g=0;g<s;g++){for(let A=t+u;t<A;t++){let p=t<d?i[t]:255;e[f++]=p&128?c:o,e[f++]=p&64?c:o,e[f++]=p&32?c:o,e[f++]=p&16?c:o,e[f++]=p&8?c:o,e[f++]=p&4?c:o,e[f++]=p&2?c:o,e[f++]=p&1?c:o}if(h===0)continue;let v=t<d?i[t++]:255;for(let A=0;A<h;A++)e[f++]=v&1<<7-A?c:o}return{srcPos:t,destPos:f}}var Qd=16,$d=100,Pv=15,Wd=10,Zd=1e3,Kt=16;function Gv(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(n,s){t.translate(n,s),this.__originalTranslate(n,s)},i.scale=function(n,s){t.scale(n,s),this.__originalScale(n,s)},i.transform=function(n,s,a,r,l,o){t.transform(n,s,a,r,l,o),this.__originalTransform(n,s,a,r,l,o)},i.setTransform=function(n,s,a,r,l,o){t.setTransform(n,s,a,r,l,o),this.__originalSetTransform(n,s,a,r,l,o)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(n){t.rotate(n),this.__originalRotate(n)},i.clip=function(n){t.clip(n),this.__originalClip(n)},i.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},i.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},i.bezierCurveTo=function(e,n,s,a,r,l){t.bezierCurveTo(e,n,s,a,r,l),this.__originalBezierCurveTo(e,n,s,a,r,l)},i.rect=function(e,n,s,a){t.rect(e,n,s,a),this.__originalRect(e,n,s,a)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}var Wo=class{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(let t in this.cache){let e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}};function Ka(i,t,e,n,s,a,r,l,o,c){let[u,h,d,f,g,v]=at(i);if(h===0&&d===0){let m=r*u+g,b=Math.round(m),y=l*f+v,_=Math.round(y),w=(r+o)*u+g,S=Math.abs(Math.round(w)-b)||1,x=(l+c)*f+v,T=Math.abs(Math.round(x)-_)||1;return i.setTransform(Math.sign(u),0,0,Math.sign(f),b,_),i.drawImage(t,e,n,s,a,0,0,S,T),i.setTransform(u,h,d,f,g,v),[S,T]}if(u===0&&f===0){let m=l*d+g,b=Math.round(m),y=r*h+v,_=Math.round(y),w=(l+c)*d+g,S=Math.abs(Math.round(w)-b)||1,x=(r+o)*h+v,T=Math.abs(Math.round(x)-_)||1;return i.setTransform(0,Math.sign(h),Math.sign(d),0,b,_),i.drawImage(t,e,n,s,a,0,0,T,S),i.setTransform(u,h,d,f,g,v),[T,S]}i.drawImage(t,e,n,s,a,r,l,o,c);let A=Math.hypot(u,h),p=Math.hypot(d,f);return[A*o,p*c]}function qv(i){let{width:t,height:e}=i;if(t>Zd||e>Zd)return null;let n=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=t+1,r=new Uint8Array(a*(e+1)),l,o,c,u=t+7&-8,h=new Uint8Array(u*e),d=0;for(let p of i.data){let m=128;for(;m>0;)h[d++]=p&m?0:255,m>>=1}let f=0;for(d=0,h[d]!==0&&(r[0]=1,++f),o=1;o<t;o++)h[d]!==h[d+1]&&(r[o]=h[d]?2:1,++f),d++;for(h[d]!==0&&(r[o]=2,++f),l=1;l<e;l++){d=l*u,c=l*a,h[d-u]!==h[d]&&(r[c]=h[d]?1:8,++f);let p=(h[d]?4:0)+(h[d-u]?8:0);for(o=1;o<t;o++)p=(p>>2)+(h[d+1]?4:0)+(h[d-u+1]?8:0),s[p]&&(r[c+o]=s[p],++f),d++;if(h[d-u]!==h[d]&&(r[c+o]=h[d]?2:4,++f),f>n)return null}for(d=u*(e-1),c=l*a,h[d]!==0&&(r[c]=8,++f),o=1;o<t;o++)h[d]!==h[d+1]&&(r[c+o]=h[d]?4:8,++f),d++;if(h[d]!==0&&(r[c+o]=4,++f),f>n)return null;let g=new Int32Array([0,a,-1,0,-a,0,0,0,1]),v=new Path2D;for(l=0;f&&l<=e;l++){let p=l*a,m=p+t;for(;p<m&&!r[p];)p++;if(p===m)continue;v.moveTo(p%a,l);let b=p,y=r[p];do{let _=g[y];do p+=_;while(!r[p]);let w=r[p];w!==5&&w!==10?(y=w,r[p]=0):(y=w&51*y>>4,r[p]&=y>>2|y<<2),v.lineTo(p%a,p/a|0),r[p]||--f}while(b!==p);--l}return h=null,r=null,function(p){p.save(),p.scale(1/t,-1/e),p.translate(0,-e),p.fill(v),p.beginPath(),p.restore()}}var pr=class{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=lf,this.textMatrixScale=1,this.fontMatrix=Ro,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=It.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){let t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=M.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){let n=M.applyTransform(e,t),s=M.applyTransform(e.slice(2),t),a=M.applyTransform([e[0],e[3]],t),r=M.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],s[0],a[0],r[0]),this.minY=Math.min(this.minY,n[1],s[1],a[1],r[1]),this.maxX=Math.max(this.maxX,n[0],s[0],a[0],r[0]),this.maxY=Math.max(this.maxY,n[1],s[1],a[1],r[1])}updateScalingPathMinMax(t,e){M.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,s,a,r,l,o,c,u){let h=M.bezierBoundingBox(e,n,s,a,r,l,o,c,u);u||this.updateRectMinMax(t,h)}getPathBoundingBox(t=Ht.FILL,e=null){let n=[this.minX,this.minY,this.maxX,this.maxY];if(t===Ht.STROKE){e||K("Stroke bounding box must include transform.");let s=M.singularValueDecompose2dScale(e),a=s[0]*this.lineWidth/2,r=s[1]*this.lineWidth/2;n[0]-=a,n[1]-=r,n[2]+=a,n[3]+=r}return n}updateClipFromPath(){let t=M.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Ht.FILL,e=null){return M.intersect(this.clipBox,this.getPathBoundingBox(t,e))}};function Jd(i,t){if(t instanceof ImageData){i.putImageData(t,0,0);return}let e=t.height,n=t.width,s=e%Kt,a=(e-s)/Kt,r=s===0?a:a+1,l=i.createImageData(n,Kt),o=0,c,u=t.data,h=l.data,d,f,g,v;if(t.kind===tr.GRAYSCALE_1BPP){let A=u.byteLength,p=new Uint32Array(h.buffer,0,h.byteLength>>2),m=p.length,b=n+7>>3,y=4294967295,_=Dt.isLittleEndian?4278190080:255;for(d=0;d<r;d++){for(g=d<a?Kt:s,c=0,f=0;f<g;f++){let w=A-o,S=0,x=w>b?n:w*8-7,T=x&-8,R=0,L=0;for(;S<T;S+=8)L=u[o++],p[c++]=L&128?y:_,p[c++]=L&64?y:_,p[c++]=L&32?y:_,p[c++]=L&16?y:_,p[c++]=L&8?y:_,p[c++]=L&4?y:_,p[c++]=L&2?y:_,p[c++]=L&1?y:_;for(;S<x;S++)R===0&&(L=u[o++],R=128),p[c++]=L&R?y:_,R>>=1}for(;c<m;)p[c++]=0;i.putImageData(l,0,d*Kt)}}else if(t.kind===tr.RGBA_32BPP){for(f=0,v=n*Kt*4,d=0;d<a;d++)h.set(u.subarray(o,o+v)),o+=v,i.putImageData(l,0,f),f+=Kt;d<r&&(v=n*s*4,h.set(u.subarray(o,o+v)),i.putImageData(l,0,f))}else if(t.kind===tr.RGB_24BPP)for(g=Kt,v=n*g,d=0;d<r;d++){for(d>=a&&(g=s,v=n*g),c=0,f=v;f--;)h[c++]=u[o++],h[c++]=u[o++],h[c++]=u[o++],h[c++]=255;i.putImageData(l,0,d*Kt)}else throw new Error(`bad image kind: ${t.kind}`)}function tf(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}let e=t.height,n=t.width,s=e%Kt,a=(e-s)/Kt,r=s===0?a:a+1,l=i.createImageData(n,Kt),o=0,c=t.data,u=l.data;for(let h=0;h<r;h++){let d=h<a?Kt:s;({srcPos:o}=Fv({src:c,srcPos:o,dest:u,width:n,height:d,nonBlackColor:0})),i.putImageData(l,0,h*Kt)}}function _s(i,t){let e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let n of e)i[n]!==void 0&&(t[n]=i[n]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function Qa(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!Pt){let{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}}function ef(i,t){if(t)return!0;let e=M.singularValueDecompose2dScale(i);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);let n=Math.fround((globalThis.devicePixelRatio||1)*mi.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}var jv=["butt","round","square"],Vv=["miter","round","bevel"],Xv={},nf={},Rn=class i{constructor(t,e,n,s,a,{optionalContentConfig:r,markedContentStack:l=null},o,c){this.ctx=t,this.current=new pr(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=r,this.cachedCanvases=new Wo(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){let a=this.ctx.canvas.width,r=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,a,r),this.ctx.fillStyle=l,n){let o=this.cachedCanvases.getCanvas("transparent",a,r);this.compositeCtx=this.ctx,this.transparentCanvas=o.canvas,this.ctx=o.context,this.ctx.save(),this.ctx.transform(...at(this.compositeCtx))}this.ctx.save(),Qa(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=at(this.ctx)}executeOperatorList(t,e,n,s){let a=t.argsArray,r=t.fnArray,l=e||0,o=a.length;if(o===l)return l;let c=o-l>Wd&&typeof n=="function",u=c?Date.now()+Pv:0,h=0,d=this.commonObjs,f=this.objs,g;for(;;){if(s!==void 0&&l===s.nextBreakPoint)return s.breakIt(l,n),l;if(g=r[l],g!==we.dependency)this[g].apply(this,a[l]);else for(let v of a[l]){let A=v.startsWith("g_")?d:f;if(!A.has(v))return A.get(v,n),l}if(l++,l===o)return l;if(c&&++h>Wd){if(Date.now()>u)return n(),l;h=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let t of this._cachedBitmapsMap.values()){for(let e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){let t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){let e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){let n=t.width??t.displayWidth,s=t.height??t.displayHeight,a=Math.max(Math.hypot(e[0],e[1]),1),r=Math.max(Math.hypot(e[2],e[3]),1),l=n,o=s,c="prescale1",u,h;for(;a>2&&l>1||r>2&&o>1;){let d=l,f=o;a>2&&l>1&&(d=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),a/=l/d),r>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o)/2,r/=o/f),u=this.cachedCanvases.getCanvas(c,d,f),h=u.context,h.clearRect(0,0,d,f),h.drawImage(t,0,0,l,o,0,0,d,f),t=u.canvas,l=d,o=f,c=c==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:o}}_createMaskCanvas(t){let e=this.ctx,{width:n,height:s}=t,a=this.current.fillColor,r=this.current.patternFill,l=at(e),o,c,u,h;if((t.bitmap||t.data)&&t.count>1){let x=t.bitmap||t.data.buffer;c=JSON.stringify(r?l:[l.slice(0,4),a]),o=this._cachedBitmapsMap.get(x),o||(o=new Map,this._cachedBitmapsMap.set(x,o));let T=o.get(c);if(T&&!r){let R=Math.round(Math.min(l[0],l[2])+l[4]),L=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:T,offsetX:R,offsetY:L}}u=T}u||(h=this.cachedCanvases.getCanvas("maskCanvas",n,s),tf(h.context,t));let d=M.transform(l,[1/n,0,0,-1/s,0,0]);d=M.transform(d,[1,0,0,1,0,-s]);let[f,g,v,A]=M.getAxialAlignedBoundingBox([0,0,n,s],d),p=Math.round(v-f)||1,m=Math.round(A-g)||1,b=this.cachedCanvases.getCanvas("fillCanvas",p,m),y=b.context,_=f,w=g;y.translate(-_,-w),y.transform(...d),u||(u=this._scaleImage(h.canvas,ke(y)),u=u.img,o&&r&&o.set(c,u)),y.imageSmoothingEnabled=ef(at(y),t.interpolate),Ka(y,u,0,0,u.width,u.height,0,0,n,s),y.globalCompositeOperation="source-in";let S=M.transform(ke(y),[1,0,0,1,-_,-w]);return y.fillStyle=r?a.getPattern(e,this,S,Ht.FILL):a,y.fillRect(0,0,n,s),o&&!r&&(this.cachedCanvases.delete("fillCanvas"),o.set(c,b.canvas)),{canvas:b.canvas,offsetX:Math.round(_),offsetY:Math.round(w)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=jv[t]}setLineJoin(t){this.ctx.lineJoin=Vv[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){let n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(let[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=s.context;let a=this.ctx;a.setTransform(...at(this.suspendedCtx)),_s(this.suspendedCtx,a),Gv(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),_s(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){let a=s[0],r=s[1],l=s[2]-a,o=s[3]-r;l===0||o===0||(this.genericComposeSMask(e.context,n,l,o,e.subtype,e.backdrop,e.transferMap,a,r,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,a,r,l,o,c,u,h){let d=t.canvas,f=o-u,g=c-h;if(r){let A=M.makeHexColor(...r);if(f<0||g<0||f+n>d.width||g+s>d.height){let p=this.cachedCanvases.getCanvas("maskExtension",n,s),m=p.context;m.drawImage(d,-f,-g),m.globalCompositeOperation="destination-atop",m.fillStyle=A,m.fillRect(0,0,n,s),m.globalCompositeOperation="source-over",d=p.canvas,f=g=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);let p=new Path2D;p.rect(f,g,n,s),t.clip(p),t.globalCompositeOperation="destination-atop",t.fillStyle=A,t.fillRect(f,g,n,s),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));let v=new Path2D;v.rect(o,c,n,s),e.clip(v),e.globalCompositeOperation="destination-in",e.drawImage(d,f,g,n,s,o,c,n,s),e.restore()}save(){this.inSMaskMode?(_s(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),_s(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,s,a,r){this.ctx.transform(t,e,n,s,a,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){let s=this.ctx,a=this.current,r=a.x,l=a.y,o,c,u=at(s),h=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,d=h?n.slice(0):null;for(let f=0,g=0,v=t.length;f<v;f++)switch(t[f]|0){case we.rectangle:r=e[g++],l=e[g++];let A=e[g++],p=e[g++],m=r+A,b=l+p;s.moveTo(r,l),A===0||p===0?s.lineTo(m,b):(s.lineTo(m,l),s.lineTo(m,b),s.lineTo(r,b)),h||a.updateRectMinMax(u,[r,l,m,b]),s.closePath();break;case we.moveTo:r=e[g++],l=e[g++],s.moveTo(r,l),h||a.updatePathMinMax(u,r,l);break;case we.lineTo:r=e[g++],l=e[g++],s.lineTo(r,l),h||a.updatePathMinMax(u,r,l);break;case we.curveTo:o=r,c=l,r=e[g+4],l=e[g+5],s.bezierCurveTo(e[g],e[g+1],e[g+2],e[g+3],r,l),a.updateCurvePathMinMax(u,o,c,e[g],e[g+1],e[g+2],e[g+3],r,l,d),g+=6;break;case we.curveTo2:o=r,c=l,s.bezierCurveTo(r,l,e[g],e[g+1],e[g+2],e[g+3]),a.updateCurvePathMinMax(u,o,c,r,l,e[g],e[g+1],e[g+2],e[g+3],d),r=e[g+2],l=e[g+3],g+=4;break;case we.curveTo3:o=r,c=l,r=e[g+2],l=e[g+3],s.bezierCurveTo(e[g],e[g+1],r,l,r,l),a.updateCurvePathMinMax(u,o,c,e[g],e[g+1],r,l,r,l,d),g+=4;break;case we.closePath:s.closePath();break}h&&a.updateScalingPathMinMax(u,d),a.setCurrentPoint(r,l)}closePath(){this.ctx.closePath()}stroke(t=!0){let e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&n?.getPattern?(e.save(),e.strokeStyle=n.getPattern(e,this,ke(e),Ht.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){let e=this.ctx,n=this.current.fillColor,s=this.current.patternFill,a=!1;s&&(e.save(),e.fillStyle=n.getPattern(e,this,ke(e),Ht.FILL),a=!0);let r=this.current.getClippedPathBoundingBox();this.contentVisible&&r!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),a&&e.restore(),t&&this.consumePath(r)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Xv}eoClip(){this.pendingClip=nf}beginText(){this.current.textMatrix=lf,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(let n of t)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){let n=this.commonObjs.get(t),s=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=n.fontMatrix||Ro,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&z("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;let a=n.loadedName||"sans-serif",r=n.systemFontInfo?.css||`"${a}", ${n.fallbackName}`,l="normal";n.black?l="900":n.bold&&(l="bold");let o=n.italic?"italic":"normal",c=e;e<Qd?c=Qd:e>$d&&(c=$d),this.current.fontSizeScale=e/c,this.ctx.font=`${o} ${l} ${c}px ${r}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,s,a,r){this.current.textMatrix=[t,e,n,s,a,r],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,s,a){let r=this.ctx,l=this.current,o=l.font,c=l.textRenderingMode,u=l.fontSize/l.fontSizeScale,h=c&It.FILL_STROKE_MASK,d=!!(c&It.ADD_TO_PATH_FLAG),f=l.patternFill&&!o.missingFile,g=l.patternStroke&&!o.missingFile,v;(o.disableFontFace||d||f||g)&&(v=o.getPathGenerator(this.commonObjs,t)),o.disableFontFace||f||g?(r.save(),r.translate(e,n),r.beginPath(),v(r,u),(h===It.FILL||h===It.FILL_STROKE)&&(s&&r.setTransform(...s),r.fill()),(h===It.STROKE||h===It.FILL_STROKE)&&(a&&r.setTransform(...a),r.stroke()),r.restore()):((h===It.FILL||h===It.FILL_STROKE)&&r.fillText(t,e,n),(h===It.STROKE||h===It.FILL_STROKE)&&r.strokeText(t,e,n)),d&&(this.pendingTextPaths||=[]).push({transform:at(r),x:e,y:n,fontSize:u,addToPath:v})}get isFontSubpixelAAEnabled(){let{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);let e=t.getImageData(0,0,10,10).data,n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return U(this,"isFontSubpixelAAEnabled",n)}showText(t){let e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);let s=e.fontSize;if(s===0)return;let a=this.ctx,r=e.fontSizeScale,l=e.charSpacing,o=e.wordSpacing,c=e.fontDirection,u=e.textHScale*c,h=t.length,d=n.vertical,f=d?1:-1,g=n.defaultVMetrics,v=s*e.fontMatrix[0],A=e.textRenderingMode===It.FILL&&!n.disableFontFace&&!e.patternFill;a.save(),a.transform(...e.textMatrix),a.translate(e.x,e.y+e.textRise),c>0?a.scale(u,-1):a.scale(u,1);let p,m;if(e.patternFill){a.save();let S=e.fillColor.getPattern(a,this,ke(a),Ht.FILL);p=at(a),a.restore(),a.fillStyle=S}if(e.patternStroke){a.save();let S=e.strokeColor.getPattern(a,this,ke(a),Ht.STROKE);m=at(a),a.restore(),a.strokeStyle=S}let b=e.lineWidth,y=e.textMatrixScale;if(y===0||b===0){let S=e.textRenderingMode&It.FILL_STROKE_MASK;(S===It.STROKE||S===It.FILL_STROKE)&&(b=this.getSinglePixelWidth())}else b/=y;if(r!==1&&(a.scale(r,r),b/=r),a.lineWidth=b,n.isInvalidPDFjsFont){let S=[],x=0;for(let T of t)S.push(T.unicode),x+=T.width;a.fillText(S.join(""),0,0),e.x+=x*v*u,a.restore(),this.compose();return}let _=0,w;for(w=0;w<h;++w){let S=t[w];if(typeof S=="number"){_+=f*S*s/1e3;continue}let x=!1,T=(S.isSpace?o:0)+l,R=S.fontChar,L=S.accent,V,At,Y=S.width;if(d){let X=S.vmetric||g,D=-(S.vmetric?X[1]:Y*.5)*v,O=X[2]*v;Y=X?-X[0]:Y,V=D/r,At=(_+O)/r}else V=_/r,At=0;if(n.remeasure&&Y>0){let X=a.measureText(R).width*1e3/s*r;if(Y<X&&this.isFontSubpixelAAEnabled){let D=Y/X;x=!0,a.save(),a.scale(D,1),V/=D}else Y!==X&&(V+=(Y-X)/2e3*s/r)}if(this.contentVisible&&(S.isInFont||n.missingFile)){if(A&&!L)a.fillText(R,V,At);else if(this.paintChar(R,V,At,p,m),L){let X=V+s*L.offset.x/r,D=At-s*L.offset.y/r;this.paintChar(L.fontChar,X,D,p,m)}}let Ft=d?Y*v-T*c:Y*v+T*c;_+=Ft,x&&a.restore()}d?e.y-=_:e.x+=_*u,a.restore(),this.compose()}showType3Text(t){let e=this.ctx,n=this.current,s=n.font,a=n.fontSize,r=n.fontDirection,l=s.vertical?1:-1,o=n.charSpacing,c=n.wordSpacing,u=n.textHScale*r,h=n.fontMatrix||Ro,d=t.length,f=n.textRenderingMode===It.INVISIBLE,g,v,A,p;if(!(f||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(u,r),g=0;g<d;++g){if(v=t[g],typeof v=="number"){p=l*v*a/1e3,this.ctx.translate(p,0),n.x+=p*u;continue}let m=(v.isSpace?c:0)+o,b=s.charProcOperatorList[v.operatorListId];if(!b){z(`Type3 character "${v.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=v,this.save(),e.scale(a,a),e.transform(...h),this.executeOperatorList(b),this.restore()),A=M.applyTransform([v.width,0],h)[0]*a+m,e.translate(A,0),n.x+=A*u}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,s,a,r){this.ctx.rect(n,s,a-n,r-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){let n=t[1],s=this.baseTransform||at(this.ctx),a={createCanvasGraphics:r=>new i(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new $o(t,n,this.ctx,a,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=M.makeHexColor(t,e,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=M.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=Uv(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;let e=this.ctx;this.save();let n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,ke(e),Ht.SHADING);let s=ke(e);if(s){let{width:a,height:r}=e.canvas,[l,o,c,u]=M.getAxialAlignedBoundingBox([0,0,a,r],s);this.ctx.fillRect(l,o,c-l,u-o)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){K("Should not call beginInlineImage")}beginImageData(){K("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=at(this.ctx),e)){let n=e[2]-e[0],s=e[3]-e[1];this.ctx.rect(e[0],e[1],n,s),this.current.updateRectMinMax(at(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let e=this.ctx;t.isolated||Nr("TODO: Support non-isolated groups."),t.knockout&&z("Knockout groups not supported.");let n=at(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=M.getAxialAlignedBoundingBox(t.bbox,at(e)),a=[0,0,e.canvas.width,e.canvas.height];s=M.intersect(s,a)||[0,0,0,0];let r=Math.floor(s[0]),l=Math.floor(s[1]),o=Math.max(Math.ceil(s[2])-r,1),c=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,o,c]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);let h=this.cachedCanvases.getCanvas(u,o,c),d=h.context;d.translate(-r,-l),d.transform(...n),t.smask?this.smaskStack.push({canvas:h.canvas,context:d,offsetX:r,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(r,l),e.save()),_s(e,d),this.ctx=d,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;let e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let s=at(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);let a=M.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,e,n,s,a){if(this.#t(),Qa(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){let r=e[2]-e[0],l=e[3]-e[1];if(a&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=r,e[3]=l;let[o,c]=M.singularValueDecompose2dScale(at(this.ctx)),{viewportScale:u}=this,h=Math.ceil(r*this.outputScaleX*u),d=Math.ceil(l*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(h,d);let{canvas:f,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(o,0,0,-c,0,l*c),Qa(this.ctx)}else Qa(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],r,l),this.ctx.clip(),this.ctx.beginPath()}this.current=new pr(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;let e=t.count;t=this.getObject(t.data,t),t.count=e;let n=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=qv(t)),s.compiled)){s.compiled(n);return}let a=this._createMaskCanvas(t),r=a.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(r,a.offsetX,a.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,s=0,a,r){if(!this.contentVisible)return;t=this.getObject(t.data,t);let l=this.ctx;l.save();let o=at(l);l.transform(e,n,s,a,0,0);let c=this._createMaskCanvas(t);l.setTransform(1,0,0,1,c.offsetX-o[4],c.offsetY-o[5]);for(let u=0,h=r.length;u<h;u+=2){let d=M.transform(o,[e,n,s,a,r[u],r[u+1]]),[f,g]=M.applyTransform([0,0],d);l.drawImage(c.canvas,f,g)}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;let e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(let a of t){let{data:r,width:l,height:o,transform:c}=a,u=this.cachedCanvases.getCanvas("maskCanvas",l,o),h=u.context;h.save();let d=this.getObject(r,a);tf(h,d),h.globalCompositeOperation="source-in",h.fillStyle=s?n.getPattern(h,this,ke(e),Ht.FILL):n,h.fillRect(0,0,l,o),h.restore(),e.save(),e.transform(...c),e.scale(1,-1),Ka(e,u.canvas,0,0,l,o,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;let e=this.getObject(t);if(!e){z("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,s){if(!this.contentVisible)return;let a=this.getObject(t);if(!a){z("Dependent image isn't ready yet");return}let r=a.width,l=a.height,o=[];for(let c=0,u=s.length;c<u;c+=2)o.push({transform:[e,0,0,n,s[c],s[c+1]],x:0,y:0,w:r,h:l});this.paintInlineImageXObjectGroup(a,o)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;let{bitmap:e,width:n,height:s}=t,a=this.cachedCanvases.getCanvas("inlineImage",n,s),r=a.context;return r.filter=this.current.transferMaps,r.drawImage(e,0,0),r.filter="none",a.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;let e=t.width,n=t.height,s=this.ctx;if(this.save(),!Pt){let{filter:l}=s;l!=="none"&&l!==""&&(s.filter="none")}s.scale(1/e,-1/n);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{let o=this.cachedCanvases.getCanvas("inlineImage",e,n).context;Jd(o,t),a=this.applyTransferMapsToCanvas(o)}let r=this._scaleImage(a,ke(s));s.imageSmoothingEnabled=ef(at(s),t.interpolate),Ka(s,r.img,0,0,r.paintWidth,r.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;let n=this.ctx,s;if(t.bitmap)s=t.bitmap;else{let a=t.width,r=t.height,o=this.cachedCanvases.getCanvas("inlineImage",a,r).context;Jd(o,t),s=this.applyTransferMapsToCanvas(o)}for(let a of e)n.save(),n.transform(...a.transform),n.scale(1,-1),Ka(n,s,a.x,a.y,a.w,a.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){let e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);let n=this.ctx;this.pendingClip&&(e||(this.pendingClip===nf?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let t=at(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{let e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:t}=this.current,{a:e,b:n,c:s,d:a}=this.ctx.getTransform(),r,l;if(n===0&&s===0){let o=Math.abs(e),c=Math.abs(a);if(o===c)if(t===0)r=l=1/o;else{let u=o*t;r=l=u<1?1/u:1}else if(t===0)r=1/o,l=1/c;else{let u=o*t,h=c*t;r=u<1?1/u:1,l=h<1?1/h:1}}else{let o=Math.abs(e*a-n*s),c=Math.hypot(e,n),u=Math.hypot(s,a);if(t===0)r=u/o,l=c/o;else{let h=t*o;r=u>h?u/h:1,l=c>h?c/h:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t){let{ctx:e}=this,{lineWidth:n}=this.current,[s,a]=this.getScaleForStroking();if(e.lineWidth=n||1,s===1&&a===1){e.stroke();return}let r=e.getLineDash();if(t&&e.save(),e.scale(s,a),r.length>0){let l=Math.max(s,a);e.setLineDash(r.map(o=>o/l)),e.lineDashOffset/=l}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};for(let i in we)Rn.prototype[i]!==void 0&&(Rn.prototype[we[i]]=Rn.prototype[i]);var Vi=class{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}},$a={UNKNOWN:0,DATA:1,ERROR:2},gt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function sf(){}function oe(i){switch(i instanceof Error||typeof i=="object"&&i!==null||K('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Ye(i.message);case"MissingPDFException":return new Xi(i.message);case"PasswordException":return new xs(i.message,i.code);case"UnexpectedResponseException":return new Dn(i.message,i.status);case"UnknownErrorException":return new Ts(i.message,i.details);default:return new Ts(i.message,i.toString())}}var ji=class{#t=new AbortController;constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){let n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===$a.DATA)s.resolve(t.data);else if(t.callback===$a.ERROR)s.reject(oe(t.reason));else throw new Error("Unexpected callback case");return}let e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){let n=this.sourceName,s=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(r){a.postMessage({sourceName:n,targetName:s,callback:$a.DATA,callbackId:t.callbackId,data:r})},function(r){a.postMessage({sourceName:n,targetName:s,callback:$a.ERROR,callbackId:t.callbackId,reason:oe(r)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){let n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){let s=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[s]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(r){a.reject(r)}return a.promise}sendWithStream(t,e,n,s){let a=this.streamId++,r=this.sourceName,l=this.targetName,o=this.comObj;return new ReadableStream({start:c=>{let u=Promise.withResolvers();return this.streamControllers[a]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:r,targetName:l,action:t,streamId:a,data:e,desiredSize:c.desiredSize},s),u.promise},pull:c=>{let u=Promise.withResolvers();return this.streamControllers[a].pullCall=u,o.postMessage({sourceName:r,targetName:l,stream:gt.PULL,streamId:a,desiredSize:c.desiredSize}),u.promise},cancel:c=>{mt(c instanceof Error,"cancel must have a valid reason");let u=Promise.withResolvers();return this.streamControllers[a].cancelCall=u,this.streamControllers[a].isClosed=!0,o.postMessage({sourceName:r,targetName:l,stream:gt.CANCEL,streamId:a,reason:oe(c)}),u.promise}},n)}#i(t){let e=t.streamId,n=this.sourceName,s=t.sourceName,a=this.comObj,r=this,l=this.actionHandler[t.action],o={enqueue(c,u=1,h){if(this.isCancelled)return;let d=this.desiredSize;this.desiredSize-=u,d>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:s,stream:gt.ENQUEUE,streamId:e,chunk:c},h)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:gt.CLOSE,streamId:e}),delete r.streamSinks[e])},error(c){mt(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:gt.ERROR,streamId:e,reason:oe(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[e]=o,Promise.try(l,t.data,o).then(function(){a.postMessage({sourceName:n,targetName:s,stream:gt.START_COMPLETE,streamId:e,success:!0})},function(c){a.postMessage({sourceName:n,targetName:s,stream:gt.START_COMPLETE,streamId:e,reason:oe(c)})})}#n(t){let e=t.streamId,n=this.sourceName,s=t.sourceName,a=this.comObj,r=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case gt.START_COMPLETE:t.success?r.startCall.resolve():r.startCall.reject(oe(t.reason));break;case gt.PULL_COMPLETE:t.success?r.pullCall.resolve():r.pullCall.reject(oe(t.reason));break;case gt.PULL:if(!l){a.postMessage({sourceName:n,targetName:s,stream:gt.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,Promise.try(l.onPull||sf).then(function(){a.postMessage({sourceName:n,targetName:s,stream:gt.PULL_COMPLETE,streamId:e,success:!0})},function(c){a.postMessage({sourceName:n,targetName:s,stream:gt.PULL_COMPLETE,streamId:e,reason:oe(c)})});break;case gt.ENQUEUE:if(mt(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(t.chunk);break;case gt.CLOSE:if(mt(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),this.#a(r,e);break;case gt.ERROR:mt(r,"error should have stream controller"),r.controller.error(oe(t.reason)),this.#a(r,e);break;case gt.CANCEL_COMPLETE:t.success?r.cancelCall.resolve():r.cancelCall.reject(oe(t.reason)),this.#a(r,e);break;case gt.CANCEL:if(!l)break;let o=oe(t.reason);Promise.try(l.onCancel||sf,o).then(function(){a.postMessage({sourceName:n,targetName:s,stream:gt.CANCEL_COMPLETE,streamId:e,success:!0})},function(c){a.postMessage({sourceName:n,targetName:s,stream:gt.CANCEL_COMPLETE,streamId:e,reason:oe(c)})}),l.sinkCapability.reject(o),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#a(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}},Zo=class{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}getAll(){return $c(this.#t)}has(t){return this.#t.has(t)}},Cn=Symbol("INTERNAL"),Jo=class{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:n,usage:s,rbGroups:a}){this.#t=!!(t&Zt.DISPLAY),this.#e=!!(t&Zt.PRINT),this.name=e,this.intent=n,this.usage=s,this.rbGroups=a}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;let{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==Cn&&K("Internal method `_setVisible` called."),this.#i=n,this.#n=e}},tc=class{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=Zt.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(let n of t.groups)this.#e.set(n.id,new Jo(e,n));if(t.baseState==="OFF")for(let n of this.#e.values())n._setVisible(Cn,!1);for(let n of t.on)this.#e.get(n)._setVisible(Cn,!0);for(let n of t.off)this.#e.get(n)._setVisible(Cn,!1);this.#i=this.getHash()}}#a(t){let e=t.length;if(e<2)return!0;let n=t[0];for(let s=1;s<e;s++){let a=t[s],r;if(Array.isArray(a))r=this.#a(a);else if(this.#e.has(a))r=this.#e.get(a).visible;else return z(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Nr("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(z(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(let e of t.ids){if(!this.#e.has(e))return z(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(let e of t.ids){if(!this.#e.has(e))return z(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(let e of t.ids){if(!this.#e.has(e))return z(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(let e of t.ids){if(!this.#e.has(e))return z(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return z(`Unknown optional content policy ${t.policy}.`),!0}return z(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){let s=this.#e.get(t);if(!s){z(`Optional content group not found: ${t}`);return}if(n&&e&&s.rbGroups.length)for(let a of s.rbGroups)for(let r of a)r!==t&&this.#e.get(r)?._setVisible(Cn,!1,!0);s._setVisible(Cn,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let n;for(let s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}let a=this.#e.get(s);if(a)switch(n){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!a.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?$c(this.#e):null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;let t=new rr;for(let[e,n]of this.#e)t.update(`${e}:${n.visible}`);return this.#t=t.hexdigest()}},ec=class{constructor(t,{disableRange:e=!1,disableStream:n=!1}){mt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:s,initialData:a,progressiveDone:r,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=r,this._contentDispositionFilename=l,a?.length>0){let o=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(o)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((o,c)=>{this._onReceiveData({begin:o,chunk:c})}),t.addProgressListener((o,c)=>{this._onProgress({loaded:o,total:c})}),t.addProgressiveReadListener(o=>{this._onReceiveData({chunk:o})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){let n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{let s=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(n),!0)});mt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){let e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){mt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let t=this._queuedChunks;return this._queuedChunks=null,new ic(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let n=new nc(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}},ic=class{constructor(t,e,n=!1,s=null){this._stream=t,this._done=n||!1,this._filename=Zc(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(let a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},nc=class{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(let n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};function Yv(i){let t=!0,e=n("filename\\*","i").exec(i);if(e){e=e[1];let u=l(e);return u=unescape(u),u=o(u),u=c(u),a(u)}if(e=r(i),e){let u=c(e);return a(u)}if(e=n("filename","i").exec(i),e){e=e[1];let u=l(e);return u=c(u),a(u)}function n(u,h){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function s(u,h){if(u){if(!/^[\x00-\xFF]+$/.test(h))return h;try{let d=new TextDecoder(u,{fatal:!0}),f=kr(h);h=d.decode(f),t=!1}catch{}}return h}function a(u){return t&&/[\x80-\xff]/.test(u)&&(u=s("utf-8",u),t&&(u=s("iso-8859-1",u))),u}function r(u){let h=[],d,f=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=f.exec(u))!==null;){let[,v,A,p]=d;if(v=parseInt(v,10),v in h){if(v===0)break;continue}h[v]=[A,p]}let g=[];for(let v=0;v<h.length&&v in h;++v){let[A,p]=h[v];p=l(p),A&&(p=unescape(p),v===0&&(p=o(p))),g.push(p)}return g.join("")}function l(u){if(u.startsWith('"')){let h=u.slice(1).split('\\"');for(let d=0;d<h.length;++d){let f=h[d].indexOf('"');f!==-1&&(h[d]=h[d].slice(0,f),h.length=d+1),h[d]=h[d].replaceAll(/\\(.)/g,"$1")}u=h.join('"')}return u}function o(u){let h=u.indexOf("'");if(h===-1)return u;let d=u.slice(0,h),g=u.slice(h+1).replace(/^[^']*'/,"");return s(d,g)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,d,f,g){if(f==="q"||f==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,A){return String.fromCharCode(parseInt(A,16))}),s(d,g);try{g=atob(g)}catch{}return s(d,g)})}return""}function uf(i,t){let e=new Headers;if(!i||!t||typeof t!="object")return e;for(let n in t){let s=t[n];s!==void 0&&e.append(n,s)}return e}function zr(i){try{return new URL(i).origin}catch{}return null}function hf({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:n}){let s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(i.get("Content-Length"),10);return!Number.isInteger(a)||(s.suggestedLength=a,a<=2*e)||n||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function df(i){let t=i.get("Content-Disposition");if(t){let e=Yv(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Zc(e))return e}return null}function Br(i,t){return i===404||i===0&&t.startsWith("file:")?new Xi('Missing PDF "'+t+'".'):new Dn(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i)}function ff(i){return i===200||i===206}function pf(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function gf(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(z(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}var gr=class{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=uf(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return mt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new sc(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let n=new ac(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},sc=class{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;let e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;let n=new Headers(t.headers),s=e.url;fetch(s,pf(n,this._withCredentials,this._abortController)).then(a=>{if(t._responseOrigin=zr(a.url),!ff(a.status))throw Br(a.status,s);this._reader=a.body.getReader(),this._headersCapability.resolve();let r=a.headers,{allowRangeRequests:l,suggestedLength:o}=hf({responseHeaders:r,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=o||this._contentLength,this._filename=df(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ye("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;let{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:gf(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}},ac=class{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;let s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;let a=new Headers(t.headers);a.append("Range",`bytes=${e}-${n-1}`);let r=s.url;fetch(r,pf(a,this._withCredentials,this._abortController)).then(l=>{let o=zr(l.url);if(o!==t._responseOrigin)throw new Error(`Expected range response-origin "${o}" to match "${t._responseOrigin}".`);if(!ff(l.status))throw Br(l.status,r);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;let{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:gf(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}},To=200,Co=206;function Kv(i){let t=i.response;return typeof t!="string"?t:kr(t).buffer}var rc=class{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=uf(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){let s={begin:t,end:e};for(let a in n)s[a]=n[a];return this.request(s)}requestFull(t){return this.request(t)}request(t){let e=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(let[a,r]of this.headers)e.setRequestHeader(a,r);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=Co):s.expectedStatus=To,e.responseType="arraybuffer",t.onError&&(e.onerror=function(a){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){let n=this.pendingRequests[t];n&&n.onProgress?.(e)}onStateChange(t,e){let n=this.pendingRequests[t];if(!n)return;let s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){n.onError?.(s.status);return}let a=s.status||To;if(!(a===To&&n.expectedStatus===Co)&&a!==n.expectedStatus){n.onError?.(s.status);return}let l=Kv(s);if(a===Co){let o=s.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(o);n.onDone({begin:parseInt(c[1],10),chunk:l})}else l?n.onDone({begin:0,chunk:l}):n.onError?.(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){let e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}},lc=class{constructor(t){this._source=t,this._manager=new rc(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){let e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return mt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new oc(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){let n=new cc(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},oc=class{constructor(t,e){this._manager=t;let n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=zr(e.responseURL);let n=e.getAllResponseHeaders(),s=new Headers(n?n.trim().split(/[\r\n]+/).map(l=>{let[o,...c]=l.split(": ");return[o,c.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:r}=hf({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=df(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Br(t,this._url),this._headersCapability.reject(this._storedError);for(let e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},cc=class{constructor(t,e,n){this._manager=t;let s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,n,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){let t=zr(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){let e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(let n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Br(t,this._url);for(let e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},Qv=/^[a-z][a-z0-9\-+.]+:/i;function $v(i){if(Qv.test(i))return new URL(i);let t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(i))}var uc=class{constructor(t){this.source=t,this.url=$v(t.url),mt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return mt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new hc(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let n=new dc(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},hc=class{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;let e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new Xi(`Missing PDF "${this._url}".`)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ye("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},dc=class{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let s=t.source;this._isStreamingSupported=!s.disableStream;let a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}},Wv=1e5,Yt=30,Zv=.8,Os=class i{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#a=null;#s=null;#c=0;#l=0;#u=null;#o=null;#h=0;#r=0;#d=Object.create(null);#f=[];#p=null;#m=[];#g=new WeakMap;#v=null;static#b=new Map;static#A=new Map;static#_=new WeakMap;static#E=null;static#x=new Set;constructor({textContentSource:t,container:e,viewport:n}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(o){o.enqueue(t),o.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#o=e,this.#r=n.scale*(globalThis.devicePixelRatio||1),this.#h=n.rotation,this.#s={div:null,properties:null,ctx:null};let{pageWidth:s,pageHeight:a,pageX:r,pageY:l}=n.rawDims;this.#v=[1,0,0,-1,-r,l+a],this.#l=s,this.#c=a,i.#D(),Yi(e,n),this.#t.promise.finally(()=>{i.#x.delete(this),this.#s=null,this.#d=null}).catch(()=>{})}static get fontFamilyMap(){let{isWindows:t,isFirefox:e}=Dt.platform;return U(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){let t=()=>{this.#u.read().then(({value:e,done:n})=>{if(n){this.#t.resolve();return}this.#a??=e.lang,Object.assign(this.#d,e.styles),this.#T(e.items),t()},this.#t.reject)};return this.#u=this.#p.getReader(),i.#x.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){let n=t.scale*(globalThis.devicePixelRatio||1),s=t.rotation;if(s!==this.#h&&(e?.(),this.#h=s,Yi(this.#o,{rotation:s})),n!==this.#r){e?.(),this.#r=n;let a={div:null,properties:null,ctx:i.#M(this.#a)};for(let r of this.#m)a.properties=this.#g.get(r),a.div=r,this.#S(a)}}cancel(){let t=new Ye("TextLayer task cancelled.");this.#u?.cancel(t).catch(()=>{}),this.#u=null,this.#t.reject(t)}get textDivs(){return this.#m}get textContentItemsStr(){return this.#f}#T(t){if(this.#i)return;this.#s.ctx??=i.#M(this.#a);let e=this.#m,n=this.#f;for(let s of t){if(e.length>Wv){z("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){let a=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),s.id!==null&&this.#e.setAttribute("id",`${s.id}`),a.append(this.#e)}else s.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(s.str),this.#R(s)}}#R(t){let e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#m.push(e);let s=M.transform(this.#v,t.transform),a=Math.atan2(s[1],s[0]),r=this.#d[t.fontName];r.vertical&&(a+=Math.PI/2);let l=this.#n&&r.fontSubstitution||r.fontFamily;l=i.fontFamilyMap.get(l)||l;let o=Math.hypot(s[2],s[3]),c=o*i.#k(l,this.#a),u,h;a===0?(u=s[4],h=s[5]-c):(u=s[4]+c*Math.sin(a),h=s[5]-c*Math.cos(a));let d="calc(var(--scale-factor)*",f=e.style;this.#e===this.#o?(f.left=`${(100*u/this.#l).toFixed(2)}%`,f.top=`${(100*h/this.#c).toFixed(2)}%`):(f.left=`${d}${u.toFixed(2)}px)`,f.top=`${d}${h.toFixed(2)}px)`),f.fontSize=`${d}${(i.#E*o).toFixed(2)}px)`,f.fontFamily=l,n.fontSize=o,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=r.fontSubstitutionLoadedName||t.fontName),a!==0&&(n.angle=a*(180/Math.PI));let g=!1;if(t.str.length>1)g=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){let v=Math.abs(t.transform[0]),A=Math.abs(t.transform[3]);v!==A&&Math.max(v,A)/Math.min(v,A)>1.5&&(g=!0)}if(g&&(n.canvasWidth=r.vertical?t.height:t.width),this.#g.set(e,n),this.#s.div=e,this.#s.properties=n,this.#S(this.#s),n.hasText&&this.#e.append(e),n.hasEOL){let v=document.createElement("br");v.setAttribute("role","presentation"),this.#e.append(v)}}#S(t){let{div:e,properties:n,ctx:s}=t,{style:a}=e,r="";if(i.#E>1&&(r=`scale(${1/i.#E})`),n.canvasWidth!==0&&n.hasText){let{fontFamily:l}=a,{canvasWidth:o,fontSize:c}=n;i.#C(s,c*this.#r,l);let{width:u}=s.measureText(e.textContent);u>0&&(r=`scaleX(${o*this.#r/u}) ${r}`)}n.angle!==0&&(r=`rotate(${n.angle}deg) ${r}`),r.length>0&&(a.transform=r)}static cleanup(){if(!(this.#x.size>0)){this.#b.clear();for(let{canvas:t}of this.#A.values())t.remove();this.#A.clear()}}static#M(t=null){let e=this.#A.get(t||="");if(!e){let n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#A.set(t,e),this.#_.set(e,{size:0,family:""})}return e}static#C(t,e,n){let s=this.#_.get(t);e===s.size&&n===s.family||(t.font=`${e}px ${n}`,s.size=e,s.family=n)}static#D(){if(this.#E!==null)return;let t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#E=t.getBoundingClientRect().height,t.remove()}static#k(t,e){let n=this.#b.get(t);if(n)return n;let s=this.#M(e);s.canvas.width=s.canvas.height=Yt,this.#C(s,Yt,t);let a=s.measureText(""),r=a.fontBoundingBoxAscent,l=Math.abs(a.fontBoundingBoxDescent);if(r){let u=r/(r+l);return this.#b.set(t,u),s.canvas.width=s.canvas.height=0,u}s.strokeStyle="red",s.clearRect(0,0,Yt,Yt),s.strokeText("g",0,0);let o=s.getImageData(0,0,Yt,Yt).data;l=0;for(let u=o.length-1-3;u>=0;u-=4)if(o[u]>0){l=Math.ceil(u/4/Yt);break}s.clearRect(0,0,Yt,Yt),s.strokeText("A",0,Yt),o=s.getImageData(0,0,Yt,Yt).data,r=0;for(let u=0,h=o.length;u<h;u+=4)if(o[u]>0){r=Yt-Math.floor(u/4/Yt);break}s.canvas.width=s.canvas.height=0;let c=r?r/(r+l):Zv;return this.#b.set(t,c),c}},Ns=class i{static textContent(t){let e=[],n={items:e,styles:Object.create(null)};function s(a){if(!a)return;let r=null,l=a.name;if(l==="#text")r=a.value;else if(i.shouldBuildText(l))a?.attributes?.textContent?r=a.attributes.textContent:a.value&&(r=a.value);else return;if(r!==null&&e.push({str:r}),!!a.children)for(let o of a.children)s(o)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}},Jv=65536,tb=100,eb=5e3,ib=Pt?qo:Fo,nb=Pt?jo:ur,sb=Pt?Go:Po,ab=Pt?Vo:fr;function rb(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});let t=new fc,{docId:e}=t,n=i.url?lb(i.url):null,s=i.data?ob(i.data):null,a=i.httpHeaders||null,r=i.withCredentials===!0,l=i.password??null,o=i.range instanceof mr?i.range:null,c=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:Jv,u=i.worker instanceof Mn?i.worker:null,h=i.verbosity,d=typeof i.docBaseUrl=="string"&&!Hr(i.docBaseUrl)?i.docBaseUrl:null,f=typeof i.cMapUrl=="string"?i.cMapUrl:null,g=i.cMapPacked!==!1,v=i.CMapReaderFactory||nb,A=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,p=i.StandardFontDataFactory||ab,m=i.stopAtErrors!==!0,b=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,y=i.isEvalSupported!==!1,_=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Pt,w=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!Pt&&(Dt.platform.isFirefox||!globalThis.chrome),S=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,x=typeof i.disableFontFace=="boolean"?i.disableFontFace:Pt,T=i.fontExtraProperties===!0,R=i.enableXfa===!0,L=i.ownerDocument||globalThis.document,V=i.disableRange===!0,At=i.disableStream===!0,Y=i.disableAutoFetch===!0,Ft=i.pdfBug===!0,X=i.CanvasFactory||ib,D=i.FilterFactory||sb,O=i.enableHWA===!0,Oe=o?o.length:i.length??NaN,Se=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Pt&&!x,re=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:v===ur&&p===fr&&f&&A&&ws(f,document.baseURI)&&ws(A,document.baseURI);i.canvasFactory&&Xd("`canvasFactory`-instance option, please use `CanvasFactory` instead."),i.filterFactory&&Xd("`filterFactory`-instance option, please use `FilterFactory` instead.");let kt=null;wv(h);let _t={canvasFactory:new X({ownerDocument:L,enableHWA:O}),filterFactory:new D({docId:e,ownerDocument:L}),cMapReaderFactory:re?null:new v({baseUrl:f,isCompressed:g}),standardFontDataFactory:re?null:new p({baseUrl:A})};if(!u){let Xt={verbosity:h,port:Vi.workerPort};u=Xt.port?Mn.fromPort(Xt):new Mn(Xt),t._worker=u}let Sn={docId:e,apiVersion:"4.9.155",data:s,password:l,disableAutoFetch:Y,rangeChunkSize:c,length:Oe,docBaseUrl:d,enableXfa:R,evaluatorOptions:{maxImageSize:b,disableFontFace:x,ignoreErrors:m,isEvalSupported:y,isOffscreenCanvasSupported:_,isImageDecoderSupported:w,canvasMaxAreaInBytes:S,fontExtraProperties:T,useSystemFonts:Se,cMapUrl:re?f:null,standardFontDataUrl:re?A:null}},vs={disableFontFace:x,fontExtraProperties:T,ownerDocument:L,pdfBug:Ft,styleElement:kt,loadingParams:{disableAutoFetch:Y,enableXfa:R}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");let Xt=u.messageHandler.sendWithPromise("GetDocRequest",Sn,s?[s.buffer]:null),st;if(o)st=new ec(o,{disableRange:V,disableStream:At});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");let wn;if(Pt)if(ws(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");wn=gr}else wn=uc;else wn=ws(n)?gr:lc;st=new wn({url:n,length:Oe,httpHeaders:a,withCredentials:r,rangeChunkSize:c,disableRange:V,disableStream:At})}return Xt.then(wn=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");let Dd=new ji(e,wn,u.port),K0=new vc(Dd,t,st,vs,_t);t._transport=K0,Dd.send("Ready",null)})}).catch(t._capability.reject),t}function lb(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(Pt&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function ob(i){if(Pt&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return kr(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i?.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function af(i){return typeof i=="object"&&Number.isInteger(i?.num)&&i.num>=0&&Number.isInteger(i?.gen)&&i.gen>=0}var fc=class i{static#t=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${i.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}},mr=class{constructor(t,e,n=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(let n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(let n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(let e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){K("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},pc=class{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return U(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){let{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},gc=class{#t=null;#e=!1;constructor(t,e,n,s=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new ir:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new vr,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:a=!1}={}){return new Cs({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:a})}getAnnotations({intent:t="display"}={}){let{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return U(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:s=pi.ENABLE,transform:a=null,background:r=null,optionalContentConfigPromise:l=null,annotationCanvasMap:o=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:h=!1}){this._stats?.time("Overall");let d=this._transport.getRenderingIntent(n,s,u,h),{renderingIntent:f,cacheKey:g}=d;this.#e=!1,this.#n(),l||=this._transport.getOptionalContentConfig(f);let v=this._intentStates.get(g);v||(v=Object.create(null),this._intentStates.set(g,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);let A=!!(f&Zt.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(d));let p=y=>{v.renderTasks.delete(m),(this._maybeCleanupAfterRender||A)&&(this.#e=!0),this.#i(!A),y?(m.capability.reject(y),this._abortOperatorList({intentState:v,reason:y instanceof Error?y:new Error(y)})):m.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},m=new yc({callback:p,params:{canvasContext:t,viewport:e,transform:a,background:r},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:o,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:c});(v.renderTasks||=new Set).add(m);let b=m.task;return Promise.all([v.displayReadyCapability.promise,l]).then(([y,_])=>{if(this.destroyed){p();return}if(this._stats?.time("Rendering"),!(_.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");m.initializeGraphics({transparency:y,optionalContentConfig:_}),m.operatorListChanged()}).catch(p),b}getOperatorList({intent:t="display",annotationMode:e=pi.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){function a(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(o))}let r=this._transport.getRenderingIntent(t,e,n,s,!0),l=this._intentStates.get(r.cacheKey);l||(l=Object.create(null),this._intentStates.set(r.cacheKey,l));let o;return l.opListReadCapability||(o=Object.create(null),o.operatorListChanged=a,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||=new Set).add(o),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(r)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Ns.textContent(n));let e=this.streamTextContent(t);return new Promise(function(n,s){function a(){r.read().then(function({value:o,done:c}){if(c){n(l);return}l.lang??=o.lang,Object.assign(l.styles,o.styles),l.items.push(...o.items),a()},s)}let r=e.getReader(),l={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let t=[];for(let e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(let n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#e=!1,this.#n(),Promise.all(t)}cleanup(t=!1){this.#e=!0;let e=this.#i(!1);return t&&e&&(this._stats&&=new ir),e}#i(t=!1){if(this.#n(),!this.#e||this.destroyed)return!1;if(t)return this.#t=setTimeout(()=>{this.#t=null,this.#i(!1)},eb),!1;for(let{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#n(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(t,e){let n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(let n of e.renderTasks)n.operatorListChanged();t.lastChunk&&this.#i(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:s}){let{map:a,transfer:r}=n,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:s},r).getReader(),c=this._intentStates.get(e);c.streamReader=o;let u=()=>{o.read().then(({value:h,done:d})=>{if(d){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),u())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(let d of c.renderTasks)d.operatorListChanged();this.#i(!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};u()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Rs){let s=tb;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Ye(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(let[s,a]of this._intentStates)if(a===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}},mc=class{#t=new Map;#e=Promise.resolve();postMessage(t,e){let n={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(let[s]of this.#t)s.call(this,n)})}addEventListener(t,e,n=null){let s=null;if(n?.signal instanceof AbortSignal){let{signal:a}=n;if(a.aborted){z("LoopbackPort - cannot use an `aborted` signal.");return}let r=()=>this.removeEventListener(t,e);s=()=>a.removeEventListener("abort",r),a.addEventListener("abort",r)}this.#t.set(e,s)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(let[,t]of this.#t)t?.();this.#t.clear()}},Mn=class i{static#t=0;static#e=!1;static#i;static{Pt&&(this.#e=!0,Vi.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(t,e)=>{let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}let s=new URL(e,n);return n.origin===s.origin},this._createCDNWrapper=t=>{let e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}}constructor({name:t=null,port:e=null,verbosity:n=Ev()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if(i.#i?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(i.#i||=new WeakMap).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}#n(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new ji("main","worker",t),this._messageHandler.on("ready",function(){}),this.#n()}_initialize(){if(i.#e||i.#a){this._setupFakeWorker();return}let{workerSrc:t}=i;try{i._isSameOrigin(window.location.href,t)||(t=i._createCDNWrapper(new URL(t,window.location).href));let e=new Worker(t,{type:"module"}),n=new ji("main","worker",e),s=()=>{a.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=new AbortController;e.addEventListener("error",()=>{this._webWorker||s()},{signal:a.signal}),n.on("test",l=>{if(a.abort(),this.destroyed||!l){s();return}this._messageHandler=n,this._port=e,this._webWorker=e,this.#n()}),n.on("ready",l=>{if(a.abort(),this.destroyed){s();return}try{r()}catch{this._setupFakeWorker()}});let r=()=>{let l=new Uint8Array;n.send("test",l,[l.buffer])};r();return}catch{Nr("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){i.#e||(z("Setting up fake worker."),i.#e=!0),i._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}let e=new mc;this._port=e;let n=`fake${i.#t++}`,s=new ji(n+"_worker",n,e);t.setup(s,e),this._messageHandler=new ji(n,n+"_worker",e),this.#n()}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker?.terminate(),this._webWorker=null,i.#i?.delete(this._port),this._port=null,this._messageHandler?.destroy(),this._messageHandler=null}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");let e=this.#i?.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new i(t)}static get workerSrc(){if(Vi.workerSrc)return Vi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#a(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return U(this,"_setupFakeWorkerGlobal",(async()=>this.#a?this.#a:(await import(this.workerSrc)).WorkerMessageHandler)())}},vc=class{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#a=null;constructor(t,e,n,s,a){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new vr,this.fontLoader=new Bo({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(t,e=null){let n=this.#t.get(t);if(n)return n;let s=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,s),s}get annotationStorage(){return U(this,"annotationStorage",new Ds)}getRenderingIntent(t,e=pi.ENABLE,n=null,s=!1,a=!1){let r=Zt.DISPLAY,l=zo;switch(t){case"any":r=Zt.ANY;break;case"display":break;case"print":r=Zt.PRINT;break;default:z(`getRenderingIntent - invalid intent: ${t}`)}let o=r&Zt.PRINT&&n instanceof lr?n:this.annotationStorage;switch(e){case pi.DISABLE:r+=Zt.ANNOTATIONS_DISABLE;break;case pi.ENABLE:break;case pi.ENABLE_FORMS:r+=Zt.ANNOTATIONS_FORMS;break;case pi.ENABLE_STORAGE:r+=Zt.ANNOTATIONS_STORAGE,l=o.serializable;break;default:z(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(r+=Zt.IS_EDITING),a&&(r+=Zt.OPLIST);let{ids:c,hash:u}=o.modifiedIds,h=[r,l.hash,u];return{renderingIntent:r,cacheKey:h.join("_"),annotationStorageSerializable:l,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));let t=[];for(let n of this.#e.values())t.push(n._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Os.cleanup(),this._networkStream?.cancelAllRequests(new Ye("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{mt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},s.onPull=()=>{this._fullReader.read().then(function({value:a,done:r}){if(r){s.close();return}mt(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{this._fullReader.cancel(a),s.ready.catch(r=>{if(!this.destroyed)throw r})}}),t.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;let{isStreamingSupported:s,isRangeSupported:a,contentLength:r}=this._fullReader;return(!s||!a)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=l=>{e.onProgress?.({loaded:l.loaded,total:l.total})}),{isStreamingSupported:s,isRangeSupported:a,contentLength:r}}),t.on("GetRangeReader",(n,s)=>{mt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){s.close();return}s.onPull=()=>{a.read().then(function({value:r,done:l}){if(l){s.close();return}mt(r instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{a.cancel(r),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new pc(n,this))}),t.on("DocException",function(n){let s;switch(n.name){case"PasswordException":s=new xs(n.message,n.code);break;case"InvalidPDFException":s=new er(n.message);break;case"MissingPDFException":s=new Xi(n.message);break;case"UnexpectedResponseException":s=new Dn(n.message,n.status);break;case"UnknownErrorException":s=new Ts(n.message,n.details);break;default:K("DocException - expected a valid Error.")}e._capability.reject(s)}),t.on("PasswordRequest",n=>{if(this.#a=Promise.withResolvers(),e.onPassword){let s=a=>{a instanceof Error?this.#a.reject(a):this.#a.resolve({password:a})};try{e.onPassword(s,n.code)}catch(a){this.#a.reject(a)}}else this.#a.reject(new xs(n.message,n.code));return this.#a.promise}),t.on("DataLoaded",n=>{e.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#e.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,a])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":let{disableFontFace:r,fontExtraProperties:l,pdfBug:o}=this._params;if("error"in a){let d=a.error;z(`Error during font loading: ${d}`),this.commonObjs.resolve(n,d);break}let c=o&&globalThis.FontInspector?.enabled?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,u=new Uo(a,{disableFontFace:r,inspectFont:c});this.fontLoader.bind(u).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!l&&u.data&&(u.data=null),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":let{imageRef:h}=a;mt(h,"The imageRef must be defined.");for(let d of this.#e.values())for(let[,f]of d.objs)if(f?.ref===h)return f.dataLen?(this.commonObjs.resolve(n,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,a,r])=>{if(this.destroyed)return;let l=this.#e.get(s);if(!l.objs.has(n)){if(l._intentStates.size===0){r?.bitmap?.close();return}switch(a){case"Image":l.objs.resolve(n,r),r?.dataLen>bv&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(n,r);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",n=>{this.destroyed||e.onProgress?.({loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),t.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&z("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));let e=t-1,n=this.#i.get(e);if(n)return n;let s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#n.set(a.refStr,t);let r=new gc(e,a,this,this._params.pdfBug);return this.#e.set(e,r),r});return this.#i.set(e,s),s}getPageIndex(t){return af(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new tc(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let t="GetMetadata",e=this.#t.get(t);if(e)return e;let n=this.messageHandler.sendWithPromise(t,null).then(s=>({info:s[0],metadata:s[1]?new Zo(s[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(let e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Os.cleanup()}}cachedPageNumber(t){if(!af(t))return null;let e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}},Wa=Symbol("INITIAL_DATA"),vr=class{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Wa}}get(t,e=null){if(e){let s=this.#e(t);return s.promise.then(()=>e(s.data)),null}let n=this.#t[t];if(!n||n.data===Wa)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){let e=this.#t[t];return!!e&&e.data!==Wa}resolve(t,e=null){let n=this.#e(t);n.data=e,n.resolve()}clear(){for(let t in this.#t){let{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(let t in this.#t){let{data:e}=this.#t[t];e!==Wa&&(yield[t,e])}}},bc=class{#t=null;constructor(t){this.#t=t,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){let{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;let{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}},yc=class i{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:a,operatorList:r,pageIndex:l,canvasFactory:o,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:h=!1,pageColors:d=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=r,this._pageIndex=l,this.canvasFactory=o,this.filterFactory=c,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new bc(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(i.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");i.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:n,viewport:s,transform:a,background:r}=this.params;this.gfx=new Rn(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:s,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),i.#e.delete(this._canvas),this.callback(t||new Rs(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),i.#e.delete(this._canvas),this.callback())))}},cb="4.9.155",ub="a4eb8407c";function rf(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Ss(i){return Math.max(0,Math.min(255,255*i))}var br=class{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Ss(t),[t,t,t]}static G_HTML([t]){let e=rf(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Ss)}static RGB_HTML(t){return`#${t.map(rf).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[Ss(1-Math.min(1,t+s)),Ss(1-Math.min(1,n+s)),Ss(1-Math.min(1,e+s))]}static CMYK_HTML(t){let e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){let s=1-t,a=1-e,r=1-n,l=Math.min(s,a,r);return["CMYK",s,a,r,l]}},Ac=class{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");let s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){K("Abstract method `_createSVG` called.")}},ks=class extends Ac{_createSVG(t){return document.createElementNS(Xe,t)}},yr=class{static setupStorage(t,e,n,s,a){let r=s.getValue(e,{value:null});switch(n.name){case"textarea":if(r.value!==null&&(t.textContent=r.value),a==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(r.value===n.attributes.xfaOn?t.setAttribute("checked",!0):r.value===n.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",l=>{s.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(r.value!==null&&t.setAttribute("value",r.value),a==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})})}break;case"select":if(r.value!==null){t.setAttribute("value",r.value);for(let l of n.children)l.attributes.value===r.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{let o=l.target.options,c=o.selectedIndex===-1?"":o[o.selectedIndex].value;s.setValue(e,{value:c})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:a}){let{attributes:r}=e,l=t instanceof HTMLAnchorElement;r.type==="radio"&&(r.name=`${r.name}-${s}`);for(let[o,c]of Object.entries(r))if(c!=null)switch(o){case"class":c.length&&t.setAttribute(o,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!l||o!=="href"&&o!=="newWindow")&&t.setAttribute(o,c)}l&&a.addLinkAttributes(t,r.href,r.newWindow),n&&r.dataId&&this.setupStorage(t,r.dataId,e,n)}static render(t){let e=t.annotationStorage,n=t.linkService,s=t.xfaHtml,a=t.intent||"display",r=document.createElement(s.name);s.attributes&&this.setAttributes({html:r,element:s,intent:a,linkService:n});let l=a!=="richText",o=t.div;if(o.append(r),t.viewport){let h=`matrix(${t.viewport.transform.join(",")})`;o.style.transform=h}l&&o.setAttribute("class","xfaLayer xfaFont");let c=[];if(s.children.length===0){if(s.value){let h=document.createTextNode(s.value);r.append(h),l&&Ns.shouldBuildText(s.name)&&c.push(h)}return{textDivs:c}}let u=[[s,-1,r]];for(;u.length>0;){let[h,d,f]=u.at(-1);if(d+1===h.children.length){u.pop();continue}let g=h.children[++u.at(-1)[1]];if(g===null)continue;let{name:v}=g;if(v==="#text"){let p=document.createTextNode(g.value);c.push(p),f.append(p);continue}let A=g?.attributes?.xmlns?document.createElementNS(g.attributes.xmlns,v):document.createElement(v);if(f.append(A),g.attributes&&this.setAttributes({html:A,element:g,storage:e,intent:a,linkService:n}),g.children?.length>0)u.push([g,-1,A]);else if(g.value){let p=document.createTextNode(g.value);l&&Ns.shouldBuildText(v)&&c.push(p),A.append(p)}}for(let h of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){let e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}},Us=1e3,hb=9,$i=new WeakSet;function gi(i){return{width:i[2]-i[0],height:i[3]-i[1]}}var _c=class{static create(t){switch(t.data.annotationType){case St.LINK:return new Ar(t);case St.TEXT:return new Sc(t);case St.WIDGET:switch(t.data.fieldType){case"Tx":return new wc(t);case"Btn":return t.data.radioButton?new _r(t):t.data.checkBox?new xc(t):new Tc(t);case"Ch":return new Cc(t);case"Sig":return new Ec(t)}return new Ke(t);case St.POPUP:return new Is(t);case St.FREETEXT:return new Sr(t);case St.LINE:return new Mc(t);case St.SQUARE:return new Dc(t);case St.CIRCLE:return new Lc(t);case St.POLYLINE:return new wr(t);case St.CARET:return new Nc(t);case St.INK:return new Hs(t);case St.POLYGON:return new Oc(t);case St.HIGHLIGHT:return new Er(t);case St.UNDERLINE:return new kc(t);case St.SQUIGGLY:return new Ic(t);case St.STRIKEOUT:return new Hc(t);case St.STAMP:return new xr(t);case St.FILEATTACHMENT:return new zc(t);default:return new ft(t)}}},ft=class i{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t?.str||e?.str||n?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return i._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};let{rect:e}=t;e&&this.#n(e),this.#i?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){let{container:{style:e},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:r,pageX:l,pageY:o}}}}=this;n?.splice(0,4,...t);let{width:c,height:u}=gi(t);e.left=`${100*(t[0]-l)/a}%`,e.top=`${100*(r-t[3]+o)/r}%`,s===0?(e.width=`${100*c/a}%`,e.height=`${100*u/r}%`):this.setRotation(s)}_createContainer(t){let{data:e,parent:{page:n,viewport:s}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),this instanceof Ke||(a.tabIndex=Us);let{style:r}=a;if(r.zIndex=this.parent.zIndex++,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof Is){let{rotation:v}=e;return!e.hasOwnCanvas&&v!==0&&this.setRotation(v,a),a}let{width:l,height:o}=gi(e.rect);if(!t&&e.borderStyle.width>0){r.borderWidth=`${e.borderStyle.width}px`;let v=e.borderStyle.horizontalCornerRadius,A=e.borderStyle.verticalCornerRadius;if(v>0||A>0){let m=`calc(${v}px * var(--scale-factor)) / calc(${A}px * var(--scale-factor))`;r.borderRadius=m}else if(this instanceof _r){let m=`calc(${l}px * var(--scale-factor)) / calc(${o}px * var(--scale-factor))`;r.borderRadius=m}switch(e.borderStyle.style){case As.SOLID:r.borderStyle="solid";break;case As.DASHED:r.borderStyle="dashed";break;case As.BEVELED:z("Unimplemented border style: beveled");break;case As.INSET:z("Unimplemented border style: inset");break;case As.UNDERLINE:r.borderBottomStyle="solid";break;default:break}let p=e.borderColor||null;p?(this.#e=!0,r.borderColor=M.makeHexColor(p[0]|0,p[1]|0,p[2]|0)):r.borderWidth=0}let c=M.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:u,pageHeight:h,pageX:d,pageY:f}=s.rawDims;r.left=`${100*(c[0]-d)/u}%`,r.top=`${100*(c[1]-f)/h}%`;let{rotation:g}=e;return e.hasOwnCanvas||g===0?(r.width=`${100*l/u}%`,r.height=`${100*o/h}%`):this.setRotation(g,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;let{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims,{width:a,height:r}=gi(this.data.rect),l,o;t%180===0?(l=100*a/n,o=100*r/s):(l=100*r/n,o=100*a/s),e.style.width=`${l}%`,e.style.height=`${o}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){let t=(e,n,s)=>{let a=s.detail[e],r=a[0],l=a.slice(1);s.target.style[n]=br[`${r}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:br[`${r}_rgb`](l)})};return U(this,"_commonActions",{display:e=>{let{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{let{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{let n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){let n=this._commonActions;for(let s of Object.keys(e.detail))(t[s]||n[s])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;let e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;let n=this._commonActions;for(let[s,a]of Object.entries(e)){let r=n[s];if(r){let l={detail:{[s]:a},target:t};r(l),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:t}=this.data;if(!t)return;let[e,n,s,a]=this.data.rect.map(v=>Math.fround(v));if(t.length===8){let[v,A,p,m]=t.subarray(2,6);if(s===v&&a===A&&e===p&&n===m)return}let{style:r}=this.container,l;if(this.#e){let{borderColor:v,borderWidth:A}=r;r.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}let o=s-e,c=a-n,{svgFactory:u}=this,h=u.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0);let d=u.createElement("defs");h.append(d);let f=u.createElement("clipPath"),g=`clippath_${this.data.id}`;f.setAttribute("id",g),f.setAttribute("clipPathUnits","objectBoundingBox"),d.append(f);for(let v=2,A=t.length;v<A;v+=8){let p=t[v],m=t[v+1],b=t[v+2],y=t[v+3],_=u.createElement("rect"),w=(b-e)/o,S=(a-m)/c,x=(p-b)/o,T=(m-y)/c;_.setAttribute("x",w),_.setAttribute("y",S),_.setAttribute("width",x),_.setAttribute("height",T),f.append(_),l?.push(`<rect vector-effect="non-scaling-stroke" x="${w}" y="${S}" width="${x}" height="${T}"/>`)}this.#e&&(l.push("</g></svg>')"),r.backgroundImage=l.join("")),this.container.append(h),this.container.style.clipPath=`url(#${g})`}_createPopup(){let{data:t}=this,e=this.#i=new Is({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(e.render())}render(){K("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){let n=[];if(this._fieldObjects){let s=this._fieldObjects[t];if(s)for(let{page:a,id:r,exportValues:l}of s){if(a===-1||r===e)continue;let o=typeof l=="string"?l:null,c=document.querySelector(`[data-element-id="${r}"]`);if(c&&!$i.has(c)){z(`_getElementsByName - element not allowed: ${r}`);continue}n.push({id:r,exportValue:o,domElement:c})}return n}for(let s of document.getElementsByName(t)){let{exportValue:a}=s,r=s.getAttribute("data-element-id");r!==e&&$i.has(s)&&n.push({id:r,exportValue:a,domElement:s})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(let e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}},Ar=class extends ft{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){let{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let s=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(n,t.action),s=!0):t.attachment?(this.#e(n,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(this.#i(n,t.setOCGState),s=!0):t.dest?(this._bindLink(n,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),s=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(n,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(n),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#t()}#e(t,e,n=null){t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,n),!1),this.#t()}#i(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");let n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let s of Object.keys(e.actions)){let a=n.get(s);a&&(t[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:s}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){let n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){z('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();let{fields:s,refs:a,include:r}=e,l=[];if(s.length!==0||a.length!==0){let u=new Set(a);for(let h of s){let d=this._fieldObjects[h]||[];for(let{id:f}of d)u.add(f)}for(let h of Object.values(this._fieldObjects))for(let d of h)u.has(d.id)===r&&l.push(d)}else for(let u of Object.values(this._fieldObjects))l.push(...u);let o=this.annotationStorage,c=[];for(let u of l){let{id:h}=u;switch(c.push(h),u.type){case"text":{let f=u.defaultValue||"";o.setValue(h,{value:f});break}case"checkbox":case"radiobutton":{let f=u.defaultValue===u.exportValues;o.setValue(h,{value:f});break}case"combobox":case"listbox":{let f=u.defaultValue||"";o.setValue(h,{value:f});break}default:continue}let d=document.querySelector(`[data-element-id="${h}"]`);if(d){if(!$i.has(d)){z(`_bindResetFormAction - element not allowed: ${h}`);continue}}else continue;d.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}},Sc=class extends ft{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}},Ke=class extends ft{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Dt.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,a){n.includes("mouse")?t.addEventListener(n,r=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(r),shift:r.shiftKey,modifier:this._getKeyModifier(r)}})}):t.addEventListener(n,r=>{if(n==="blur"){if(!e.focused||!r.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(r)}})})}_setEventListeners(t,e,n,s){for(let[a,r]of n)(r==="Action"||this.data.actions?.[r])&&((r==="Focus"||r==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,a,r,s),r==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):r==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){let e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":M.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){let e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||hb,a=t.style,r,l=2,o=c=>Math.round(10*c)/10;if(this.data.multiLine){let c=Math.abs(this.data.rect[3]-this.data.rect[1]-l),u=Math.round(c/(Ja*s))||1,h=c/u;r=Math.min(s,o(h/Ja))}else{let c=Math.abs(this.data.rect[3]-this.data.rect[1]-l);r=Math.min(s,o(c/Ja))}a.fontSize=`calc(${r}px * var(--scale-factor))`,a.color=M.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}},wc=class extends Ke{constructor(t){let e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){let a=this.annotationStorage;for(let r of this._getElementsByName(t.name,t.id))r.domElement&&(r.domElement[e]=n),a.setValue(r.id,{[s]:n})}render(){let t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){let s=t.getValue(e,{value:this.data.fieldValue}),a=s.value||"",r=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;r&&a.length>r&&(a=a.slice(0,r));let l=s.formattedValue||this.data.textContent?.join(`
`)||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));let o={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=l??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",l??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),$i.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Us,this._setRequired(n,this.data.required),r&&(n.maxLength=r),n.addEventListener("input",u=>{t.setValue(e,{value:u.target.value}),this.setPropertyOnSiblings(n,"value",u.target.value,"value"),o.formattedValue=null}),n.addEventListener("resetform",u=>{let h=this.data.defaultFieldValue??"";n.value=o.userValue=h,o.formattedValue=null});let c=u=>{let{formattedValue:h}=o;h!=null&&(u.target.value=h),u.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",h=>{if(o.focused)return;let{target:d}=h;o.userValue&&(d.value=o.userValue),o.lastCommittedValue=d.value,o.commitKey=1,this.data.actions?.Focus||(o.focused=!0)}),n.addEventListener("updatefromsandbox",h=>{this.showElementAndHideCanvas(h.target);let d={value(f){o.userValue=f.detail.value??"",t.setValue(e,{value:o.userValue.toString()}),f.target.value=o.userValue},formattedValue(f){let{formattedValue:g}=f.detail;o.formattedValue=g,g!=null&&f.target!==document.activeElement&&(f.target.value=g),t.setValue(e,{formattedValue:g})},selRange(f){f.target.setSelectionRange(...f.detail.selRange)},charLimit:f=>{let{charLimit:g}=f.detail,{target:v}=f;if(g===0){v.removeAttribute("maxLength");return}v.setAttribute("maxLength",g);let A=o.userValue;!A||A.length<=g||(A=A.slice(0,g),v.value=o.userValue=A,t.setValue(e,{value:A}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:1,selStart:v.selectionStart,selEnd:v.selectionEnd}}))}};this._dispatchEventFromSandbox(d,h)}),n.addEventListener("keydown",h=>{o.commitKey=1;let d=-1;if(h.key==="Escape"?d=0:h.key==="Enter"&&!this.data.multiLine?d=2:h.key==="Tab"&&(o.commitKey=3),d===-1)return;let{value:f}=h.target;o.lastCommittedValue!==f&&(o.lastCommittedValue=f,o.userValue=f,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,willCommit:!0,commitKey:d,selStart:h.target.selectionStart,selEnd:h.target.selectionEnd}}))});let u=c;c=null,n.addEventListener("blur",h=>{if(!o.focused||!h.relatedTarget)return;this.data.actions?.Blur||(o.focused=!1);let{value:d}=h.target;o.userValue=d,o.lastCommittedValue!==d&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,willCommit:!0,commitKey:o.commitKey,selStart:h.target.selectionStart,selEnd:h.target.selectionEnd}}),u(h)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",h=>{o.lastCommittedValue=null;let{data:d,target:f}=h,{value:g,selectionStart:v,selectionEnd:A}=f,p=v,m=A;switch(h.inputType){case"deleteWordBackward":{let b=g.substring(0,v).match(/\w*[^\w]*$/);b&&(p-=b[0].length);break}case"deleteWordForward":{let b=g.substring(v).match(/^[^\w]*\w*/);b&&(m+=b[0].length);break}case"deleteContentBackward":v===A&&(p-=1);break;case"deleteContentForward":v===A&&(m+=1);break}h.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:g,change:d||"",willCommit:!1,selStart:p,selEnd:m}})}),this._setEventListeners(n,o,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.value)}if(c&&n.addEventListener("blur",c),this.data.comb){let h=(this.data.rect[2]-this.data.rect[0])/r;n.classList.add("comb"),n.style.letterSpacing=`calc(${h}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}},Ec=class extends Ke{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}},xc=class extends Ke{constructor(t){super(t,{isRenderable:t.renderForms})}render(){let t=this.annotationStorage,e=this.data,n=e.id,s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let a=document.createElement("input");return $i.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,s&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=Us,a.addEventListener("change",r=>{let{name:l,checked:o}=r.target;for(let c of this._getElementsByName(l,n)){let u=o&&c.exportValue===e.exportValue;c.domElement&&(c.domElement.checked=u),t.setValue(c.id,{value:u})}t.setValue(n,{value:o})}),a.addEventListener("resetform",r=>{let l=e.defaultFieldValue||"Off";r.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",r=>{let l={value(o){o.target.checked=o.detail.value!=="Off",t.setValue(n,{value:o.target.checked})}};this._dispatchEventFromSandbox(l,r)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],r=>r.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}},_r=class extends Ke{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let t=this.annotationStorage,e=this.data,n=e.id,s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(let r of this._getElementsByName(e.fieldName,n))t.setValue(r.id,{value:!1});let a=document.createElement("input");if($i.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,s&&a.setAttribute("checked",!0),a.tabIndex=Us,a.addEventListener("change",r=>{let{name:l,checked:o}=r.target;for(let c of this._getElementsByName(l,n))t.setValue(c.id,{value:!1});t.setValue(n,{value:o})}),a.addEventListener("resetform",r=>{let l=e.defaultFieldValue;r.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){let r=e.buttonValue;a.addEventListener("updatefromsandbox",l=>{let o={value:c=>{let u=r===c.detail.value;for(let h of this._getElementsByName(c.target.name)){let d=u&&h.id===n;h.domElement&&(h.domElement.checked=d),t.setValue(h.id,{value:d})}}};this._dispatchEventFromSandbox(o,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}},Tc=class extends Ar{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){let t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");let e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}},Cc=class extends Ke{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");$i.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Us;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",u=>{let h=this.data.defaultFieldValue;for(let d of s.options)d.selected=d.value===h});for(let u of this.data.options){let h=document.createElement("option");h.textContent=u.displayValue,h.value=u.exportValue,n.value.includes(u.exportValue)&&(h.setAttribute("selected",!0),a=!1),s.append(h)}let r=null;if(a){let u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),s.prepend(u),r=()=>{u.remove(),s.removeEventListener("input",r),r=null},s.addEventListener("input",r)}let l=u=>{let h=u?"value":"textContent",{options:d,multiple:f}=s;return f?Array.prototype.filter.call(d,g=>g.selected).map(g=>g[h]):d.selectedIndex===-1?null:d[d.selectedIndex][h]},o=l(!1),c=u=>{let h=u.target.options;return Array.prototype.map.call(h,d=>({displayValue:d.textContent,exportValue:d.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",u=>{let h={value(d){r?.();let f=d.detail.value,g=new Set(Array.isArray(f)?f:[f]);for(let v of s.options)v.selected=g.has(v.value);t.setValue(e,{value:l(!0)}),o=l(!1)},multipleSelection(d){s.multiple=!0},remove(d){let f=s.options,g=d.detail.remove;f[g].selected=!1,s.remove(g),f.length>0&&Array.prototype.findIndex.call(f,A=>A.selected)===-1&&(f[0].selected=!0),t.setValue(e,{value:l(!0),items:c(d)}),o=l(!1)},clear(d){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),o=l(!1)},insert(d){let{index:f,displayValue:g,exportValue:v}=d.detail.insert,A=s.children[f],p=document.createElement("option");p.textContent=g,p.value=v,A?A.before(p):s.append(p),t.setValue(e,{value:l(!0),items:c(d)}),o=l(!1)},items(d){let{items:f}=d.detail;for(;s.length!==0;)s.remove(0);for(let g of f){let{displayValue:v,exportValue:A}=g,p=document.createElement("option");p.textContent=v,p.value=A,s.append(p)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:l(!0),items:c(d)}),o=l(!1)},indices(d){let f=new Set(d.detail.indices);for(let g of d.target.options)g.selected=f.has(g.index);t.setValue(e,{value:l(!0)}),o=l(!1)},editable(d){d.target.disabled=!d.detail.editable}};this._dispatchEventFromSandbox(h,u)}),s.addEventListener("input",u=>{let h=l(!0),d=l(!1);t.setValue(e,{value:h}),u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:o,change:d,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):s.addEventListener("input",function(u){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}},Is=class extends ft{constructor(t){let{data:e,elements:n}=t;super(t,{isRenderable:ft._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");let t=this.popup=new Rc({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(let n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${Wc}${n}`).join(",")),this.container}},Rc=class{#t=this.#T.bind(this);#e=this.#C.bind(this);#i=this.#M.bind(this);#n=this.#S.bind(this);#a=null;#s=null;#c=null;#l=null;#u=null;#o=null;#h=null;#r=!1;#d=null;#f=null;#p=null;#m=null;#g=null;#v=null;#b=!1;constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:a,contentsObj:r,richText:l,parent:o,rect:c,parentRect:u,open:h}){this.#s=t,this.#g=s,this.#c=r,this.#m=l,this.#o=o,this.#a=e,this.#p=c,this.#h=u,this.#u=n,this.#l=nr.toDateObject(a),this.trigger=n.flatMap(d=>d.getElementsToTriggerPopup());for(let d of this.trigger)d.addEventListener("click",this.#n),d.addEventListener("mouseenter",this.#i),d.addEventListener("mouseleave",this.#e),d.classList.add("popupTriggerArea");for(let d of n)d.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,h&&this.#S()}render(){if(this.#d)return;let t=this.#d=document.createElement("div");if(t.className="popup",this.#a){let a=t.style.outlineColor=M.makeHexColor(...this.#a);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`:t.style.backgroundColor=M.makeHexColor(...this.#a.map(l=>Math.floor(.7*(255-l)+l)))}let e=document.createElement("span");e.className="header";let n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=this.#g,t.append(e),this.#l){let a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#l.valueOf()})),e.append(a)}let s=this.#A;if(s)yr.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{let a=this._formatContents(this.#c);t.append(a)}this.#s.append(t)}get#A(){let t=this.#m,e=this.#c;return t?.str&&(!e?.str||e.str===t.str)&&this.#m.html||null}get#_(){return this.#A?.attributes?.style?.fontSize||0}get#E(){return this.#A?.attributes?.style?.color||null}#x(t){let e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:this.#E,fontSize:this.#_?`calc(${this.#_}px * var(--scale-factor))`:""}};for(let a of t.split(`
`))e.push({name:"span",value:a,attributes:s});return n}_formatContents({str:t,dir:e}){let n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;let s=t.split(/(?:\r\n?|\n)/);for(let a=0,r=s.length;a<r;++a){let l=s[a];n.append(document.createTextNode(l)),a<r-1&&n.append(document.createElement("br"))}return n}#T(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#r)&&this.#S()}updateEdited({rect:t,popupContent:e}){this.#v||={contentsObj:this.#c,richText:this.#m},t&&(this.#f=null),e&&(this.#m=this.#x(e),this.#c=null),this.#d?.remove(),this.#d=null}resetEdited(){this.#v&&({contentsObj:this.#c,richText:this.#m}=this.#v,this.#v=null,this.#d?.remove(),this.#d=null,this.#f=null)}#R(){if(this.#f!==null)return;let{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:s,pageY:a}}}=this.#o,r=!!this.#h,l=r?this.#h:this.#p;for(let g of this.#u)if(!l||M.intersect(g.data.rect,l)!==null){l=g.data.rect,r=!0;break}let o=M.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),u=r?l[2]-l[0]+5:0,h=o[0]+u,d=o[1];this.#f=[100*(h-s)/e,100*(d-a)/n];let{style:f}=this.#s;f.left=`${this.#f[0]}%`,f.top=`${this.#f[1]}%`}#S(){this.#r=!this.#r,this.#r?(this.#M(),this.#s.addEventListener("click",this.#n),this.#s.addEventListener("keydown",this.#t)):(this.#C(),this.#s.removeEventListener("click",this.#n),this.#s.removeEventListener("keydown",this.#t))}#M(){this.#d||this.render(),this.isVisible?this.#r&&this.#s.classList.add("focused"):(this.#R(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#C(){this.#s.classList.remove("focused"),!(this.#r||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#b=this.isVisible,this.#b&&(this.#s.hidden=!0)}maybeShow(){this.#b&&(this.#d||this.#M(),this.#b=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}},Sr=class extends ft{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=I.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(let e of this.textContent){let n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},Mc=class extends ft{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let t=this.data,{width:e,height:n}=gi(t.rect),s=this.svgFactory.create(e,n,!0),a=this.#t=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},Dc=class extends ft{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let t=this.data,{width:e,height:n}=gi(t.rect),s=this.svgFactory.create(e,n,!0),a=t.borderStyle.width,r=this.#t=this.svgFactory.createElement("svg:rect");return r.setAttribute("x",a/2),r.setAttribute("y",a/2),r.setAttribute("width",e-a),r.setAttribute("height",n-a),r.setAttribute("stroke-width",a||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},Lc=class extends ft{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let t=this.data,{width:e,height:n}=gi(t.rect),s=this.svgFactory.create(e,n,!0),a=t.borderStyle.width,r=this.#t=this.svgFactory.createElement("svg:ellipse");return r.setAttribute("cx",e/2),r.setAttribute("cy",n/2),r.setAttribute("rx",e/2-a/2),r.setAttribute("ry",n/2-a/2),r.setAttribute("stroke-width",a||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},wr=class extends ft{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,vertices:e,borderStyle:n,popupRef:s}}=this;if(!e)return this.container;let{width:a,height:r}=gi(t),l=this.svgFactory.create(a,r,!0),o=[];for(let u=0,h=e.length;u<h;u+=2){let d=e[u]-t[0],f=t[3]-e[u+1];o.push(`${d},${f}`)}o=o.join(" ");let c=this.#t=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",o),c.setAttribute("stroke-width",n.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),l.append(c),this.container.append(l),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},Oc=class extends wr{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},Nc=class extends ft{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},Hs=class extends ft{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?I.HIGHLIGHT:I.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,rotation:e,inkLists:n,borderStyle:s,popupRef:a}}=this,{transform:r,width:l,height:o}=this.#i(e,t),c=this.svgFactory.create(l,o,!0),u=this.#t=this.svgFactory.createElement("svg:g");c.append(u),u.setAttribute("stroke-width",s.width||1),u.setAttribute("stroke-linecap","round"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit",10),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),u.setAttribute("transform",r);for(let h=0,d=n.length;h<d;h++){let f=this.svgFactory.createElement(this.svgElementName);this.#e.push(f),f.setAttribute("points",n[h].join(",")),u.append(f)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);let{thickness:e,points:n,rect:s}=t,a=this.#t;if(e>=0&&a.setAttribute("stroke-width",e||1),n)for(let r=0,l=this.#e.length;r<l;r++)this.#e[r].setAttribute("points",n[r].join(","));if(s){let{transform:r,width:l,height:o}=this.#i(this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${o}`),a.setAttribute("transform",r)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},Er=class extends ft{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=I.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}},kc=class extends ft{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}},Ic=class extends ft{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}},Hc=class extends ft{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}},xr=class extends ft{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=I.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},zc=class extends ft{#t=null;constructor(t){super(t,{isRenderable:!0});let{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:t,data:e}=this,n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;let{isMac:s}=Dt.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}},Bc=class{#t=null;#e=null;#i=new Map;#n=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:s,page:a,viewport:r,structTreeLayer:l}){this.div=t,this.#t=e,this.#e=n,this.#n=l||null,this.page=a,this.viewport=r,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return this.#i.size>0}async#a(t,e){let n=t.firstChild||t,s=n.id=`${Wc}${e}`,a=await this.#n?.getAriaAttributes(s);if(a)for(let[r,l]of a)n.setAttribute(r,l);this.div.append(t),this.#t?.moveElementInDOM(this.div,t,n,!1)}async render(t){let{annotations:e}=t,n=this.div;Yi(n,this.viewport);let s=new Map,a={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ks,annotationStorage:t.annotationStorage||new Ds,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(let r of e){if(r.noHTML)continue;let l=r.annotationType===St.POPUP;if(l){let u=s.get(r.id);if(!u)continue;a.elements=u}else{let{width:u,height:h}=gi(r.rect);if(u<=0||h<=0)continue}a.data=r;let o=_c.create(a);if(!o.isRenderable)continue;if(!l&&r.popupRef){let u=s.get(r.popupRef);u?u.push(o):s.set(r.popupRef,[o])}let c=o.render();r.hidden&&(c.style.visibility="hidden"),await this.#a(c,r.id),o._isEditable&&(this.#i.set(o.data.id,o),this._annotationEditorUIManager?.renderAnnotationElement(o))}this.#s()}update({viewport:t}){let e=this.div;this.viewport=t,Yi(e,{rotation:t.rotation}),this.#s(),e.hidden=!1}#s(){if(!this.#e)return;let t=this.div;for(let[e,n]of this.#e){let s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;n.className="annotationContent";let{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):s.append(n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}},Za=/\r\n?|\n/g,Uc=class i extends ot{#t;#e="";#i=`${this.id}-editor`;#n=null;#a;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let t=i.prototype,e=a=>a.isEmpty(),n=Qi.TRANSLATE_SMALL,s=Qi.TRANSLATE_BIG;return U(this,"_keyboardManager",new Ki([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}]]))}static _type="freetext";static _editorType=I.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||i._defaultColor||ot._defaultLineColor,this.#a=t.fontSize||i._defaultFontSize}static initialize(t,e){ot.initialize(t,e);let n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case P.FREETEXT_SIZE:i._defaultFontSize=e;break;case P.FREETEXT_COLOR:i._defaultColor=e;break}}updateParams(t,e){switch(t){case P.FREETEXT_SIZE:this.#s(e);break;case P.FREETEXT_COLOR:this.#c(e);break}}static get defaultPropertiesToUpdate(){return[[P.FREETEXT_SIZE,i._defaultFontSize],[P.FREETEXT_COLOR,i._defaultColor||ot._defaultLineColor]]}get propertiesToUpdate(){return[[P.FREETEXT_SIZE,this.#a],[P.FREETEXT_COLOR,this.#t]]}#s(t){let e=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-this.#a)*this.parentScale),this.#a=s,this.#u()},n=this.#a;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:P.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#c(t){let e=s=>{this.#t=this.editorDiv.style.color=s},n=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:P.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){let t=this.parentScale;return[-i._internalPadding*t,-(i._internalPadding+this.#a)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(I.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;let t=this._uiManager.combinedSignal(this.#n);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#i),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#l(){let t=[];this.editorDiv.normalize();let e=null;for(let n of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(i.#o(n)),e=n);return t.join(`
`)}#u(){let[t,e]=this.parentDimensions,n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{let{currentLayer:s,div:a}=this,r=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),n=a.getBoundingClientRect(),a.remove(),a.style.display=r,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let t=this.#e,e=this.#e=this.#l().trimEnd();if(t===e)return;let n=s=>{if(this.#e=s,!s){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){i._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#i),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#a}px * var(--scale-factor))`,n.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),sr(this,this.div,["dblclick","keydown"]),this.width){let[s,a]=this.parentDimensions;if(this.annotationElementId){let{position:r}=this._initialData,[l,o]=this.getInitialTranslation();[l,o]=this.pageTranslationToScreen(l,o);let[c,u]=this.pageDimensions,[h,d]=this.pageTranslation,f,g;switch(this.rotation){case 0:f=t+(r[0]-h)/c,g=e+this.height-(r[1]-d)/u;break;case 90:f=t+(r[0]-h)/c,g=e-(r[1]-d)/u,[l,o]=[o,-l];break;case 180:f=t-this.width+(r[0]-h)/c,g=e-(r[1]-d)/u,[l,o]=[-l,-o];break;case 270:f=t+(r[0]-h-this.height*u)/c,g=e+(r[1]-d-this.width*c)/u,[l,o]=[-o,l];break}this.setAt(f*s,g*a,l,o)}else this.setAt(t*s,e*a,this.width*s,this.height*a);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#o(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Za,"")}editorDivPaste(t){let e=t.clipboardData||window.clipboardData,{types:n}=e;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();let s=i.#d(e.getData("text")||"").replaceAll(Za,`
`);if(!s)return;let a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();let r=a.getRangeAt(0);if(!s.includes(`
`)){r.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}let{startContainer:l,startOffset:o}=r,c=[],u=[];if(l.nodeType===Node.TEXT_NODE){let f=l.parentElement;if(u.push(l.nodeValue.slice(o).replaceAll(Za,"")),f!==this.editorDiv){let g=c;for(let v of this.editorDiv.childNodes){if(v===f){g=u;continue}g.push(i.#o(v))}}c.push(l.nodeValue.slice(0,o).replaceAll(Za,""))}else if(l===this.editorDiv){let f=c,g=0;for(let v of this.editorDiv.childNodes)g++===o&&(f=u),f.push(i.#o(v))}this.#e=`${c.join(`
`)}${s}${u.join(`
`)}`,this.#h();let h=new Range,d=c.reduce((f,g)=>f+g.length,0);for(let{firstChild:f}of this.editorDiv.childNodes)if(f.nodeType===Node.TEXT_NODE){let g=f.nodeValue.length;if(d<=g){h.setStart(f,d),h.setEnd(f,d);break}d-=g}a.removeAllRanges(),a.addRange(h)}#h(){if(this.editorDiv.replaceChildren(),!!this.#e)for(let t of this.#e.split(`
`)){let e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#r(){return this.#e.replaceAll("\xA0"," ")}static#d(t){return t.replaceAll(" ","\xA0")}get contentDiv(){return this.editorDiv}static async deserialize(t,e,n){let s=null;if(t instanceof Sr){let{data:{defaultAppearanceData:{fontSize:r,fontColor:l},rect:o,rotation:c,id:u,popupRef:h},textContent:d,textPosition:f,parent:{page:{pageNumber:g}}}=t;if(!d||d.length===0)return null;s=t={annotationType:I.FREETEXT,color:Array.from(l),fontSize:r,value:d.join(`
`),position:f,pageIndex:g-1,rect:o.slice(0),rotation:c,id:u,deleted:!1,popupRef:h}}let a=await super.deserialize(t,e,n);return a.#a=t.fontSize,a.#t=M.makeHexColor(...t.color),a.#e=i.#d(t.value),a.annotationElementId=t.id||null,a._initialData=s,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let e=i._internalPadding*this.parentScale,n=this.getRect(e,e),s=ot._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),a={annotationType:I.FREETEXT,color:s,fontSize:this.#a,value:this.#r(),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!this.#f(a)?null:(a.id=this.annotationElementId,a)}#f(t){let{value:e,fontSize:n,color:s,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((r,l)=>r!==s[l])||t.pageIndex!==a}renderAnnotationElement(t){let e=super.renderAnnotationElement(t);if(this.deleted)return e;let{style:n}=e;n.fontSize=`calc(${this.#a}px * var(--scale-factor))`,n.color=this.#t,e.replaceChildren();for(let a of this.#e.split(`
`)){let r=document.createElement("div");r.append(a?document.createTextNode(a):document.createElement("br")),e.append(r)}let s=i._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:this.#e}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}},C=class{static PRECISION=1e-4;toSVGPath(){K("Abstract method `toSVGPath` must be implemented.")}get box(){K("Abstract getter `box` must be implemented.")}serialize(t,e){K("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,s,a,r){r||=new Float32Array(t.length);for(let l=0,o=t.length;l<o;l+=2)r[l]=e+t[l]*s,r[l+1]=n+t[l+1]*a;return r}static _rescaleAndSwap(t,e,n,s,a,r){r||=new Float32Array(t.length);for(let l=0,o=t.length;l<o;l+=2)r[l]=e+t[l+1]*s,r[l+1]=n+t[l]*a;return r}static _translate(t,e,n,s){s||=new Float32Array(t.length);for(let a=0,r=t.length;a<r;a+=2)s[a]=e+t[a],s[a+1]=n+t[a+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,s,a){switch(a){case 90:return[1-e/n,t/s];case 180:return[1-t/n,1-e/s];case 270:return[e/n,1-t/s];default:return[t/n,e/s]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,s,a,r){return[(t+5*n)/6,(e+5*s)/6,(5*n+a)/6,(5*s+r)/6,(n+a)/2,(s+r)/2]}},Tr=class i{#t;#e=[];#i;#n;#a=[];#s=new Float32Array(18);#c;#l;#u;#o;#h;#r;#d=[];static#f=8;static#p=2;static#m=i.#f+i.#p;constructor({x:t,y:e},n,s,a,r,l=0){this.#t=n,this.#r=a*s,this.#n=r,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=l,this.#o=i.#f*s,this.#u=i.#m*s,this.#h=s,this.#d.push(t,e)}isEmpty(){return isNaN(this.#s[8])}#g(){let t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[n,s,a,r]=this.#t;return[(this.#c+(t[0]-e[0])/2-n)/a,(this.#l+(t[1]-e[1])/2-s)/r,(this.#c+(e[0]-t[0])/2-n)/a,(this.#l+(e[1]-t[1])/2-s)/r]}add({x:t,y:e}){this.#c=t,this.#l=e;let[n,s,a,r]=this.#t,[l,o,c,u]=this.#s.subarray(8,12),h=t-c,d=e-u,f=Math.hypot(h,d);if(f<this.#u)return!1;let g=f-this.#o,v=g/f,A=v*h,p=v*d,m=l,b=o;l=c,o=u,c+=A,u+=p,this.#d?.push(t,e);let y=-p/g,_=A/g,w=y*this.#r,S=_*this.#r;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([c+w,u+S],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([c-w,u-S],16),isNaN(this.#s[6])?(this.#a.length===0&&(this.#s.set([l+w,o+S],2),this.#a.push(NaN,NaN,NaN,NaN,(l+w-n)/a,(o+S-s)/r),this.#s.set([l-w,o-S],14),this.#e.push(NaN,NaN,NaN,NaN,(l-w-n)/a,(o-S-s)/r)),this.#s.set([m,b,l,o,c,u],6),!this.isEmpty()):(this.#s.set([m,b,l,o,c,u],6),Math.abs(Math.atan2(b-o,m-l)-Math.atan2(p,A))<Math.PI/2?([l,o,c,u]=this.#s.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((l+c)/2-n)/a,((o+u)/2-s)/r),[l,o,m,b]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((m+l)/2-n)/a,((b+o)/2-s)/r),!0):([m,b,l,o,c,u]=this.#s.subarray(0,6),this.#a.push(((m+5*l)/6-n)/a,((b+5*o)/6-s)/r,((5*l+c)/6-n)/a,((5*o+u)/6-s)/r,((l+c)/2-n)/a,((o+u)/2-s)/r),[c,u,l,o,m,b]=this.#s.subarray(12,18),this.#e.push(((m+5*l)/6-n)/a,((b+5*o)/6-s)/r,((5*l+c)/6-n)/a,((5*o+u)/6-s)/r,((l+c)/2-n)/a,((o+u)/2-s)/r),!0))}toSVGPath(){if(this.isEmpty())return"";let t=this.#a,e=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#v();let n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);this.#A(n);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return this.#b(n),n.join(" ")}#v(){let[t,e,n,s]=this.#t,[a,r,l,o]=this.#g();return`M${(this.#s[2]-t)/n} ${(this.#s[3]-e)/s} L${(this.#s[4]-t)/n} ${(this.#s[5]-e)/s} L${a} ${r} L${l} ${o} L${(this.#s[16]-t)/n} ${(this.#s[17]-e)/s} L${(this.#s[14]-t)/n} ${(this.#s[15]-e)/s} Z`}#b(t){let e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#A(t){let[e,n,s,a]=this.#t,r=this.#s.subarray(4,6),l=this.#s.subarray(16,18),[o,c,u,h]=this.#g();t.push(`L${(r[0]-e)/s} ${(r[1]-n)/a} L${o} ${c} L${u} ${h} L${(l[0]-e)/s} ${(l[1]-n)/a}`)}newFreeDrawOutline(t,e,n,s,a,r){return new Cr(t,e,n,s,a,r)}getOutlines(){let t=this.#a,e=this.#e,n=this.#s,[s,a,r,l]=this.#t,o=new Float32Array((this.#d?.length??0)+2);for(let h=0,d=o.length-2;h<d;h+=2)o[h]=(this.#d[h]-s)/r,o[h+1]=(this.#d[h+1]-a)/l;if(o[o.length-2]=(this.#c-s)/r,o[o.length-1]=(this.#l-a)/l,isNaN(n[6])&&!this.isEmpty())return this.#_(o);let c=new Float32Array(this.#a.length+24+this.#e.length),u=t.length;for(let h=0;h<u;h+=2){if(isNaN(t[h])){c[h]=c[h+1]=NaN;continue}c[h]=t[h],c[h+1]=t[h+1]}u=this.#x(c,u);for(let h=e.length-6;h>=6;h-=6)for(let d=0;d<6;d+=2){if(isNaN(e[h+d])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=e[h+d],c[u+1]=e[h+d+1],u+=2}return this.#E(c,u),this.newFreeDrawOutline(c,o,this.#t,this.#h,this.#i,this.#n)}#_(t){let e=this.#s,[n,s,a,r]=this.#t,[l,o,c,u]=this.#g(),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(e[2]-n)/a,(e[3]-s)/r,NaN,NaN,NaN,NaN,(e[4]-n)/a,(e[5]-s)/r,NaN,NaN,NaN,NaN,l,o,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(e[16]-n)/a,(e[17]-s)/r,NaN,NaN,NaN,NaN,(e[14]-n)/a,(e[15]-s)/r],0),this.newFreeDrawOutline(h,t,this.#t,this.#h,this.#i,this.#n)}#E(t,e){let n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6}#x(t,e){let n=this.#s.subarray(4,6),s=this.#s.subarray(16,18),[a,r,l,o]=this.#t,[c,u,h,d]=this.#g();return t.set([NaN,NaN,NaN,NaN,(n[0]-a)/l,(n[1]-r)/o,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,(s[0]-a)/l,(s[1]-r)/o],e),e+=24}},Cr=class extends C{#t;#e=new Float32Array(4);#i;#n;#a;#s;#c;constructor(t,e,n,s,a,r){super(),this.#c=t,this.#a=e,this.#t=n,this.#s=s,this.#i=a,this.#n=r,this.lastPoint=[NaN,NaN],this.#l(r);let[l,o,c,u]=this.#e;for(let h=0,d=t.length;h<d;h+=2)t[h]=(t[h]-l)/c,t[h+1]=(t[h+1]-o)/u;for(let h=0,d=e.length;h<d;h+=2)e[h]=(e[h]-l)/c,e[h+1]=(e[h+1]-o)/u}toSVGPath(){let t=[`M${this.#c[4]} ${this.#c[5]}`];for(let e=6,n=this.#c.length;e<n;e+=6){if(isNaN(this.#c[e])){t.push(`L${this.#c[e+4]} ${this.#c[e+5]}`);continue}t.push(`C${this.#c[e]} ${this.#c[e+1]} ${this.#c[e+2]} ${this.#c[e+3]} ${this.#c[e+4]} ${this.#c[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,s],a){let r=n-t,l=s-e,o,c;switch(a){case 0:o=C._rescale(this.#c,t,s,r,-l),c=C._rescale(this.#a,t,s,r,-l);break;case 90:o=C._rescaleAndSwap(this.#c,t,e,r,l),c=C._rescaleAndSwap(this.#a,t,e,r,l);break;case 180:o=C._rescale(this.#c,n,e,-r,l),c=C._rescale(this.#a,n,e,-r,l);break;case 270:o=C._rescaleAndSwap(this.#c,n,s,-r,-l),c=C._rescaleAndSwap(this.#a,n,s,-r,-l);break}return{outline:Array.from(o),points:[Array.from(c)]}}#l(t){let e=this.#c,n=e[4],s=e[5],a=n,r=s,l=n,o=s,c=n,u=s,h=t?Math.max:Math.min;for(let f=6,g=e.length;f<g;f+=6){if(isNaN(e[f]))a=Math.min(a,e[f+4]),r=Math.min(r,e[f+5]),l=Math.max(l,e[f+4]),o=Math.max(o,e[f+5]),u<e[f+5]?(c=e[f+4],u=e[f+5]):u===e[f+5]&&(c=h(c,e[f+4]));else{let v=M.bezierBoundingBox(n,s,...e.slice(f,f+6));a=Math.min(a,v[0]),r=Math.min(r,v[1]),l=Math.max(l,v[2]),o=Math.max(o,v[3]),u<v[3]?(c=v[2],u=v[3]):u===v[3]&&(c=h(c,v[2]))}n=e[f+4],s=e[f+5]}let d=this.#e;d[0]=a-this.#i,d[1]=r-this.#i,d[2]=l-a+2*this.#i,d[3]=o-r+2*this.#i,this.lastPoint=[c,u]}get box(){return this.#e}newOutliner(t,e,n,s,a,r=0){return new Tr(t,e,n,s,a,r)}getNewOutline(t,e){let[n,s,a,r]=this.#e,[l,o,c,u]=this.#t,h=a*c,d=r*u,f=n*c+l,g=s*u+o,v=this.newOutliner({x:this.#a[0]*h+f,y:this.#a[1]*d+g},this.#t,this.#s,t,this.#n,e??this.#i);for(let A=2;A<this.#a.length;A+=2)v.add({x:this.#a[A]*h+f,y:this.#a[A+1]*d+g});return v.getOutlines()}},zs=class{#t;#e;#i=[];#n=[];constructor(t,e=0,n=0,s=!0){let a=1/0,r=-1/0,l=1/0,o=-1/0,u=10**-4;for(let{x:p,y:m,width:b,height:y}of t){let _=Math.floor((p-e)/u)*u,w=Math.ceil((p+b+e)/u)*u,S=Math.floor((m-e)/u)*u,x=Math.ceil((m+y+e)/u)*u,T=[_,S,x,!0],R=[w,S,x,!1];this.#i.push(T,R),a=Math.min(a,_),r=Math.max(r,w),l=Math.min(l,S),o=Math.max(o,x)}let h=r-a+2*n,d=o-l+2*n,f=a-n,g=l-n,v=this.#i.at(s?-1:-2),A=[v[0],v[2]];for(let p of this.#i){let[m,b,y]=p;p[0]=(m-f)/h,p[1]=(b-g)/d,p[2]=(y-g)/d}this.#t=new Float32Array([f,g,h,d]),this.#e=A}getOutlines(){this.#i.sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);let t=[];for(let e of this.#i)e[3]?(t.push(...this.#u(e)),this.#c(e)):(this.#l(e),t.push(...this.#u(e)));return this.#a(t)}#a(t){let e=[],n=new Set;for(let r of t){let[l,o,c]=r;e.push([l,o,r],[l,c,r])}e.sort((r,l)=>r[1]-l[1]||r[0]-l[0]);for(let r=0,l=e.length;r<l;r+=2){let o=e[r][2],c=e[r+1][2];o.push(c),c.push(o),n.add(o),n.add(c)}let s=[],a;for(;n.size>0;){let r=n.values().next().value,[l,o,c,u,h]=r;n.delete(r);let d=l,f=o;for(a=[l,c],s.push(a);;){let g;if(n.has(u))g=u;else if(n.has(h))g=h;else break;n.delete(g),[l,o,c,u,h]=g,d!==l&&(a.push(d,f,l,f===o?o:c),d=l),f=f===o?c:o}a.push(d,f)}return new Fc(s,this.#t,this.#e)}#s(t){let e=this.#n,n=0,s=e.length-1;for(;n<=s;){let a=n+s>>1,r=e[a][0];if(r===t)return a;r<t?n=a+1:s=a-1}return s+1}#c([,t,e]){let n=this.#s(t);this.#n.splice(n,0,[t,e])}#l([,t,e]){let n=this.#s(t);for(let s=n;s<this.#n.length;s++){let[a,r]=this.#n[s];if(a!==t)break;if(a===t&&r===e){this.#n.splice(s,1);return}}for(let s=n-1;s>=0;s--){let[a,r]=this.#n[s];if(a!==t)break;if(a===t&&r===e){this.#n.splice(s,1);return}}}#u(t){let[e,n,s]=t,a=[[e,n,s]],r=this.#s(s);for(let l=0;l<r;l++){let[o,c]=this.#n[l];for(let u=0,h=a.length;u<h;u++){let[,d,f]=a[u];if(!(c<=d||f<=o)){if(d>=o){if(f>c)a[u][1]=c;else{if(h===1)return[];a.splice(u,1),u--,h--}continue}a[u][2]=o,f>c&&a.push([e,c,f])}}}return a}},Fc=class extends C{#t;#e;constructor(t,e,n){super(),this.#e=t,this.#t=e,this.lastPoint=n}toSVGPath(){let t=[];for(let e of this.#e){let[n,s]=e;t.push(`M${n} ${s}`);for(let a=2;a<e.length;a+=2){let r=e[a],l=e[a+1];r===n?(t.push(`V${l}`),s=l):l===s&&(t.push(`H${r}`),n=r)}t.push("Z")}return t.join(" ")}serialize([t,e,n,s],a){let r=[],l=n-t,o=s-e;for(let c of this.#e){let u=new Array(c.length);for(let h=0;h<c.length;h+=2)u[h]=t+c[h]*l,u[h+1]=s-c[h+1]*o;r.push(u)}return r}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}},Bs=class extends Tr{newFreeDrawOutline(t,e,n,s,a,r){return new Pc(t,e,n,s,a,r)}},Pc=class extends Cr{newOutliner(t,e,n,s,a,r=0){return new Bs(t,e,n,s,a,r)}},Rr=class i{#t=null;#e=null;#i;#n=null;#a=!1;#s=!1;#c=null;#l;#u=null;#o=null;#h;static#r=null;static get _keyboardManager(){return U(this,"_keyboardManager",new Ki([[["Escape","mac+Escape"],i.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],i.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],i.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],i.prototype._moveToPrevious],[["Home","mac+Home"],i.prototype._moveToBeginning],[["End","mac+End"],i.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#s=!1,this.#h=P.HIGHLIGHT_COLOR,this.#c=t):(this.#s=!0,this.#h=P.HIGHLIGHT_DEFAULT_COLOR),this.#o=t?._uiManager||e,this.#l=this.#o._eventBus,this.#i=t?.color||this.#o?.highlightColors.values().next().value||"#FFFF98",i.#r||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){let t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);let e=this.#o._signal;t.addEventListener("click",this.#m.bind(this),{signal:e}),t.addEventListener("keydown",this.#p.bind(this),{signal:e});let n=this.#e=document.createElement("span");return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=this.#i,t.append(n),t}renderMainDropdown(){let t=this.#n=this.#d();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#d(){let t=document.createElement("div"),e=this.#o._signal;t.addEventListener("contextmenu",xe,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(let[n,s]of this.#o.highlightColors){let a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",s),a.title=n,a.setAttribute("data-l10n-id",i.#r[n]);let r=document.createElement("span");a.append(r),r.className="swatch",r.style.backgroundColor=s,a.setAttribute("aria-selected",s===this.#i),a.addEventListener("click",this.#f.bind(this,s),{signal:e}),t.append(a)}return t.addEventListener("keydown",this.#p.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#l.dispatch("switchannotationeditorparams",{source:this,type:this.#h,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#m(t);return}let e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#v){this.#m(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#v&&this._hideDropdownFromKeyboard();return}this.#v||this.#m(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#v){this.#m(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#v){this.#m(t);return}this.#n.lastChild?.focus()}#p(t){i._keyboardManager.exec(this,t)}#m(t){if(this.#v){this.hideDropdown();return}if(this.#a=t.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#g.bind(this),{signal:this.#o.combinedSignal(this.#u)})),this.#n){this.#n.classList.remove("hidden");return}let e=this.#n=this.#d();this.#t.append(e)}#g(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#v(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#v){this.#c?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;let e=this.#o.highlightColors.values();for(let n of this.#n.children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}},Mr=class i extends ot{#t=null;#e=0;#i;#n=null;#a=null;#s=null;#c=null;#l=0;#u=null;#o=null;#h=null;#r=!1;#d=null;#f;#p=null;#m="";#g;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=I.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){let t=i.prototype;return U(this,"_keyboardManager",new Ki([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||i._defaultColor,this.#g=t.thickness||i._defaultThickness,this.#f=t.opacity||i._defaultOpacity,this.#i=t.boxes||null,this.#v=t.methodOfCreation||"",this.#m=t.text||"",this._isDraggable=!1,t.highlightId>-1?(this.#r=!0,this.#A(t),this.#R()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#c=t.focusNode,this.#l=t.focusOffset,this.#b(),this.#R(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#r?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#g,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){let t=new zs(this.#i,.001);this.#o=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#o.box;let e=new zs(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();let{lastPoint:n}=this.#s;this.#d=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#A({highlightOutlines:t,highlightId:e,clipPathId:n}){this.#o=t;let s=1.5;if(this.#s=t.getNewOutline(this.#g/2+s,.0025),e>=0)this.#h=e,this.#n=n,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){let u=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:i.#S(this.#o.box,(u-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:i.#S(this.#s.box,u),path:{d:this.#s.toSVGPath()}})}let[a,r,l,o]=t.box;switch(this.rotation){case 0:this.x=a,this.y=r,this.width=l,this.height=o;break;case 90:{let[u,h]=this.parentDimensions;this.x=r,this.y=1-a,this.width=l*h/u,this.height=o*u/h;break}case 180:this.x=1-a,this.y=1-r,this.width=l,this.height=o;break;case 270:{let[u,h]=this.parentDimensions;this.x=1-r,this.y=a,this.width=l*h/u,this.height=o*u/h;break}}let{lastPoint:c}=this.#s;this.#d=[(c[0]-a)/l,(c[1]-r)/o]}static initialize(t,e){ot.initialize(t,e),i._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case P.HIGHLIGHT_DEFAULT_COLOR:i._defaultColor=e;break;case P.HIGHLIGHT_THICKNESS:i._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#d}updateParams(t,e){switch(t){case P.HIGHLIGHT_COLOR:this.#_(e);break;case P.HIGHLIGHT_THICKNESS:this.#E(e);break}}static get defaultPropertiesToUpdate(){return[[P.HIGHLIGHT_DEFAULT_COLOR,i._defaultColor],[P.HIGHLIGHT_THICKNESS,i._defaultThickness]]}get propertiesToUpdate(){return[[P.HIGHLIGHT_COLOR,this.color||i._defaultColor],[P.HIGHLIGHT_THICKNESS,this.#g||i._defaultThickness],[P.HIGHLIGHT_FREE,this.#r]]}#_(t){let e=(a,r)=>{this.color=a,this.#f=r,this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:a,"fill-opacity":r}}),this.#a?.updateColor(a)},n=this.color,s=this.#f;this.addCommands({cmd:e.bind(this,t,i._defaultOpacity),undo:e.bind(this,n,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:P.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#E(t){let e=this.#g,n=s=>{this.#g=s,this.#x(s)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:P.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}async addEditToolbar(){let t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#a=new Rr({editor:this}),t.addColorPicker(this.#a)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#D())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#D())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#R(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#T():t&&(this.#R(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#x(t){if(!this.#r)return;this.#A({highlightOutlines:this.#o.getNewOutline(t/2)}),this.fixAndSetPosition();let[e,n]=this.parentDimensions;this.setDims(this.width*e,this.height*n)}#T(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#R(t=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#o.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#f},rootClass:{highlight:!0,free:this.#r},path:{d:this.#o.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#r},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#r),this.#u&&(this.#u.style.clipPath=this.#n))}static#S([t,e,n,s],a){switch(a){case 90:return[1-e-s,t,s,n];case 180:return[1-t-n,1-e-s,n,s];case 270:return[e,1-t-n,s,n]}return[t,e,n,s]}rotate(t){let{drawLayer:e}=this.parent,n;this.#r?(t=(t-this.rotation+360)%360,n=i.#S(this.#o.box,t)):n=i.#S([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#h,{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:i.#S(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;let t=super.render();this.#m&&(t.setAttribute("aria-label",this.#m),t.setAttribute("role","mark")),this.#r?t.classList.add("free"):this.div.addEventListener("keydown",this.#M.bind(this),{signal:this._uiManager._signal});let e=this.#u=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n;let[n,s]=this.parentDimensions;return this.setDims(this.width*n,this.height*s),sr(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#M(t){i._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(t){if(!this.#t)return;let e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#c,this.#l)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#r||this.#C(!1))}get _mustFixPosition(){return!this.#r}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#D(){return this.#r?this.rotation:0}#k(){if(this.#r)return null;let[t,e]=this.pageDimensions,[n,s]=this.pageTranslation,a=this.#i,r=new Float32Array(a.length*8),l=0;for(let{x:o,y:c,width:u,height:h}of a){let d=o*t+n,f=(1-c)*e+s;r[l]=r[l+4]=d,r[l+1]=r[l+3]=f,r[l+2]=r[l+6]=d+u*t,r[l+5]=r[l+7]=f-h*e,l+=8}return r}#B(t){return this.#o.serialize(t,this.#D())}static startHighlighting(t,e,{target:n,x:s,y:a}){let{x:r,y:l,width:o,height:c}=n.getBoundingClientRect(),u=new AbortController,h=t.combinedSignal(u),d=f=>{u.abort(),this.#y(t,f)};window.addEventListener("blur",d,{signal:h}),window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("pointerdown",Ee,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",xe,{signal:h}),n.addEventListener("pointermove",this.#w.bind(this,t),{signal:h}),this._freeHighlight=new Bs({x:s,y:a},[r,l,o,c],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#w(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#y(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,n){let s=null;if(t instanceof Er){let{data:{quadPoints:g,rect:v,rotation:A,id:p,color:m,opacity:b,popupRef:y},parent:{page:{pageNumber:_}}}=t;s=t={annotationType:I.HIGHLIGHT,color:Array.from(m),opacity:b,quadPoints:g,boxes:null,pageIndex:_-1,rect:v.slice(0),rotation:A,id:p,deleted:!1,popupRef:y}}else if(t instanceof Hs){let{data:{inkLists:g,rect:v,rotation:A,id:p,color:m,borderStyle:{rawWidth:b},popupRef:y},parent:{page:{pageNumber:_}}}=t;s=t={annotationType:I.HIGHLIGHT,color:Array.from(m),thickness:b,inkLists:g,boxes:null,pageIndex:_-1,rect:v.slice(0),rotation:A,id:p,deleted:!1,popupRef:y}}let{color:a,quadPoints:r,inkLists:l,opacity:o}=t,c=await super.deserialize(t,e,n);c.color=M.makeHexColor(...a),c.#f=o||1,l&&(c.#g=t.thickness),c.annotationElementId=t.id||null,c._initialData=s;let[u,h]=c.pageDimensions,[d,f]=c.pageTranslation;if(r){let g=c.#i=[];for(let v=0;v<r.length;v+=8)g.push({x:(r[v]-d)/u,y:1-(r[v+1]-f)/h,width:(r[v+2]-r[v])/u,height:(r[v+1]-r[v+5])/h});c.#b(),c.#R(),c.rotate(c.rotation)}else if(l){c.#r=!0;let g=l[0],v={x:g[0]-d,y:h-(g[1]-f)},A=new Bs(v,[0,0,u,h],1,c.#g/2,!0,.001);for(let b=0,y=g.length;b<y;b+=2)v.x=g[b]-d,v.y=h-(g[b+1]-f),A.add(v);let{id:p,clipPathId:m}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:A.toSVGPath()}},!0,!0);c.#A({highlightOutlines:A.getOutlines(),highlightId:p,clipPathId:m}),c.#R()}return c}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();let e=this.getRect(0,0),n=ot._colorManager.convert(this.color),s={annotationType:I.HIGHLIGHT,color:n,opacity:this.#f,thickness:this.#g,quadPoints:this.#k(),outlines:this.#B(e),pageIndex:this.pageIndex,rect:e,rotation:this.#D(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#N(s)?null:(s.id=this.annotationElementId,s)}#N(t){let{color:e}=this._initialData;return t.color.some((n,s)=>n!==e[s])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}},Gc=class{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(let[e,n]of Object.entries(t))this.updateProperty(e,n)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){let t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){K("Not implemented")}},qc=class i extends ot{#t=null;#e;_drawId=null;static _currentDrawId=-1;static _currentDraw=null;static _currentDrawingOptions=null;static _currentParent=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,t.drawOutlines&&(this.#i(t),this.#s())}#i({drawOutlines:t,drawId:e,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#n(t,this.parent),this.#u(t.box)}#n(t,e){let{id:n}=e.drawLayer.draw(i._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,e){let n=new Set(Object.keys(t));for(let[s,a]of Object.entries(e))n.has(s)?Object.assign(t[s],a):t[s]=a;return t}static getDefaultDrawingOptions(t){K("Not implemented")}static get typesMap(){K("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){let n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(this._currentDraw.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){let n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){let t=[],e=this._defaultDrawingOptions;for(let[n,s]of this.typesMap)t.push([n,e[s]]);return t}get propertiesToUpdate(){let t=[],{_drawingOptions:e}=this;for(let[n,s]of this.constructor.typesMap)t.push([n,e[s]]);return t}_updateProperty(t,e,n){let s=this._drawingOptions,a=s[e],r=l=>{s.updateProperty(e,l);let o=this.#t.updateProperty(e,l);o&&this.#u(o),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties())};this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,i._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#l()),{bbox:this.#o()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,i._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#l()),{bbox:this.#o()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#o(t,e)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,i._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#l(),this.parentDimensions),{bbox:this.#o()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),this.isOnScreen&&this.div.focus())}remove(){this.#a(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#s(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#a()):t&&(this._uiManager.addShouldRescale(this),this.#s(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#a(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#s(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#n(this.#t,t)}}#c([t,e,n,s]){let{parentDimensions:[a,r],rotation:l}=this;switch(l){case 90:return[e,1-t,n*(r/a),s*(a/r)];case 180:return[1-t,1-e,n,s];case 270:return[1-e,t,n*(r/a),s*(a/r)];default:return[t,e,n,s]}}#l(){let{x:t,y:e,width:n,height:s,parentDimensions:[a,r],rotation:l}=this;switch(l){case 90:return[1-e,t,n*(a/r),s*(r/a)];case 180:return[1-t,1-e,n,s];case 270:return[e,1-t,n*(a/r),s*(r/a)];default:return[t,e,n,s]}}#u(t){if([this.x,this.y,this.width,this.height]=this.#c(t),this.div){this.fixAndSetPosition();let[e,n]=this.parentDimensions;this.setDims(this.width*e,this.height*n)}this._onResized()}#o(){let{x:t,y:e,width:n,height:s,rotation:a,parentRotation:r,parentDimensions:[l,o]}=this;switch((a*4+r)/90){case 1:return[1-e-s,t,s,n];case 2:return[1-t-n,1-e-s,n,s];case 3:return[e,1-t-n,s,n];case 4:return[t,e-n*(l/o),s*(o/l),n*(l/o)];case 5:return[1-e,t,n*(l/o),s*(o/l)];case 6:return[1-t-s*(o/l),1-e,s*(o/l),n*(l/o)];case 7:return[e-n*(l/o),1-t-s*(o/l),n*(l/o),s*(o/l)];case 8:return[t-n,e-s,n,s];case 9:return[1-e,t-n,s,n];case 10:return[1-t,1-e,n,s];case 11:return[e-s,1-t,s,n];case 12:return[t-s*(o/l),e,s*(o/l),n*(l/o)];case 13:return[1-e-n*(l/o),t-s*(o/l),n*(l/o),s*(o/l)];case 14:return[1-t,1-e-n*(l/o),s*(o/l),n*(l/o)];case 15:return[e,1-t,n*(l/o),s*(o/l)];default:return[t,e,n,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,i._mergeSVGProperties({bbox:this.#o()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t=super.render();t.classList.add("draw");let e=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal";let[n,s]=this.parentDimensions;return this.setDims(this.width*n,this.height*s),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,e,n,s,a){K("Not implemented")}static startDrawing(t,e,n,{target:s,offsetX:a,offsetY:r}){let{viewport:{rotation:l}}=t,{width:o,height:c}=s.getBoundingClientRect(),u=new AbortController,h=t.combinedSignal(u);if(window.addEventListener("pointerup",d=>{u.abort(),t.toggleDrawing(!0),this._endDraw(d)},{signal:h}),window.addEventListener("pointerdown",Ee,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",xe,{signal:h}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:h}),t.toggleDrawing(),e._editorUndoBar?.hide(),this._currentDraw){t.drawLayer.updateProperties(this._currentDrawId,this._currentDraw.startNew(a,r,o,c,l));return}e.updateUIForDefaultProperties(this),this._currentDraw=this.createDrawerInstance(a,r,o,c,l),this._currentDrawingOptions=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(this._currentDrawingOptions.toSVGProperties(),this._currentDraw.defaultSVGProperties),!0,!1)}static _drawMove({offsetX:t,offsetY:e}){this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._currentDraw.add(t,e))}static _endDraw({offsetX:t,offsetY:e}){let n=this._currentParent;if(n.drawLayer.updateProperties(this._currentDrawId,this._currentDraw.end(t,e)),this.supportMultipleDrawings){let s=this._currentDraw,a=this._currentDrawId,r=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(a,s.setLastElement(r))},undo:()=>{n.drawLayer.updateProperties(a,s.removeLastElement())},mustExec:!1,type:P.DRAW_STEP});return}this.endDrawing(!1)}static endDrawing(t){let e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(P.DRAW_STEP),!this._currentDraw.isEmpty()){let{pageDimensions:[n,s],scale:a}=e,r=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:this._currentDraw.getOutlines(n*a,s*a,a,this._INNER_MARGIN),drawingOptions:this._currentDrawingOptions,mustBeCommitted:!t});return this._cleanup(),r}return e.drawLayer.remove(this._currentDrawId),this._cleanup(),null}static _cleanup(){this._currentDrawId=-1,this._currentDraw=null,this._currentDrawingOptions=null,this._currentParent=null}createDrawingOptions(t){}static deserializeDraw(t,e,n,s,a,r){K("Not implemented")}static async deserialize(t,e,n){let{rawDims:{pageWidth:s,pageHeight:a,pageX:r,pageY:l}}=e.viewport,o=this.deserializeDraw(r,l,s,a,this._INNER_MARGIN,t),c=await super.deserialize(t,e,n);return c.createDrawingOptions(t),c.#i({drawOutlines:o}),c.#s(),c.onScaleChanging(),c.rotate(),c}serializeDraw(t){let[e,n]=this.pageTranslation,[s,a]=this.pageDimensions;return this.#t.serialize([e,n,s,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}},jc=class{#t=new Float64Array(6);#e;#i;#n;#a;#s;#c="";#l=0;#u=new Dr;#o;#h;constructor(t,e,n,s,a,r){this.#o=n,this.#h=s,this.#n=a,this.#a=r,[t,e]=this.#r(t,e);let l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e],this.#i=[{line:l,points:this.#s}],this.#t.set(l,0)}updateProperty(t,e){t==="stroke-width"&&(this.#a=e)}#r(t,e){return C._normalizePoint(t,e,this.#o,this.#h,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}add(t,e){[t,e]=this.#r(t,e);let[n,s,a,r]=this.#t.subarray(2,6),l=t-a,o=e-r;return Math.hypot(this.#o*l,this.#h*o)<=2?null:(this.#s.push(t,e),isNaN(n)?(this.#t.set([a,r,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,s,a,r,t,e],0),this.#e.push(...C.createBezierPoints(n,s,a,r,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){let n=this.add(t,e);return n||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,s,a){this.#o=n,this.#h=s,this.#n=a,[t,e]=this.#r(t,e);let r=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e];let l=this.#i.at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),this.#i.push({line:r,points:this.#s}),this.#t.set(r,0),this.#l=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#s=t.points,this.#l=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#u.removeLastElement();this.#i.pop(),this.#c="";for(let t=0,e=this.#i.length;t<e;t++){let{line:n,points:s}=this.#i[t];this.#e=n,this.#s=s,this.#l=0,this.toSVGPath()}return{path:{d:this.#c}}}toSVGPath(){let t=C.svgRound(this.#e[4]),e=C.svgRound(this.#e[5]);if(this.#s.length===2)return this.#c=`${this.#c} M ${t} ${e} Z`,this.#c;if(this.#s.length<=6){let s=this.#c.lastIndexOf("M");this.#c=`${this.#c.slice(0,s)} M ${t} ${e}`,this.#l=6}if(this.#s.length===4){let s=C.svgRound(this.#e[10]),a=C.svgRound(this.#e[11]);return this.#c=`${this.#c} L ${s} ${a}`,this.#l=12,this.#c}let n=[];this.#l===0&&(n.push(`M ${t} ${e}`),this.#l=6);for(let s=this.#l,a=this.#e.length;s<a;s+=6){let[r,l,o,c,u,h]=this.#e.slice(s,s+6).map(C.svgRound);n.push(`C${r} ${l} ${o} ${c} ${u} ${h}`)}return this.#c+=n.join(" "),this.#l=this.#e.length,this.#c}getOutlines(t,e,n,s){let a=this.#i.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#u.build(this.#i,t,e,n,this.#n,this.#a,s),this.#t=null,this.#e=null,this.#i=null,this.#c=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}},Dr=class i extends C{#t;#e=0;#i;#n;#a;#s;#c;#l;#u;build(t,e,n,s,a,r,l){this.#a=e,this.#s=n,this.#c=s,this.#l=a,this.#u=r,this.#i=l??0,this.#n=t,this.#r()}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){let t=[];for(let{line:e}of this.#n){if(t.push(`M${C.svgRound(e[4])} ${C.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12){t.push(`L${C.svgRound(e[10])} ${C.svgRound(e[11])}`);continue}for(let n=6,s=e.length;n<s;n+=6){let[a,r,l,o,c,u]=e.subarray(n,n+6).map(C.svgRound);t.push(`C${a} ${r} ${l} ${o} ${c} ${u}`)}}return t.join("")}serialize([t,e,n,s],a){let r=[],l=[],[o,c,u,h]=this.#h(),d,f,g,v,A,p,m,b,y;switch(this.#l){case 0:y=C._rescale,d=t,f=e+s,g=n,v=-s,A=t+o*n,p=e+(1-c-h)*s,m=t+(o+u)*n,b=e+(1-c)*s;break;case 90:y=C._rescaleAndSwap,d=t,f=e,g=n,v=s,A=t+c*n,p=e+o*s,m=t+(c+h)*n,b=e+(o+u)*s;break;case 180:y=C._rescale,d=t+n,f=e,g=-n,v=s,A=t+(1-o-u)*n,p=e+c*s,m=t+(1-o)*n,b=e+(c+h)*s;break;case 270:y=C._rescaleAndSwap,d=t+n,f=e+s,g=-n,v=-s,A=t+(1-c-h)*n,p=e+(1-o-u)*s,m=t+(1-c)*n,b=e+(1-o)*s;break}for(let{line:_,points:w}of this.#n)r.push(y(_,d,f,g,v,a?new Array(_.length):null)),l.push(y(w,d,f,g,v,a?new Array(w.length):null));return{lines:r,points:l,rect:[A,p,m,b]}}static deserialize(t,e,n,s,a,{paths:{lines:r,points:l},rotation:o,thickness:c}){let u=[],h,d,f,g,v;switch(o){case 0:v=C._rescale,h=-t/n,d=e/s+1,f=1/n,g=-1/s;break;case 90:v=C._rescaleAndSwap,h=-e/s,d=-t/n,f=1/s,g=1/n;break;case 180:v=C._rescale,h=t/n+1,d=-e/s,f=-1/n,g=1/s;break;case 270:v=C._rescaleAndSwap,h=e/s+1,d=t/n+1,f=-1/s,g=-1/n;break}if(!r){r=[];for(let p of l){let m=p.length;if(m===2){r.push(new Float32Array([NaN,NaN,NaN,NaN,p[0],p[1]]));continue}if(m===4){r.push(new Float32Array([NaN,NaN,NaN,NaN,p[0],p[1],NaN,NaN,NaN,NaN,p[2],p[3]]));continue}let b=new Float32Array(3*(m-2));r.push(b);let[y,_,w,S]=p.subarray(0,4);b.set([NaN,NaN,NaN,NaN,y,_],0);for(let x=4;x<m;x+=2){let T=p[x],R=p[x+1];b.set(C.createBezierPoints(y,_,w,S,T,R),(x-2)*3),[y,_,w,S]=[w,S,T,R]}}}for(let p=0,m=r.length;p<m;p++)u.push({line:v(r[p].map(b=>b??NaN),h,d,f,g),points:v(l[p].map(b=>b??NaN),h,d,f,g)});let A=new i;return A.build(u,n,s,1,o,c,a),A}#o(t=this.#u){let e=this.#i+t/2*this.#c;return this.#l%180===0?[e/this.#a,e/this.#s]:[e/this.#s,e/this.#a]}#h(){let[t,e,n,s]=this.#t,[a,r]=this.#o(0);return[t+a,e+r,n-2*a,s-2*r]}#r(){let t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(let{line:s}of this.#n){if(s.length<=12){for(let l=4,o=s.length;l<o;l+=6){let[c,u]=s.subarray(l,l+2);t[0]=Math.min(t[0],c),t[1]=Math.min(t[1],u),t[2]=Math.max(t[2],c),t[3]=Math.max(t[3],u)}continue}let a=s[4],r=s[5];for(let l=6,o=s.length;l<o;l+=6){let[c,u,h,d,f,g]=s.subarray(l,l+6);M.bezierBoundingBox(a,r,c,u,h,d,f,g,t),a=f,r=g}}let[e,n]=this.#o();t[0]=Math.min(1,Math.max(0,t[0]-e)),t[1]=Math.min(1,Math.max(0,t[1]-n)),t[2]=Math.min(1,Math.max(0,t[2]+e)),t[3]=Math.min(1,Math.max(0,t[3]+n)),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#d(e):null}#d(t){let[e,n]=this.#o();this.#u=t;let[s,a]=this.#o(),[r,l]=[s-e,a-n],o=this.#t;return o[0]-=r,o[1]-=l,o[2]+=2*r,o[3]+=2*l,o}updateParentDimensions([t,e],n){let[s,a]=this.#o();this.#a=t,this.#s=e,this.#c=n;let[r,l]=this.#o(),o=r-s,c=l-a,u=this.#t;return u[0]-=o,u[1]-=c,u[2]+=2*o,u[3]+=2*c,u}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(C.svgRound).join(" ")}get defaultProperties(){let[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${C.svgRound(t)} ${C.svgRound(e)}`}}}get rotationTransform(){let[,,t,e]=this.#t,n=0,s=0,a=0,r=0,l=0,o=0;switch(this.#e){case 90:s=e/t,a=-t/e,l=t;break;case 180:n=-1,r=-1,l=t,o=e;break;case 270:s=-e/t,a=t/e,o=e;break;default:return""}return`matrix(${n} ${s} ${a} ${r} ${C.svgRound(l)} ${C.svgRound(o)})`}getPathResizingSVGProperties([t,e,n,s]){let[a,r]=this.#o(),[l,o,c,u]=this.#t;if(Math.abs(c-a)<=C.PRECISION||Math.abs(u-r)<=C.PRECISION){let v=t+n/2-(l+c/2),A=e+s/2-(o+u/2);return{path:{"transform-origin":`${C.svgRound(t)} ${C.svgRound(e)}`,transform:`${this.rotationTransform} translate(${v} ${A})`}}}let h=(n-2*a)/(c-2*a),d=(s-2*r)/(u-2*r),f=c/n,g=u/s;return{path:{"transform-origin":`${C.svgRound(l)} ${C.svgRound(o)}`,transform:`${this.rotationTransform} scale(${f} ${g}) translate(${C.svgRound(a)} ${C.svgRound(r)}) scale(${h} ${d}) translate(${C.svgRound(-a)} ${C.svgRound(-r)})`}}}getPathResizedSVGProperties([t,e,n,s]){let[a,r]=this.#o(),l=this.#t,[o,c,u,h]=l;if(l[0]=t,l[1]=e,l[2]=n,l[3]=s,Math.abs(u-a)<=C.PRECISION||Math.abs(h-r)<=C.PRECISION){let A=t+n/2-(o+u/2),p=e+s/2-(c+h/2);for(let{line:m,points:b}of this.#n)C._translate(m,A,p,m),C._translate(b,A,p,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${C.svgRound(t)} ${C.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}let d=(n-2*a)/(u-2*a),f=(s-2*r)/(h-2*r),g=-d*(o+a)+t+a,v=-f*(c+r)+e+r;if(d!==1||f!==1||g!==0||v!==0)for(let{line:A,points:p}of this.#n)C._rescale(A,g,v,d,f,A),C._rescale(p,g,v,d,f,p);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${C.svgRound(t)} ${C.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],n){let[s,a]=n,r=this.#t,l=t-r[0],o=e-r[1];if(this.#a===s&&this.#s===a)for(let{line:c,points:u}of this.#n)C._translate(c,l,o,c),C._translate(u,l,o,u);else{let c=this.#a/s,u=this.#s/a;this.#a=s,this.#s=a;for(let{line:h,points:d}of this.#n)C._rescale(h,l,o,c,u,h),C._rescale(d,l,o,c,u,d);r[2]*=c,r[3]*=u}return r[0]=t,r[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${C.svgRound(t)} ${C.svgRound(e)}`}}}get defaultSVGProperties(){let t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${C.svgRound(t[0])} ${C.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}},Vc=class i extends Gc{#t;constructor(t){super(),this.#t=t,super.updateProperties({fill:"none",stroke:ot._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this.#t.realScale),super.updateSVGProperty(t,e)}clone(){let t=new i(this.#t);return t.updateAll(this),t}},Xc=class i extends qc{static _type="ink";static _editorType=I.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0}static initialize(t,e){ot.initialize(t,e),this._defaultDrawingOptions=new Vc(e.viewParameters)}static getDefaultDrawingOptions(t){let e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return U(this,"typesMap",new Map([[P.INK_THICKNESS,"stroke-width"],[P.INK_COLOR,"stroke"],[P.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,s,a){return new jc(t,e,n,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,s,a,r){return Dr.deserialize(t,e,n,s,a,r)}static async deserialize(t,e,n){let s=null;if(t instanceof Hs){let{data:{inkLists:r,rect:l,rotation:o,id:c,color:u,opacity:h,borderStyle:{rawWidth:d},popupRef:f},parent:{page:{pageNumber:g}}}=t;s=t={annotationType:I.INK,color:Array.from(u),thickness:d,opacity:h,paths:{points:r},boxes:null,pageIndex:g-1,rect:l.slice(0),rotation:o,id:c,deleted:!1,popupRef:f}}let a=await super.deserialize(t,e,n);return a.annotationElementId=t.id||null,a._initialData=s,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();let{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){let t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:n}){this._drawingOptions=i.getDefaultDrawingOptions({stroke:M.makeHexColor(...t),"stroke-width":e,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let{lines:e,points:n,rect:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":r,"stroke-width":l}}=this,o={annotationType:I.INK,color:ot._colorManager.convert(a),opacity:r,thickness:l,paths:{lines:e,points:n},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!this.#t(o)?null:(o.id=this.annotationElementId,o)}#t(t){let{color:e,thickness:n,opacity:s,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((r,l)=>r!==e[l])||t.thickness!==n||t.opacity!==s||t.pageIndex!==a}renderAnnotationElement(t){let{points:e,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:e}),null}},Yc=class i extends ot{#t=null;#e=null;#i=null;#n=null;#a=null;#s="";#c=null;#l=null;#u=null;#o=!1;#h=!1;static _type="stamp";static _editorType=I.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#a=t.bitmapFile}static initialize(t,e){ot.initialize(t,e)}static get supportedTypes(){return U(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>`image/${e}`))}static get supportedTypesStr(){return U(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(I.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){let e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#r(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#o=t.isSvg),t.file&&(this.#s=t.file.name),this.#p()}#d(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#c){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;let{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");let{data:s,width:a,height:r}=t||this.copyCanvas(null,null,!0).imageData,l=await n.guess({name:"altText",request:{data:s,width:a,height:r,channels:s.length/(a*r)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");let o=l.output;return await this.setGuessedAltText(o),e&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}#f(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#r(n,!0)).finally(()=>this.#d());return}if(this.#n){let n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(n).then(s=>this.#r(s)).finally(()=>this.#d());return}if(this.#a){let n=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(n).then(s=>this.#r(s)).finally(()=>this.#d());return}let t=document.createElement("input");t.type="file",t.accept=i.supportedTypesStr;let e=this._uiManager._signal;this.#i=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#r(s)}n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>this.#d()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#c?.remove(),this.#c=null,this.#l?.disconnect(),this.#l=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#f();return}super.rebuild(),this.div!==null&&(this.#e&&this.#c===null&&this.#f(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#a||this.#e)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;if(this.width&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#t?this.#p():this.#f(),this.width&&!this.annotationElementId){let[n,s]=this.parentDimensions;this.setAt(t*n,e*s,this.width*n,this.height*s)}return this.div}#p(){let{div:t}=this,{width:e,height:n}=this.#t,[s,a]=this.pageDimensions,r=.75;if(this.width)e=this.width*s,n=this.height*a;else if(e>r*s||n>r*a){let u=Math.min(r*s/e,r*a/n);e*=u,n*=u}let[l,o]=this.parentDimensions;this.setDims(e*l/s,n*o/a),this._uiManager.enableWaiting(!1);let c=this.#c=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#v(e,n),this.#A(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&c.setAttribute("aria-label",this.#s)}copyCanvas(t,e,n=!1){t||(t=224);let{width:s,height:a}=this.#t,r=new Ms,l=this.#t,o=s,c=a,u=null;if(e){if(s>e||a>e){let w=Math.min(e/s,e/a);o=Math.floor(s*w),c=Math.floor(a*w)}u=document.createElement("canvas");let d=u.width=Math.ceil(o*r.sx),f=u.height=Math.ceil(c*r.sy);this.#o||(l=this.#g(d,f));let g=u.getContext("2d");g.filter=this._uiManager.hcmFilter;let v="white",A="#cfcfd8";this._uiManager.hcmFilter!=="none"?A="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(v="#8f8f9d",A="#42414d");let p=15,m=p*r.sx,b=p*r.sy,y=new OffscreenCanvas(m*2,b*2),_=y.getContext("2d");_.fillStyle=v,_.fillRect(0,0,m*2,b*2),_.fillStyle=A,_.fillRect(0,0,m,b),_.fillRect(m,b,m,b),g.fillStyle=g.createPattern(y,"repeat"),g.fillRect(0,0,d,f),g.drawImage(l,0,0,l.width,l.height,0,0,d,f)}let h=null;if(n){let d,f;if(r.symmetric&&l.width<t&&l.height<t)d=l.width,f=l.height;else if(l=this.#t,s>t||a>t){let A=Math.min(t/s,t/a);d=Math.floor(s*A),f=Math.floor(a*A),this.#o||(l=this.#g(d,f))}let v=new OffscreenCanvas(d,f).getContext("2d",{willReadFrequently:!0});v.drawImage(l,0,0,l.width,l.height,0,0,d,f),h={width:d,height:f,data:v.getImageData(0,0,d,f).data}}return{canvas:u,width:o,height:c,imageData:h}}#m(t,e){let[n,s]=this.parentDimensions;this.width=t/n,this.height=e/s,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#u!==null&&clearTimeout(this.#u);let a=200;this.#u=setTimeout(()=>{this.#u=null,this.#v(t,e)},a)}#g(t,e){let{width:n,height:s}=this.#t,a=n,r=s,l=this.#t;for(;a>2*t||r>2*e;){let o=a,c=r;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));let u=new OffscreenCanvas(a,r);u.getContext("2d").drawImage(l,0,0,o,c,0,0,a,r),l=u.transferToImageBitmap()}return l}#v(t,e){let n=new Ms,s=Math.ceil(t*n.sx),a=Math.ceil(e*n.sy),r=this.#c;if(!r||r.width===s&&r.height===a)return;r.width=s,r.height=a;let l=this.#o?this.#t:this.#g(s,a),o=r.getContext("2d");o.filter=this._uiManager.hcmFilter,o.drawImage(l,0,0,l.width,l.height,0,0,s,a)}getImageForAltText(){return this.#c}#b(t){if(t){if(this.#o){let s=this._uiManager.imageManager.getSvgUrl(this.#e);if(s)return s}let e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#o){let[e,n]=this.pageDimensions,s=Math.round(this.width*e*mi.PDF_TO_CSS_UNITS),a=Math.round(this.height*n*mi.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(s,a);return r.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,s,a),r.transferToImageBitmap()}return structuredClone(this.#t)}#A(){this._uiManager._signal&&(this.#l=new ResizeObserver(t=>{let e=t[0].contentRect;e.width&&e.height&&this.#m(e.width,e.height)}),this.#l.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#l?.disconnect(),this.#l=null},{once:!0}))}static async deserialize(t,e,n){let s=null;if(t instanceof xr){let{data:{rect:g,rotation:v,id:A,structParent:p,popupRef:m},container:b,parent:{page:{pageNumber:y}}}=t,_=b.querySelector("canvas"),w=n.imageManager.getFromCanvas(b.id,_);_.remove();let S=(await e._structTree.getAriaAttributes(`${Wc}${A}`))?.get("aria-label")||"";s=t={annotationType:I.STAMP,bitmapId:w.id,bitmap:w.bitmap,pageIndex:y-1,rect:g.slice(0),rotation:v,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:S},isSvg:!1,structParent:p,popupRef:m}}let a=await super.deserialize(t,e,n),{rect:r,bitmap:l,bitmapUrl:o,bitmapId:c,isSvg:u,accessibilityData:h}=t;c&&n.imageManager.isValidId(c)?(a.#e=c,l&&(a.#t=l)):a.#n=o,a.#o=u;let[d,f]=a.pageDimensions;return a.width=(r[2]-r[0])/d,a.height=(r[3]-r[1])/f,a.annotationElementId=t.id||null,h&&(a.altTextData=h),a._initialData=s,a.#h=!!s,a}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let n={annotationType:I.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#o,structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=this.#b(!0),n.accessibilityData=this.serializeAltText(!0),n;let{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(n.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){let l=this.#_(n);if(l.isSame)return null;l.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,e===null)return n;e.stamps||=new Map;let r=this.#o?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:r,serialized:n}),n.bitmap=this.#b(!1);else if(this.#o){let l=e.stamps.get(this.#e);r>l.area&&(l.area=r,l.serialized.bitmap.close(),l.serialized.bitmap=this.#b(!1))}return n}#_(t){let{pageIndex:e,accessibilityData:{altText:n}}=this._initialData,s=t.pageIndex===e,a=(t.accessibilityData?.alt||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}},Kc=class i{#t;#e=!1;#i=null;#n=null;#a=null;#s=new Map;#c=!1;#l=!1;#u=null;#o=null;#h=null;#r;static _initialized=!1;static#d=new Map([Uc,Xc,Yc,Mr].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:s,accessibilityManager:a,annotationLayer:r,drawLayer:l,textLayer:o,viewport:c,l10n:u}){let h=[...i.#d.values()];if(!i._initialized){i._initialized=!0;for(let d of h)d.initialize(u,t)}t.registerEditorTypes(h),this.#r=t,this.pageIndex=e,this.div=n,this.#t=a,this.#i=r,this.viewport=c,this.#o=o,this.drawLayer=l,this._structTree=s,this.#r.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#r.getMode()===I.NONE}updateToolbar(t){this.#r.updateToolbar(t)}updateMode(t=this.#r.getMode()){switch(this.#v(),t){case I.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case I.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case I.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:e}=this.div;for(let n of i.#d.values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#o?.div}setEditingState(t){this.#r.setEditingState(t)}addCommands(t){this.#r.addCommands(t)}cleanUndoStack(t){this.#r.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);let t=new Set;for(let n of this.#s.values())n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#r.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!this.#i)return;let e=this.#i.getEditableAnnotations();for(let n of e){if(n.hide(),this.#r.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;let s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){this.#l=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);let t=new Map,e=new Map;for(let s of this.#s.values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){t.set(s.annotationElementId,s);continue}else e.set(s.annotationElementId,s);this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#i){let s=this.#i.getEditableAnnotations();for(let a of s){let{id:r}=a.data;if(this.#r.isDeletedAnnotationElement(r))continue;let l=e.get(r);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=t.get(r),l&&(this.#r.addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);let{classList:n}=this.div;for(let s of i.#d.values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#l=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#r.getActive()!==t&&this.#r.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#o?.div&&!this.#h){this.#h=new AbortController;let t=this.#r.combinedSignal(this.#h);this.#o.div.addEventListener("pointerdown",this.#f.bind(this),{signal:t}),this.#o.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#o?.div&&this.#h&&(this.#h.abort(),this.#h=null,this.#o.div.classList.remove("highlighting"))}#f(t){this.#r.unselectAll();let{target:e}=t;if(e===this.#o.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#o.div.contains(e)){let{isMac:n}=Dt.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#r.showAllEditors("highlight",!0,!0),this.#o.div.classList.add("free"),this.toggleDrawing(),Mr.startHighlighting(this,this.#r.direction==="ltr",{target:this.#o.div,x:t.x,y:t.y}),this.#o.div.addEventListener("pointerup",()=>{this.#o.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#r._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;let t=this.#r.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#s.set(t.id,t);let{annotationElementId:e}=t;e&&this.#r.isDeletedAnnotationElement(e)&&this.#r.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#l&&t.annotationElementId&&this.#r.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#r.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#r.addDeletedAnnotationElement(t.annotationElementId),ot.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#r.addEditor(t),this.attach(t),!t.isAttachedToDOM){let e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#r.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;let{activeElement:e}=document;t.div.contains(e)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#r._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){let e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return this.#r.getId()}get#p(){return i.#d.get(this.#r.getMode())}combinedSignal(t){return this.#r.combinedSignal(t)}#m(t){let e=this.#p;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#p?.canCreateNewEmptyEditor()}pasteEditor(t,e){this.#r.updateToolbar(t),this.#r.updateMode(t);let{offsetX:n,offsetY:s}=this.#g(),a=this.getNextId(),r=this.#m({parent:this,id:a,x:n,y:s,uiManager:this.#r,isCentered:!0,...e});r&&this.add(r)}async deserialize(t){return await i.#d.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#r)||null}createAndAddNewEditor(t,e,n={}){let s=this.getNextId(),a=this.#m({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#r,isCentered:e,...n});return a&&this.add(a),a}#g(){let{x:t,y:e,width:n,height:s}=this.div.getBoundingClientRect(),a=Math.max(0,t),r=Math.max(0,e),l=Math.min(window.innerWidth,t+n),o=Math.min(window.innerHeight,e+s),c=(a+l)/2-t,u=(r+o)/2-e,[h,d]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:h,offsetY:d}}addNewEditor(){this.createAndAddNewEditor(this.#g(),!0)}setSelected(t){this.#r.setSelected(t)}toggleSelected(t){this.#r.toggleSelected(t)}unselect(t){this.#r.unselect(t)}pointerup(t){let{isMac:e}=Dt.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&this.#c&&(this.#c=!1,!(this.#p?.isDrawer&&this.#p.supportMultipleDrawings))){if(!this.#e){this.#e=!0;return}if(this.#r.getMode()===I.STAMP){this.#r.unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(this.#r.getMode()===I.HIGHLIGHT&&this.enableTextSelection(),this.#c){this.#c=!1;return}let{isMac:e}=Dt.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#c=!0,this.#p?.isDrawer){this.startDrawingSession(t);return}let n=this.#r.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus(),this.#u){this.#p.startDrawing(this,this.#r,!1,t);return}this.#r.setCurrentDrawingSession(this),this.#u=new AbortController;let e=this.#r.combinedSignal(this.#u);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&this.commitOrRemove()},{signal:e}),this.#p.startDrawing(this,this.#r,!1,t)}endDrawingSession(t=!1){return this.#u?(this.#r.setCurrentDrawingSession(null),this.#u.abort(),this.#u=null,this.#p.endDrawing(t)):null}findNewParent(t,e,n){let s=this.#r.findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return this.#u?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#u&&this.#p.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#r.getActive()?.parent===this&&(this.#r.commitOrRemove(),this.#r.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(let t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#r.removeLayer(this)}#v(){for(let t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Yi(this.div,t);for(let e of this.#r.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#r.commitOrRemove(),this.#v();let e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Yi(this.div,{rotation:n}),e!==n)for(let s of this.#s.values())s.rotate(n)}get pageDimensions(){let{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#r.viewParameters.realScale}},Qc=class i{#t=null;#e=0;#i=new Map;#n=new Map;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#i.size>0)for(let e of this.#i.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return U(this,"_svgFactory",new ks)}static#a(t,[e,n,s,a]){let{style:r}=t;r.top=`${100*n}%`,r.left=`${100*e}%`,r.width=`${100*s}%`,r.height=`${100*a}%`}#s(){let t=i._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#c(t,e){let n=i._svgFactory.createElement("clipPath");t.append(n);let s=`clip_${e}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");let a=i._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),s}#l(t,e){for(let[n,s]of Object.entries(e))s===null?t.removeAttribute(n):t.setAttribute(n,s)}draw(t,e=!1,n=!1){let s=this.#e++,a=this.#s(),r=i._svgFactory.createElement("defs");a.append(r);let l=i._svgFactory.createElement("path");r.append(l);let o=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",o),l.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(s,l);let c=n?this.#c(r,o):null,u=i._svgFactory.createElement("use");return a.append(u),u.setAttribute("href",`#${o}`),this.updateProperties(a,t),this.#i.set(s,a),{id:s,clipPathId:`url(#${c})`}}drawOutline(t,e){let n=this.#e++,s=this.#s(),a=i._svgFactory.createElement("defs");s.append(a);let r=i._svgFactory.createElement("path");a.append(r);let l=`path_p${this.pageIndex}_${n}`;r.setAttribute("id",l),r.setAttribute("vector-effect","non-scaling-stroke");let o;if(e){let h=i._svgFactory.createElement("mask");a.append(h),o=`mask_p${this.pageIndex}_${n}`,h.setAttribute("id",o),h.setAttribute("maskUnits","objectBoundingBox");let d=i._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");let f=i._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${l}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}let c=i._svgFactory.createElement("use");s.append(c),c.setAttribute("href",`#${l}`),o&&c.setAttribute("mask",`url(#${o})`);let u=c.cloneNode();return s.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(s,t),this.#i.set(n,s),n}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;let{root:n,bbox:s,rootClass:a,path:r}=e,l=typeof t=="number"?this.#i.get(t):t;if(l){if(n&&this.#l(l,n),s&&i.#a(l,s),a){let{classList:o}=l;for(let[c,u]of Object.entries(a))o.toggle(c,u)}if(r){let c=l.firstChild.firstChild;this.#l(c,r)}}}updateParent(t,e){if(e===this)return;let n=this.#i.get(t);n&&(e.#t.append(n),this.#i.delete(t),e.#i.set(t,n))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#i.get(t).remove(),this.#i.delete(t))}destroy(){this.#t=null;for(let t of this.#i.values())t.remove();this.#i.clear(),this.#n.clear()}};globalThis.pdfjsTestingUtils={HighlightOutliner:zs};var r1=N.AbortException,l1=N.AnnotationEditorLayer,o1=N.AnnotationEditorParamsType,c1=N.AnnotationEditorType,u1=N.AnnotationEditorUIManager,h1=N.AnnotationLayer,d1=N.AnnotationMode,f1=N.ColorPicker,p1=N.DOMSVGFactory,g1=N.DrawLayer,m1=N.FeatureTest,mf=N.GlobalWorkerOptions,v1=N.ImageKind,b1=N.InvalidPDFException,y1=N.MissingPDFException,A1=N.OPS,_1=N.OutputScale,S1=N.PDFDataRangeTransport,w1=N.PDFDateString,E1=N.PDFWorker,x1=N.PasswordResponses,T1=N.PermissionFlag,C1=N.PixelsPerInch,R1=N.RenderingCancelledException,M1=N.TextLayer,D1=N.UnexpectedResponseException,L1=N.Util,O1=N.VerbosityLevel,N1=N.XfaLayer,k1=N.build,I1=N.createValidAbsoluteUrl,H1=N.fetchData,vf=N.getDocument,z1=N.getFilenameFromUrl,B1=N.getPdfFilenameFromUrl,U1=N.getXfaPageViewport,F1=N.isDataScheme,P1=N.isPdfFile,G1=N.noContextMenu,q1=N.normalizeUnicode,j1=N.setLayerDimensions,V1=N.shadow,X1=N.stopEvent,Y1=N.version;var fi=bs(ys(),1),X0=bs(O0(),1);function Le(){}Le.prototype={diff:function(t,e){var n,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=s.callback;typeof s=="function"&&(a=s,s={});var r=this;function l(y){return y=r.postProcess(y,s),a?(setTimeout(function(){a(y)},0),!0):y}t=this.castInput(t,s),e=this.castInput(e,s),t=this.removeEmpty(this.tokenize(t,s)),e=this.removeEmpty(this.tokenize(e,s));var o=e.length,c=t.length,u=1,h=o+c;s.maxEditLength!=null&&(h=Math.min(h,s.maxEditLength));var d=(n=s.timeout)!==null&&n!==void 0?n:1/0,f=Date.now()+d,g=[{oldPos:-1,lastComponent:void 0}],v=this.extractCommon(g[0],e,t,0,s);if(g[0].oldPos+1>=c&&v+1>=o)return l(N0(r,g[0].lastComponent,e,t,r.useLongestToken));var A=-1/0,p=1/0;function m(){for(var y=Math.max(A,-u);y<=Math.min(p,u);y+=2){var _=void 0,w=g[y-1],S=g[y+1];w&&(g[y-1]=void 0);var x=!1;if(S){var T=S.oldPos-y;x=S&&0<=T&&T<o}var R=w&&w.oldPos+1<c;if(!x&&!R){g[y]=void 0;continue}if(!R||x&&w.oldPos<S.oldPos?_=r.addToPath(S,!0,!1,0,s):_=r.addToPath(w,!1,!0,1,s),v=r.extractCommon(_,e,t,y,s),_.oldPos+1>=c&&v+1>=o)return l(N0(r,_.lastComponent,e,t,r.useLongestToken));g[y]=_,_.oldPos+1>=c&&(p=Math.min(p,y-1)),v+1>=o&&(A=Math.max(A,y+1))}u++}if(a)(function y(){setTimeout(function(){if(u>h||Date.now()>f)return a();m()||y()},0)})();else for(;u<=h&&Date.now()<=f;){var b=m();if(b)return b}},addToPath:function(t,e,n,s,a){var r=t.lastComponent;return r&&!a.oneChangePerToken&&r.added===e&&r.removed===n?{oldPos:t.oldPos+s,lastComponent:{count:r.count+1,added:e,removed:n,previousComponent:r.previousComponent}}:{oldPos:t.oldPos+s,lastComponent:{count:1,added:e,removed:n,previousComponent:r}}},extractCommon:function(t,e,n,s,a){for(var r=e.length,l=n.length,o=t.oldPos,c=o-s,u=0;c+1<r&&o+1<l&&this.equals(n[o+1],e[c+1],a);)c++,o++,u++,a.oneChangePerToken&&(t.lastComponent={count:1,previousComponent:t.lastComponent,added:!1,removed:!1});return u&&!a.oneChangePerToken&&(t.lastComponent={count:u,previousComponent:t.lastComponent,added:!1,removed:!1}),t.oldPos=o,c},equals:function(t,e,n){return n.comparator?n.comparator(t,e):t===e||n.ignoreCase&&t.toLowerCase()===e.toLowerCase()},removeEmpty:function(t){for(var e=[],n=0;n<t.length;n++)t[n]&&e.push(t[n]);return e},castInput:function(t){return t},tokenize:function(t){return Array.from(t)},join:function(t){return t.join("")},postProcess:function(t){return t}};function N0(i,t,e,n,s){for(var a=[],r;t;)a.push(t),r=t.previousComponent,delete t.previousComponent,t=r;a.reverse();for(var l=0,o=a.length,c=0,u=0;l<o;l++){var h=a[l];if(h.removed)h.value=i.join(n.slice(u,u+h.count)),u+=h.count;else{if(!h.added&&s){var d=e.slice(c,c+h.count);d=d.map(function(f,g){var v=n[u+g];return v.length>f.length?v:f}),h.value=i.join(d)}else h.value=i.join(e.slice(c,c+h.count));c+=h.count,h.added||(u+=h.count)}}return a}var t_=new Le;function k0(i,t){var e;for(e=0;e<i.length&&e<t.length;e++)if(i[e]!=t[e])return i.slice(0,e);return i.slice(0,e)}function I0(i,t){var e;if(!i||!t||i[i.length-1]!=t[t.length-1])return"";for(e=0;e<i.length&&e<t.length;e++)if(i[i.length-(e+1)]!=t[t.length-(e+1)])return i.slice(-e);return i.slice(-e)}function wd(i,t,e){if(i.slice(0,t.length)!=t)throw Error("string ".concat(JSON.stringify(i)," doesn't start with prefix ").concat(JSON.stringify(t),"; this is a bug"));return e+i.slice(t.length)}function Ed(i,t,e){if(!t)return i+e;if(i.slice(-t.length)!=t)throw Error("string ".concat(JSON.stringify(i)," doesn't end with suffix ").concat(JSON.stringify(t),"; this is a bug"));return i.slice(0,-t.length)+e}function Va(i,t){return wd(i,t,"")}function uo(i,t){return Ed(i,t,"")}function H0(i,t){return t.slice(0,qA(i,t))}function qA(i,t){var e=0;i.length>t.length&&(e=i.length-t.length);var n=t.length;i.length<t.length&&(n=i.length);var s=Array(n),a=0;s[0]=0;for(var r=1;r<n;r++){for(t[r]==t[a]?s[r]=s[a]:s[r]=a;a>0&&t[r]!=t[a];)a=s[a];t[r]==t[a]&&a++}a=0;for(var l=e;l<i.length;l++){for(;a>0&&i[l]!=t[a];)a=s[a];i[l]==t[a]&&a++}return a}var ho="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",jA=new RegExp("[".concat(ho,"]+|\\s+|[^").concat(ho,"]"),"ug"),po=new Le;po.equals=function(i,t,e){return e.ignoreCase&&(i=i.toLowerCase(),t=t.toLowerCase()),i.trim()===t.trim()};po.tokenize=function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e;if(t.intlSegmenter){if(t.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');e=Array.from(t.intlSegmenter.segment(i),function(a){return a.segment})}else e=i.match(jA)||[];var n=[],s=null;return e.forEach(function(a){/\s/.test(a)?s==null?n.push(a):n.push(n.pop()+a):/\s/.test(s)?n[n.length-1]==s?n.push(n.pop()+a):n.push(s+a):n.push(a),s=a}),n};po.join=function(i){return i.map(function(t,e){return e==0?t:t.replace(/^\s+/,"")}).join("")};po.postProcess=function(i,t){if(!i||t.oneChangePerToken)return i;var e=null,n=null,s=null;return i.forEach(function(a){a.added?n=a:a.removed?s=a:((n||s)&&z0(e,s,n,a),e=a,n=null,s=null)}),(n||s)&&z0(e,s,n,null),i};function z0(i,t,e,n){if(t&&e){var s=t.value.match(/^\s*/)[0],a=t.value.match(/\s*$/)[0],r=e.value.match(/^\s*/)[0],l=e.value.match(/\s*$/)[0];if(i){var o=k0(s,r);i.value=Ed(i.value,r,o),t.value=Va(t.value,o),e.value=Va(e.value,o)}if(n){var c=I0(a,l);n.value=wd(n.value,l,c),t.value=uo(t.value,c),e.value=uo(e.value,c)}}else if(e)i&&(e.value=e.value.replace(/^\s*/,"")),n&&(n.value=n.value.replace(/^\s*/,""));else if(i&&n){var u=n.value.match(/^\s*/)[0],h=t.value.match(/^\s*/)[0],d=t.value.match(/\s*$/)[0],f=k0(u,h);t.value=Va(t.value,f);var g=I0(Va(u,f),d);t.value=uo(t.value,g),n.value=wd(n.value,u,g),i.value=Ed(i.value,u,u.slice(0,u.length-g.length))}else if(n){var v=n.value.match(/^\s*/)[0],A=t.value.match(/\s*$/)[0],p=H0(A,v);t.value=uo(t.value,p)}else if(i){var m=i.value.match(/\s*$/)[0],b=t.value.match(/^\s*/)[0],y=H0(m,b);t.value=Va(t.value,y)}}var VA=new Le;VA.tokenize=function(i){var t=new RegExp("(\\r?\\n)|[".concat(ho,"]+|[^\\S\\n\\r]+|[^").concat(ho,"]"),"ug");return i.match(t)||[]};var Cd=new Le;Cd.tokenize=function(i,t){t.stripTrailingCr&&(i=i.replace(/\r\n/g,`
`));var e=[],n=i.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var s=0;s<n.length;s++){var a=n[s];s%2&&!t.newlineIsToken?e[e.length-1]+=a:e.push(a)}return e};Cd.equals=function(i,t,e){return e.ignoreWhitespace?((!e.newlineIsToken||!i.includes(`
`))&&(i=i.trim()),(!e.newlineIsToken||!t.includes(`
`))&&(t=t.trim())):e.ignoreNewlineAtEof&&!e.newlineIsToken&&(i.endsWith(`
`)&&(i=i.slice(0,-1)),t.endsWith(`
`)&&(t=t.slice(0,-1))),Le.prototype.equals.call(this,i,t,e)};var XA=new Le;XA.tokenize=function(i){return i.split(/(\S.+?[.!?])(?=\s+|$)/)};var YA=new Le;YA.tokenize=function(i){return i.split(/([{}:;,]|\s+)/)};function xd(i){"@babel/helpers - typeof";return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xd(i)}var Xa=new Le;Xa.useLongestToken=!0;Xa.tokenize=Cd.tokenize;Xa.castInput=function(i,t){var e=t.undefinedReplacement,n=t.stringifyReplacer,s=n===void 0?function(a,r){return typeof r>"u"?e:r}:n;return typeof i=="string"?i:JSON.stringify(Td(i,null,null,s),s,"  ")};Xa.equals=function(i,t,e){return Le.prototype.equals.call(Xa,i.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"),e)};function Td(i,t,e,n,s){t=t||[],e=e||[],n&&(i=n(s,i));var a;for(a=0;a<t.length;a+=1)if(t[a]===i)return e[a];var r;if(Object.prototype.toString.call(i)==="[object Array]"){for(t.push(i),r=new Array(i.length),e.push(r),a=0;a<i.length;a+=1)r[a]=Td(i[a],t,e,n,s);return t.pop(),e.pop(),r}if(i&&i.toJSON&&(i=i.toJSON()),xd(i)==="object"&&i!==null){t.push(i),r={},e.push(r);var l=[],o;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&l.push(o);for(l.sort(),a=0;a<l.length;a+=1)o=l[a],r[o]=Td(i[o],t,e,n,o);t.pop(),e.pop()}else r=i;return r}var fo=new Le;fo.tokenize=function(i){return i.slice()};fo.join=fo.removeEmpty=function(i){return i};function B0(i,t,e){return fo.diff(i,t,e)}var F0=(i,t)=>B0(i,t,{comparator:(e,n)=>e.hash===n.hash}),Rd=async i=>{let t=[];for(let e=0;e<i.height;e++){let n=i.data.slice(e*i.width*4,(e+1)*i.width*4),s=0;for(;s<n.length&&!(n[s+0]!==n[0]||n[s+1]!==n[1]||n[s+2]!==n[2]||n[s+3]!==n[3]);)s+=4;let a=n.length;for(;a>=0&&(a-=4,!(n[a+0]!==n[n.length-4]||n[a+1]!==n[n.length-3]||n[a+2]!==n[n.length-2]||n[a+3]!==n[n.length-1])););let r=n.slice(s,a),l=[...new Uint8Array(await crypto.subtle.digest("SHA-256",new Uint8Array(r)))].map(c=>c.toString(16).padStart(2,"0")).join(""),o={original:n,hash:l};t.push(o)}return t},P0=i=>{let t=i.flatMap(({value:a})=>a.flatMap(r=>r.original.length)).reduce((a,r)=>Math.max(a,r),0)/4,e=i.reduce((a,{value:r})=>a+r.length,0),n=new Uint8ClampedArray(t*e*4),s=0;for(let{value:a,added:r,removed:l}of i)for(let o of a){let c=new Uint8ClampedArray(o.original);for(let u=0;u<c.length;u+=4)r?U0(c,u,[34,220,71,255],.125):l&&U0(c,u,[255,12,0,255],.125);n.set(c,s*t*4),s++}return{width:t,height:e,data:n}},U0=(i,t,[e,n,s,a],r)=>{i[t+0]=Math.round(i[t+0]*(1-r)+e*r),i[t+1]=Math.round(i[t+1]*(1-r)+n*r),i[t+2]=Math.round(i[t+2]*(1-r)+s*r),i[t+3]=Math.round(i[t+3]*(1-r)+a*r)};var J=bs(Md(),1);mf.workerSrc="pdf.worker.min.mjs";var $A=()=>(0,J.jsx)(fi.StrictMode,{children:(0,J.jsx)(ZA,{})}),Y0=document.createElement("div");document.body.append(Y0);(0,X0.createRoot)(Y0).render((0,J.jsx)($A,{}));var WA=[{title:"\u6CB9\u5F69\u30C9\u30C3\u30C8\u7D75\u30E1\u30FC\u30AB\u30FC",url:"https://oil-pixel.hata6502.com/"},{title:"\u5199\u771F\u5730\u56F3",url:"https://almap.hata6502.com/"},{title:"\u958B\u767A\u5BA4",url:"https://scrapbox.io/hata6502/rastermatch"}],ZA=()=>{let[i,t]=(0,fi.useState)([]),[e,n]=(0,fi.useState)([]),s=(0,fi.useRef)(null);return(0,fi.useEffect)(()=>{if(!s.current)return;let l=s.current,o=F0(i,e),c=P0(o);if(!c.width||!c.height)return;l.width=c.width,l.height=c.height,l.hidden=!1;let u=l.getContext("2d");if(!u)throw new Error("context is null");u.putImageData(new ImageData(c.data,c.width,c.height),0,0)},[i,e]),(0,J.jsx)("div",{className:"bg-white mx-auto max-w-4xl mb-16 px-8",children:(0,J.jsxs)("div",{className:"mt-16",children:[(0,J.jsxs)("h2",{className:"flex flex-col-reverse items-center gap-4 break-keep break-words font-bold text-5xl md:flex-row",children:["Hemming Diff",(0,J.jsx)("img",{src:"favicon.png",className:"inline w-20"})]}),(0,J.jsxs)("p",{className:"mt-8",children:["\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u3092\u6BD4\u8F03\u3057\u305F\u3044\u3068\u304D\u306B\u4F7F\u3046\u3001\u884C\u5358\u4F4D\u306E\u753B\u50CFdiff\u30C4\u30FC\u30EB",(0,J.jsx)("br",{}),"\u30D5\u30A1\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u305B\u305A\u306B\u3001\u30D6\u30E9\u30A6\u30B6\u4E0A\u3067\u6BD4\u8F03\u3067\u304D\u307E\u3059"]}),(0,J.jsxs)("div",{className:"mt-16",children:[(0,J.jsx)("div",{children:"\u6BD4\u8F03\u3057\u305F\u3044PDF\u3084\u753B\u50CF\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044"}),(0,J.jsxs)("div",{className:"mt-8",children:[(0,J.jsx)("input",{type:"file",accept:"application/pdf, image/*",multiple:!0,onChange:async l=>{let o=await V0(l.target.files);t(await Rd({width:o.width,height:o.height,data:o.data}))},style:{background:"rgb(255 12 0 / 12.5%)"}}),(0,J.jsx)("input",{type:"file",accept:"application/pdf, image/*",multiple:!0,onChange:async l=>{let o=await V0(l.target.files);n(await Rd({width:o.width,height:o.height,data:o.data}))},style:{background:"rgb(34 220 71 / 12.5%)"}})]})]}),(0,J.jsx)("div",{className:"mt-8",children:(0,J.jsx)("canvas",{ref:s,hidden:!0,className:"w-full"})}),(0,J.jsx)("div",{className:"mt-16",children:(0,J.jsx)("div",{className:"divide-y divide-gray-900/10",children:WA.map(({title:l,url:o})=>(0,J.jsxs)("a",{href:o,target:"_blank",className:"flex items-center gap-x-2 py-6",children:[(0,J.jsx)(So,{className:"h-6 w-6","aria-hidden":"true"}),(0,J.jsx)("span",{className:"font-semibold leading-7",children:l})]},l))})}),(0,J.jsx)("footer",{className:"mt-16",children:(0,J.jsxs)("p",{className:"text-xs leading-5 text-gray-500",children:[new Date().getFullYear(),"\xA0",(0,J.jsx)("a",{href:"https://twitter.com/hata6502",target:"_blank",className:"hover:text-gray-600",children:"\u30E0\u30AE\u30E5\u30A6"}),"\u2003",(0,J.jsx)("a",{href:"https://scrapbox.io/hata6502/Hemming_Diff%E5%85%8D%E8%B2%AC%E4%BA%8B%E9%A0%85",target:"_blank",className:"hover:text-gray-600",children:"\u514D\u8CAC\u4E8B\u9805"})]})})]})})},V0=async i=>{let t=[];for(let a of i??[])switch(a.type){case"application/pdf":{let r=await vf(await a.arrayBuffer()).promise;for(let l=1;l<=r.numPages;l+=1){let o=await r.getPage(l),c=o.getViewport({scale:devicePixelRatio}),u=document.createElement("canvas");u.width=c.width,u.height=c.height;let h=u.getContext("2d");if(!h)throw new Error("context is null");await o.render({canvasContext:h,viewport:c}).promise,t.push(h.getImageData(0,0,u.width,u.height))}break}default:{let r=await createImageBitmap(a),l=document.createElement("canvas");l.width=r.width,l.height=r.height;let o=l.getContext("2d");if(!o)throw new Error("context is null");o.drawImage(r,0,0),t.push(o.getImageData(0,0,l.width,l.height));break}}let e=document.createElement("canvas");e.width=t.reduce((a,r)=>Math.max(a,r.width),0),e.height=t.reduce((a,r)=>a+r.height,0);let n=e.getContext("2d");if(!n)throw new Error("context is null");let s=0;for(let a of t)n.putImageData(a,0,s),s+=a.height;return n.getImageData(0,0,e.width,e.height)};export{ZA as App};
/*! Bundled license information:

react/cjs/react.production.js:
  (**
   * @license React
   * react.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.js:
  (**
   * @license React
   * scheduler.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.js:
  (**
   * @license React
   * react-dom.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom-client.production.js:
  (**
   * @license React
   * react-dom-client.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.js:
  (**
   * @license React
   * react-jsx-runtime.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
